/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./client/src/entrypoints/admin/core.js":
/*!**********************************************!*\
  !*** ./client/src/entrypoints/admin/core.js ***!
  \**********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar jquery_1 = __importDefault(__webpack_require__(/*! jquery */ \"jquery\"));\nvar text_1 = __webpack_require__(/*! ../../utils/text */ \"./client/src/utils/text.ts\");\nvar initButtonSelects_1 = __webpack_require__(/*! ../../includes/initButtonSelects */ \"./client/src/includes/initButtonSelects.ts\");\nvar initTagField_1 = __webpack_require__(/*! ../../includes/initTagField */ \"./client/src/includes/initTagField.ts\");\nvar initTooltips_1 = __webpack_require__(/*! ../../includes/initTooltips */ \"./client/src/includes/initTooltips.ts\");\n/* generic function for adding a message to message area through JS alone */\nfunction addMessage(status, text) {\n    (0, jquery_1[\"default\"])('.messages')\n        .addClass('new')\n        .empty()\n        .append('<ul><li class=\"' + status + '\">' + text + '</li></ul>');\n    var addMsgTimeout = setTimeout(function () {\n        (0, jquery_1[\"default\"])('.messages').addClass('appear');\n        clearTimeout(addMsgTimeout);\n    }, 100);\n}\nwindow.addMessage = addMessage;\nwindow.escapeHtml = text_1.escapeHtml;\nwindow.initTagField = initTagField_1.initTagField;\n/*\n * Enables a \"dirty form check\", prompting the user if they are navigating away\n * from a page with unsaved changes, as well as optionally controlling other\n * behaviour via a callback\n *\n * It takes the following parameters:\n *\n *  - formSelector - A CSS selector to select the form to apply this check to.\n *\n *  - options - An object for passing in options. Possible options are:\n *  - confirmationMessage - The message to display in the prompt.\n *  - alwaysDirty - When set to true the form will always be considered dirty,\n *    prompting the user even when nothing has been changed.\n *  - commentApp - The CommentApp used by the commenting system, if the dirty check\n *    should include comments\n *  - callback - A function to be run when the dirty status of the form, or the comments\n *    system (if using) changes, taking formDirty, commentsDirty as arguments\n */\nfunction enableDirtyFormCheck(formSelector, options) {\n    var $form = (0, jquery_1[\"default\"])(formSelector);\n    var confirmationMessage = options.confirmationMessage || ' ';\n    var alwaysDirty = options.alwaysDirty || false;\n    var commentApp = options.commentApp || null;\n    var callback = options.callback || null;\n    var initialData = null;\n    var formSubmitted = false;\n    var updateCallback = function (formDirty, commentsDirty) {\n        if (callback) {\n            callback(formDirty, commentsDirty);\n        }\n    };\n    $form.on('submit', function () {\n        formSubmitted = true;\n    });\n    var isDirty = alwaysDirty;\n    var isCommentsDirty = false;\n    var updateIsCommentsDirtyTimeout = -1;\n    if (commentApp) {\n        isCommentsDirty = commentApp.selectors.selectIsDirty(commentApp.store.getState());\n        commentApp.store.subscribe(function () {\n            // Update on a timeout to match the timings for responding to page form changes\n            clearTimeout(updateIsCommentsDirtyTimeout);\n            updateIsCommentsDirtyTimeout = setTimeout(function () {\n                var newIsCommentsDirty = commentApp.selectors.selectIsDirty(commentApp.store.getState());\n                if (newIsCommentsDirty !== isCommentsDirty) {\n                    isCommentsDirty = newIsCommentsDirty;\n                    updateCallback(isDirty, isCommentsDirty);\n                }\n            }, isCommentsDirty ? 3000 : 300);\n        });\n    }\n    updateCallback(isDirty, isCommentsDirty);\n    var updateIsDirtyTimeout = -1;\n    var isFormDirty = function () {\n        if (alwaysDirty) {\n            return true;\n        }\n        else if (!initialData) {\n            return false;\n        }\n        var formData = new FormData($form[0]);\n        var keys = Array.from(formData.keys()).filter(function (key) { return !key.startsWith('comments-'); });\n        if (keys.length !== initialData.size) {\n            return true;\n        }\n        return keys.some(function (key) {\n            var newValue = formData.getAll(key);\n            var oldValue = initialData.get(key);\n            if (newValue === oldValue) {\n                return false;\n            }\n            else if (Array.isArray(newValue) && Array.isArray(oldValue)) {\n                return (newValue.length !== oldValue.length ||\n                    newValue.some(function (value, index) { return value !== oldValue[index]; }));\n            }\n            return false;\n        });\n    };\n    var updateIsDirty = function () {\n        var previousIsDirty = isDirty;\n        isDirty = isFormDirty();\n        if (previousIsDirty !== isDirty) {\n            updateCallback(isDirty, isCommentsDirty);\n        }\n    };\n    // Delay snapshotting the form’s data to avoid race conditions with form widgets that might process the values.\n    // User interaction with the form within that delay also won’t trigger the confirmation message.\n    if (!alwaysDirty) {\n        setTimeout(function () {\n            var initialFormData = new FormData($form[0]);\n            initialData = new Map();\n            Array.from(initialFormData.keys())\n                .filter(function (key) { return !key.startsWith('comments-'); })\n                .forEach(function (key) { return initialData.set(key, initialFormData.getAll(key)); });\n            var updateDirtyCheck = function () {\n                clearTimeout(updateIsDirtyTimeout);\n                // If the form is dirty, it is relatively unlikely to become clean again, so\n                // run the dirty check on a relatively long timer that we reset on any form update\n                // otherwise, use a short timer both for nicer UX and to ensure widgets\n                // like Draftail have time to serialize their data\n                updateIsDirtyTimeout = setTimeout(updateIsDirty, isDirty ? 3000 : 300);\n            };\n            $form.on('change keyup', updateDirtyCheck).trigger('change');\n            var validInputNodeInList = function (nodeList) {\n                var e_1, _a;\n                try {\n                    for (var nodeList_1 = __values(nodeList), nodeList_1_1 = nodeList_1.next(); !nodeList_1_1.done; nodeList_1_1 = nodeList_1.next()) {\n                        var node = nodeList_1_1.value;\n                        if (node.nodeType === node.ELEMENT_NODE &&\n                            ['INPUT', 'TEXTAREA', 'SELECT'].includes(node.tagName)) {\n                            return true;\n                        }\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (nodeList_1_1 && !nodeList_1_1.done && (_a = nodeList_1[\"return\"])) _a.call(nodeList_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                return false;\n            };\n            var observer = new MutationObserver(function (mutationList) {\n                var e_2, _a;\n                try {\n                    for (var mutationList_1 = __values(mutationList), mutationList_1_1 = mutationList_1.next(); !mutationList_1_1.done; mutationList_1_1 = mutationList_1.next()) {\n                        var mutation = mutationList_1_1.value;\n                        if (validInputNodeInList(mutation.addedNodes) ||\n                            validInputNodeInList(mutation.removedNodes)) {\n                            updateDirtyCheck();\n                            return;\n                        }\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (mutationList_1_1 && !mutationList_1_1.done && (_a = mutationList_1[\"return\"])) _a.call(mutationList_1);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n            });\n            observer.observe($form[0], {\n                childList: true,\n                attributes: false,\n                subtree: true\n            });\n        }, 1000 * 10);\n    }\n    // eslint-disable-next-line consistent-return\n    window.addEventListener('beforeunload', function (event) {\n        clearTimeout(updateIsDirtyTimeout);\n        updateIsDirty();\n        var displayConfirmation = !formSubmitted && (isDirty || isCommentsDirty);\n        if (displayConfirmation) {\n            // eslint-disable-next-line no-param-reassign\n            event.returnValue = confirmationMessage;\n            return confirmationMessage;\n        }\n    });\n}\nwindow.enableDirtyFormCheck = enableDirtyFormCheck;\n(0, jquery_1[\"default\"])(function () {\n    // Add class to the body from which transitions may be hung so they don't appear to transition as the page loads\n    (0, jquery_1[\"default\"])('body').addClass('ready');\n    /* Functions that need to run/rerun when active tabs are changed */\n    function resizeTextAreas() {\n        // eslint-disable-next-line func-names\n        (0, jquery_1[\"default\"])('textarea[data-autosize-on]').each(function () {\n            // eslint-disable-next-line no-undef\n            autosize.update((0, jquery_1[\"default\"])(this).get());\n        });\n    }\n    // Resize textareas on page load and when tab changed\n    (0, jquery_1[\"default\"])(document).ready(resizeTextAreas);\n    document.addEventListener('wagtail:tab-changed', resizeTextAreas);\n    // eslint-disable-next-line func-names\n    (0, jquery_1[\"default\"])('.dropdown').each(function () {\n        var $dropdown = (0, jquery_1[\"default\"])(this);\n        (0, jquery_1[\"default\"])('.dropdown-toggle', $dropdown).on('click', function (e) {\n            e.stopPropagation();\n            $dropdown.toggleClass('open');\n            if ($dropdown.hasClass('open')) {\n                // If a dropdown is opened, add an event listener for document clicks to close it\n                (0, jquery_1[\"default\"])(document).on('click.dropdown.cancel', function (e2) {\n                    var relTarg = e2.relatedTarget || e2.toElement;\n                    // Only close dropdown if the click target wasn't a child of this dropdown\n                    if (!(0, jquery_1[\"default\"])(relTarg).parents().is($dropdown)) {\n                        $dropdown.removeClass('open');\n                        (0, jquery_1[\"default\"])(document).off('click.dropdown.cancel');\n                    }\n                });\n            }\n            else {\n                (0, jquery_1[\"default\"])(document).off('click.dropdown.cancel');\n            }\n        });\n    });\n    /* Dropzones */\n    (0, jquery_1[\"default\"])('.drop-zone')\n        .on('dragover', function onDragOver() {\n        (0, jquery_1[\"default\"])(this).addClass('hovered');\n    })\n        .on('dragleave dragend drop', function onDragLeave() {\n        (0, jquery_1[\"default\"])(this).removeClass('hovered');\n    });\n    /* Header search behaviour */\n    if (window.headerSearch) {\n        var searchCurrentIndex_1 = 0;\n        var searchNextIndex_1 = 0;\n        var $input_1 = (0, jquery_1[\"default\"])(window.headerSearch.termInput);\n        var $inputContainer = $input_1.parent();\n        var $icon_1 = $inputContainer.find('use');\n        var baseIcon_1 = $icon_1.attr('href');\n        $input_1.on('keyup cut paste change', function () {\n            clearTimeout($input_1.data('timer'));\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            $input_1.data('timer', setTimeout(search_1, 200));\n        });\n        // auto focus on search box\n        $input_1.trigger('focus');\n        // eslint-disable-next-line func-names\n        var search_1 = function () {\n            var newQuery = $input_1.val();\n            // eslint-disable-next-line @typescript-eslint/no-use-before-define\n            var currentQuery = getURLParam_1('q');\n            // only do the query if it has changed for trimmed queries\n            // for example - \" \" === \"\" and \"firstword \" ==== \"firstword\"\n            if (currentQuery.trim() !== newQuery.trim()) {\n                $icon_1.attr('href', '#icon-spinner');\n                searchNextIndex_1 += 1;\n                var index_1 = searchNextIndex_1;\n                // Update q, reset to first page, and keep other query params\n                var searchParams = new URLSearchParams(window.location.search);\n                searchParams.set('q', newQuery);\n                searchParams[\"delete\"]('p');\n                var queryString_1 = searchParams.toString();\n                jquery_1[\"default\"].ajax({\n                    url: window.headerSearch.url,\n                    data: queryString_1,\n                    success: function (data) {\n                        if (index_1 > searchCurrentIndex_1) {\n                            searchCurrentIndex_1 = index_1;\n                            (0, jquery_1[\"default\"])(window.headerSearch.targetOutput).html(data).slideDown(800);\n                            window.history.replaceState(null, null, '?' + queryString_1);\n                            $input_1[0].dispatchEvent(new Event('search-success'));\n                        }\n                    },\n                    complete: function () {\n                        window.wagtail.ui.initDropDowns();\n                        // Reinitialise any tooltips\n                        (0, initTooltips_1.initTooltips)();\n                        $icon_1.attr('href', baseIcon_1);\n                    }\n                });\n            }\n        };\n        // eslint-disable-next-line func-names\n        var getURLParam_1 = function (name) {\n            var results = new RegExp('[\\\\?&]' + name + '=([^]*)').exec(window.location.search);\n            if (results) {\n                return results[1];\n            }\n            return '';\n        };\n    }\n    /* Debounce submission of long-running forms and add spinner to give sense of activity */\n    // eslint-disable-next-line func-names\n    (0, jquery_1[\"default\"])(document).on('click', 'button.button-longrunning', function () {\n        var $self = (0, jquery_1[\"default\"])(this);\n        var $replacementElem = (0, jquery_1[\"default\"])('em', $self);\n        var reEnableAfter = 30;\n        var dataName = 'disabledtimeout';\n        // eslint-disable-next-line func-names\n        window.cancelSpinner = function () {\n            $self\n                .prop('disabled', '')\n                .removeData(dataName)\n                .removeClass('button-longrunning-active');\n            if ($self.data('clicked-text')) {\n                $replacementElem.text($self.data('original-text'));\n            }\n        };\n        // If client-side validation is active on this form, and is going to block submission of the\n        // form, don't activate the spinner\n        var form = $self.closest('form').get(0);\n        if (form &&\n            form.checkValidity &&\n            !form.noValidate &&\n            !form.checkValidity()) {\n            return;\n        }\n        // Disabling a button prevents it submitting the form, so disabling\n        // must occur on a brief timeout only after this function returns.\n        var timeout = setTimeout(function () {\n            if (!$self.data(dataName)) {\n                // Button re-enables after a timeout to prevent button becoming\n                // permanently un-usable\n                $self.data(dataName, setTimeout(function () {\n                    clearTimeout($self.data(dataName));\n                    // eslint-disable-next-line no-undef\n                    cancelSpinner();\n                }, reEnableAfter * 1000));\n                if ($self.data('clicked-text') && $replacementElem.length) {\n                    // Save current button text\n                    $self.data('original-text', $replacementElem.text());\n                    $replacementElem.text($self.data('clicked-text'));\n                }\n                // Disabling button must be done last: disabled buttons can't be\n                // modified in the normal way, it would seem.\n                $self.addClass('button-longrunning-active').prop('disabled', 'true');\n            }\n            clearTimeout(timeout);\n        }, 10);\n    });\n});\n// =============================================================================\n// Wagtail global module, mainly useful for debugging.\n// =============================================================================\n// =============================================================================\n// Inline dropdown module\n// =============================================================================\nvar wagtail = window.wagtail || {};\nif (!wagtail.ui) {\n    wagtail.ui = {};\n}\n// Constants\nvar DROPDOWN_SELECTOR = '[data-dropdown]';\nvar LISTING_TITLE_SELECTOR = '[data-listing-page-title]';\nvar LISTING_ACTIVE_CLASS = 'listing__item--active';\nvar ICON_DOWN = 'icon-arrow-down';\nvar ICON_UP = 'icon-arrow-up';\nvar IS_OPEN = 'is-open';\nvar clickEvent = 'click';\nvar TOGGLE_SELECTOR = '[data-dropdown-toggle]';\nvar ARIA = 'aria-hidden';\nvar keys = {\n    ESC: 27,\n    ENTER: 13,\n    SPACE: 32\n};\n/**\n * Singleton controller and registry for DropDown components.\n *\n * Mostly used to maintain open/closed state of components and easily\n * toggle them when the focus changes.\n */\nvar DropDownController = {\n    dropDowns: [],\n    closeAllExcept: function (dropDown) {\n        var index = this.dropDowns.indexOf(dropDown);\n        this.dropDowns.forEach(function (item, i) {\n            if (i !== index && item.state.isOpen) {\n                item.closeDropDown();\n            }\n        });\n    },\n    add: function (dropDown) {\n        this.dropDowns.push(dropDown);\n    },\n    get: function () {\n        return this.dropDowns;\n    },\n    getByIndex: function (index) {\n        return this.dropDowns[index];\n    },\n    getOpenDropDown: function () {\n        var needle = null;\n        this.dropDowns.forEach(function (item) {\n            if (item.state.isOpen) {\n                needle = item;\n            }\n        });\n        return needle;\n    }\n};\n/**\n * DropDown component\n *\n * Template: _button_with_dropdown.html\n *\n * Can contain a list of links\n * Controllable via a toggle class or the keyboard.\n */\nfunction DropDown(el, registry) {\n    if (!el || !registry) {\n        if ('error' in console) {\n            // eslint-disable-next-line no-console\n            console.error('A dropdown was created without an element or the DropDownController.\\nMake sure to pass both to your component.');\n            return;\n        }\n    }\n    this.el = el;\n    this.$parent = (0, jquery_1[\"default\"])(el).parents(LISTING_TITLE_SELECTOR);\n    this.state = {\n        isOpen: false\n    };\n    this.registry = registry;\n    this.clickOutsideDropDown = this.clickOutsideDropDown.bind(this);\n    this.closeDropDown = this.closeDropDown.bind(this);\n    this.openDropDown = this.openDropDown.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleKeyEvent = this.handleKeyEvent.bind(this);\n    el.addEventListener(clickEvent, this.handleClick);\n    el.addEventListener('keydown', this.handleKeyEvent);\n    this.$parent.data('close', this.closeDropDown);\n}\nDropDown.prototype = {\n    handleKeyEvent: function (e) {\n        var validTriggers = [keys.SPACE, keys.ENTER];\n        if (validTriggers.indexOf(e.which) > -1) {\n            e.preventDefault();\n            this.handleClick(e);\n        }\n    },\n    handleClick: function (e) {\n        if (!this.state.isOpen) {\n            this.openDropDown(e);\n        }\n        else {\n            this.closeDropDown(e);\n        }\n    },\n    openDropDown: function (e) {\n        e.stopPropagation();\n        e.preventDefault();\n        var el = this.el;\n        var $parent = this.$parent;\n        var toggle = el.querySelector(TOGGLE_SELECTOR);\n        this.state.isOpen = true;\n        this.registry.closeAllExcept(this);\n        el.classList.add(IS_OPEN);\n        el.setAttribute(ARIA, false);\n        toggle.classList.remove(ICON_DOWN);\n        toggle.classList.add(ICON_UP);\n        document.addEventListener(clickEvent, this.clickOutsideDropDown, false);\n        $parent.addClass(LISTING_ACTIVE_CLASS);\n    },\n    closeDropDown: function () {\n        this.state.isOpen = false;\n        var el = this.el;\n        var $parent = this.$parent;\n        var toggle = el.querySelector(TOGGLE_SELECTOR);\n        document.removeEventListener(clickEvent, this.clickOutsideDropDown, false);\n        el.classList.remove(IS_OPEN);\n        toggle.classList.add(ICON_DOWN);\n        toggle.classList.remove(ICON_UP);\n        el.setAttribute(ARIA, true);\n        $parent.removeClass(LISTING_ACTIVE_CLASS);\n    },\n    clickOutsideDropDown: function (e) {\n        var el = this.el;\n        var relTarget = e.relatedTarget || e.toElement;\n        if (!(0, jquery_1[\"default\"])(relTarget).parents().is(el)) {\n            this.closeDropDown();\n        }\n    }\n};\nfunction initDropDown() {\n    var dropDown = new DropDown(this, DropDownController);\n    DropDownController.add(dropDown);\n}\nfunction handleKeyPress(e) {\n    if (e.which === keys.ESC) {\n        var open_1 = DropDownController.getOpenDropDown();\n        if (open_1) {\n            open_1.closeDropDown();\n        }\n    }\n}\nfunction initDropDowns() {\n    (0, jquery_1[\"default\"])(DROPDOWN_SELECTOR).each(initDropDown);\n    (0, jquery_1[\"default\"])(document).on('keydown', handleKeyPress);\n}\n(0, jquery_1[\"default\"])(document).ready(initDropDowns);\nwagtail.ui.initDropDowns = initDropDowns;\nwagtail.ui.DropDownController = DropDownController;\n(0, jquery_1[\"default\"])(document).ready(initButtonSelects_1.initButtonSelects);\nwindow.wagtail = wagtail;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2VudHJ5cG9pbnRzL2FkbWluL2NvcmUuanMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2VudHJ5cG9pbnRzL2FkbWluL2NvcmUuanM/MGRjMCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3ZhbHVlcyA9ICh0aGlzICYmIHRoaXMuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIganF1ZXJ5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImpxdWVyeVwiKSk7XG52YXIgdGV4dF8xID0gcmVxdWlyZShcIi4uLy4uL3V0aWxzL3RleHRcIik7XG52YXIgaW5pdEJ1dHRvblNlbGVjdHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9pbmNsdWRlcy9pbml0QnV0dG9uU2VsZWN0c1wiKTtcbnZhciBpbml0VGFnRmllbGRfMSA9IHJlcXVpcmUoXCIuLi8uLi9pbmNsdWRlcy9pbml0VGFnRmllbGRcIik7XG52YXIgaW5pdFRvb2x0aXBzXzEgPSByZXF1aXJlKFwiLi4vLi4vaW5jbHVkZXMvaW5pdFRvb2x0aXBzXCIpO1xuLyogZ2VuZXJpYyBmdW5jdGlvbiBmb3IgYWRkaW5nIGEgbWVzc2FnZSB0byBtZXNzYWdlIGFyZWEgdGhyb3VnaCBKUyBhbG9uZSAqL1xuZnVuY3Rpb24gYWRkTWVzc2FnZShzdGF0dXMsIHRleHQpIHtcbiAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKSgnLm1lc3NhZ2VzJylcbiAgICAgICAgLmFkZENsYXNzKCduZXcnKVxuICAgICAgICAuZW1wdHkoKVxuICAgICAgICAuYXBwZW5kKCc8dWw+PGxpIGNsYXNzPVwiJyArIHN0YXR1cyArICdcIj4nICsgdGV4dCArICc8L2xpPjwvdWw+Jyk7XG4gICAgdmFyIGFkZE1zZ1RpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoJy5tZXNzYWdlcycpLmFkZENsYXNzKCdhcHBlYXInKTtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGFkZE1zZ1RpbWVvdXQpO1xuICAgIH0sIDEwMCk7XG59XG53aW5kb3cuYWRkTWVzc2FnZSA9IGFkZE1lc3NhZ2U7XG53aW5kb3cuZXNjYXBlSHRtbCA9IHRleHRfMS5lc2NhcGVIdG1sO1xud2luZG93LmluaXRUYWdGaWVsZCA9IGluaXRUYWdGaWVsZF8xLmluaXRUYWdGaWVsZDtcbi8qXG4gKiBFbmFibGVzIGEgXCJkaXJ0eSBmb3JtIGNoZWNrXCIsIHByb21wdGluZyB0aGUgdXNlciBpZiB0aGV5IGFyZSBuYXZpZ2F0aW5nIGF3YXlcbiAqIGZyb20gYSBwYWdlIHdpdGggdW5zYXZlZCBjaGFuZ2VzLCBhcyB3ZWxsIGFzIG9wdGlvbmFsbHkgY29udHJvbGxpbmcgb3RoZXJcbiAqIGJlaGF2aW91ciB2aWEgYSBjYWxsYmFja1xuICpcbiAqIEl0IHRha2VzIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAqXG4gKiAgLSBmb3JtU2VsZWN0b3IgLSBBIENTUyBzZWxlY3RvciB0byBzZWxlY3QgdGhlIGZvcm0gdG8gYXBwbHkgdGhpcyBjaGVjayB0by5cbiAqXG4gKiAgLSBvcHRpb25zIC0gQW4gb2JqZWN0IGZvciBwYXNzaW5nIGluIG9wdGlvbnMuIFBvc3NpYmxlIG9wdGlvbnMgYXJlOlxuICogIC0gY29uZmlybWF0aW9uTWVzc2FnZSAtIFRoZSBtZXNzYWdlIHRvIGRpc3BsYXkgaW4gdGhlIHByb21wdC5cbiAqICAtIGFsd2F5c0RpcnR5IC0gV2hlbiBzZXQgdG8gdHJ1ZSB0aGUgZm9ybSB3aWxsIGFsd2F5cyBiZSBjb25zaWRlcmVkIGRpcnR5LFxuICogICAgcHJvbXB0aW5nIHRoZSB1c2VyIGV2ZW4gd2hlbiBub3RoaW5nIGhhcyBiZWVuIGNoYW5nZWQuXG4gKiAgLSBjb21tZW50QXBwIC0gVGhlIENvbW1lbnRBcHAgdXNlZCBieSB0aGUgY29tbWVudGluZyBzeXN0ZW0sIGlmIHRoZSBkaXJ0eSBjaGVja1xuICogICAgc2hvdWxkIGluY2x1ZGUgY29tbWVudHNcbiAqICAtIGNhbGxiYWNrIC0gQSBmdW5jdGlvbiB0byBiZSBydW4gd2hlbiB0aGUgZGlydHkgc3RhdHVzIG9mIHRoZSBmb3JtLCBvciB0aGUgY29tbWVudHNcbiAqICAgIHN5c3RlbSAoaWYgdXNpbmcpIGNoYW5nZXMsIHRha2luZyBmb3JtRGlydHksIGNvbW1lbnRzRGlydHkgYXMgYXJndW1lbnRzXG4gKi9cbmZ1bmN0aW9uIGVuYWJsZURpcnR5Rm9ybUNoZWNrKGZvcm1TZWxlY3Rvciwgb3B0aW9ucykge1xuICAgIHZhciAkZm9ybSA9ICgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKGZvcm1TZWxlY3Rvcik7XG4gICAgdmFyIGNvbmZpcm1hdGlvbk1lc3NhZ2UgPSBvcHRpb25zLmNvbmZpcm1hdGlvbk1lc3NhZ2UgfHwgJyAnO1xuICAgIHZhciBhbHdheXNEaXJ0eSA9IG9wdGlvbnMuYWx3YXlzRGlydHkgfHwgZmFsc2U7XG4gICAgdmFyIGNvbW1lbnRBcHAgPSBvcHRpb25zLmNvbW1lbnRBcHAgfHwgbnVsbDtcbiAgICB2YXIgY2FsbGJhY2sgPSBvcHRpb25zLmNhbGxiYWNrIHx8IG51bGw7XG4gICAgdmFyIGluaXRpYWxEYXRhID0gbnVsbDtcbiAgICB2YXIgZm9ybVN1Ym1pdHRlZCA9IGZhbHNlO1xuICAgIHZhciB1cGRhdGVDYWxsYmFjayA9IGZ1bmN0aW9uIChmb3JtRGlydHksIGNvbW1lbnRzRGlydHkpIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgICAgICBjYWxsYmFjayhmb3JtRGlydHksIGNvbW1lbnRzRGlydHkpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAkZm9ybS5vbignc3VibWl0JywgZnVuY3Rpb24gKCkge1xuICAgICAgICBmb3JtU3VibWl0dGVkID0gdHJ1ZTtcbiAgICB9KTtcbiAgICB2YXIgaXNEaXJ0eSA9IGFsd2F5c0RpcnR5O1xuICAgIHZhciBpc0NvbW1lbnRzRGlydHkgPSBmYWxzZTtcbiAgICB2YXIgdXBkYXRlSXNDb21tZW50c0RpcnR5VGltZW91dCA9IC0xO1xuICAgIGlmIChjb21tZW50QXBwKSB7XG4gICAgICAgIGlzQ29tbWVudHNEaXJ0eSA9IGNvbW1lbnRBcHAuc2VsZWN0b3JzLnNlbGVjdElzRGlydHkoY29tbWVudEFwcC5zdG9yZS5nZXRTdGF0ZSgpKTtcbiAgICAgICAgY29tbWVudEFwcC5zdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gVXBkYXRlIG9uIGEgdGltZW91dCB0byBtYXRjaCB0aGUgdGltaW5ncyBmb3IgcmVzcG9uZGluZyB0byBwYWdlIGZvcm0gY2hhbmdlc1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHVwZGF0ZUlzQ29tbWVudHNEaXJ0eVRpbWVvdXQpO1xuICAgICAgICAgICAgdXBkYXRlSXNDb21tZW50c0RpcnR5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBuZXdJc0NvbW1lbnRzRGlydHkgPSBjb21tZW50QXBwLnNlbGVjdG9ycy5zZWxlY3RJc0RpcnR5KGNvbW1lbnRBcHAuc3RvcmUuZ2V0U3RhdGUoKSk7XG4gICAgICAgICAgICAgICAgaWYgKG5ld0lzQ29tbWVudHNEaXJ0eSAhPT0gaXNDb21tZW50c0RpcnR5KSB7XG4gICAgICAgICAgICAgICAgICAgIGlzQ29tbWVudHNEaXJ0eSA9IG5ld0lzQ29tbWVudHNEaXJ0eTtcbiAgICAgICAgICAgICAgICAgICAgdXBkYXRlQ2FsbGJhY2soaXNEaXJ0eSwgaXNDb21tZW50c0RpcnR5KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBpc0NvbW1lbnRzRGlydHkgPyAzMDAwIDogMzAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHVwZGF0ZUNhbGxiYWNrKGlzRGlydHksIGlzQ29tbWVudHNEaXJ0eSk7XG4gICAgdmFyIHVwZGF0ZUlzRGlydHlUaW1lb3V0ID0gLTE7XG4gICAgdmFyIGlzRm9ybURpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoYWx3YXlzRGlydHkpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKCFpbml0aWFsRGF0YSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkZm9ybVswXSk7XG4gICAgICAgIHZhciBrZXlzID0gQXJyYXkuZnJvbShmb3JtRGF0YS5rZXlzKCkpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7IHJldHVybiAha2V5LnN0YXJ0c1dpdGgoJ2NvbW1lbnRzLScpOyB9KTtcbiAgICAgICAgaWYgKGtleXMubGVuZ3RoICE9PSBpbml0aWFsRGF0YS5zaXplKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ga2V5cy5zb21lKGZ1bmN0aW9uIChrZXkpIHtcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZSA9IGZvcm1EYXRhLmdldEFsbChrZXkpO1xuICAgICAgICAgICAgdmFyIG9sZFZhbHVlID0gaW5pdGlhbERhdGEuZ2V0KGtleSk7XG4gICAgICAgICAgICBpZiAobmV3VmFsdWUgPT09IG9sZFZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoQXJyYXkuaXNBcnJheShuZXdWYWx1ZSkgJiYgQXJyYXkuaXNBcnJheShvbGRWYWx1ZSkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gKG5ld1ZhbHVlLmxlbmd0aCAhPT0gb2xkVmFsdWUubGVuZ3RoIHx8XG4gICAgICAgICAgICAgICAgICAgIG5ld1ZhbHVlLnNvbWUoZnVuY3Rpb24gKHZhbHVlLCBpbmRleCkgeyByZXR1cm4gdmFsdWUgIT09IG9sZFZhbHVlW2luZGV4XTsgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHZhciB1cGRhdGVJc0RpcnR5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcHJldmlvdXNJc0RpcnR5ID0gaXNEaXJ0eTtcbiAgICAgICAgaXNEaXJ0eSA9IGlzRm9ybURpcnR5KCk7XG4gICAgICAgIGlmIChwcmV2aW91c0lzRGlydHkgIT09IGlzRGlydHkpIHtcbiAgICAgICAgICAgIHVwZGF0ZUNhbGxiYWNrKGlzRGlydHksIGlzQ29tbWVudHNEaXJ0eSk7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIC8vIERlbGF5IHNuYXBzaG90dGluZyB0aGUgZm9ybeKAmXMgZGF0YSB0byBhdm9pZCByYWNlIGNvbmRpdGlvbnMgd2l0aCBmb3JtIHdpZGdldHMgdGhhdCBtaWdodCBwcm9jZXNzIHRoZSB2YWx1ZXMuXG4gICAgLy8gVXNlciBpbnRlcmFjdGlvbiB3aXRoIHRoZSBmb3JtIHdpdGhpbiB0aGF0IGRlbGF5IGFsc28gd29u4oCZdCB0cmlnZ2VyIHRoZSBjb25maXJtYXRpb24gbWVzc2FnZS5cbiAgICBpZiAoIWFsd2F5c0RpcnR5KSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluaXRpYWxGb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkZm9ybVswXSk7XG4gICAgICAgICAgICBpbml0aWFsRGF0YSA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIEFycmF5LmZyb20oaW5pdGlhbEZvcm1EYXRhLmtleXMoKSlcbiAgICAgICAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHsgcmV0dXJuICFrZXkuc3RhcnRzV2l0aCgnY29tbWVudHMtJyk7IH0pXG4gICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGtleSkgeyByZXR1cm4gaW5pdGlhbERhdGEuc2V0KGtleSwgaW5pdGlhbEZvcm1EYXRhLmdldEFsbChrZXkpKTsgfSk7XG4gICAgICAgICAgICB2YXIgdXBkYXRlRGlydHlDaGVjayA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodXBkYXRlSXNEaXJ0eVRpbWVvdXQpO1xuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBmb3JtIGlzIGRpcnR5LCBpdCBpcyByZWxhdGl2ZWx5IHVubGlrZWx5IHRvIGJlY29tZSBjbGVhbiBhZ2Fpbiwgc29cbiAgICAgICAgICAgICAgICAvLyBydW4gdGhlIGRpcnR5IGNoZWNrIG9uIGEgcmVsYXRpdmVseSBsb25nIHRpbWVyIHRoYXQgd2UgcmVzZXQgb24gYW55IGZvcm0gdXBkYXRlXG4gICAgICAgICAgICAgICAgLy8gb3RoZXJ3aXNlLCB1c2UgYSBzaG9ydCB0aW1lciBib3RoIGZvciBuaWNlciBVWCBhbmQgdG8gZW5zdXJlIHdpZGdldHNcbiAgICAgICAgICAgICAgICAvLyBsaWtlIERyYWZ0YWlsIGhhdmUgdGltZSB0byBzZXJpYWxpemUgdGhlaXIgZGF0YVxuICAgICAgICAgICAgICAgIHVwZGF0ZUlzRGlydHlUaW1lb3V0ID0gc2V0VGltZW91dCh1cGRhdGVJc0RpcnR5LCBpc0RpcnR5ID8gMzAwMCA6IDMwMCk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgJGZvcm0ub24oJ2NoYW5nZSBrZXl1cCcsIHVwZGF0ZURpcnR5Q2hlY2spLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgdmFyIHZhbGlkSW5wdXROb2RlSW5MaXN0ID0gZnVuY3Rpb24gKG5vZGVMaXN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGVfMSwgX2E7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgbm9kZUxpc3RfMSA9IF9fdmFsdWVzKG5vZGVMaXN0KSwgbm9kZUxpc3RfMV8xID0gbm9kZUxpc3RfMS5uZXh0KCk7ICFub2RlTGlzdF8xXzEuZG9uZTsgbm9kZUxpc3RfMV8xID0gbm9kZUxpc3RfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub2RlID0gbm9kZUxpc3RfMV8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG5vZGUubm9kZVR5cGUgPT09IG5vZGUuRUxFTUVOVF9OT0RFICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgWydJTlBVVCcsICdURVhUQVJFQScsICdTRUxFQ1QnXS5pbmNsdWRlcyhub2RlLnRhZ05hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChub2RlTGlzdF8xXzEgJiYgIW5vZGVMaXN0XzFfMS5kb25lICYmIChfYSA9IG5vZGVMaXN0XzFbXCJyZXR1cm5cIl0pKSBfYS5jYWxsKG5vZGVMaXN0XzEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uIChtdXRhdGlvbkxpc3QpIHtcbiAgICAgICAgICAgICAgICB2YXIgZV8yLCBfYTtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtdXRhdGlvbkxpc3RfMSA9IF9fdmFsdWVzKG11dGF0aW9uTGlzdCksIG11dGF0aW9uTGlzdF8xXzEgPSBtdXRhdGlvbkxpc3RfMS5uZXh0KCk7ICFtdXRhdGlvbkxpc3RfMV8xLmRvbmU7IG11dGF0aW9uTGlzdF8xXzEgPSBtdXRhdGlvbkxpc3RfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtdXRhdGlvbiA9IG11dGF0aW9uTGlzdF8xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFsaWRJbnB1dE5vZGVJbkxpc3QobXV0YXRpb24uYWRkZWROb2RlcykgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWxpZElucHV0Tm9kZUluTGlzdChtdXRhdGlvbi5yZW1vdmVkTm9kZXMpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlRGlydHlDaGVjaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG11dGF0aW9uTGlzdF8xXzEgJiYgIW11dGF0aW9uTGlzdF8xXzEuZG9uZSAmJiAoX2EgPSBtdXRhdGlvbkxpc3RfMVtcInJldHVyblwiXSkpIF9hLmNhbGwobXV0YXRpb25MaXN0XzEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIG9ic2VydmVyLm9ic2VydmUoJGZvcm1bMF0sIHtcbiAgICAgICAgICAgICAgICBjaGlsZExpc3Q6IHRydWUsXG4gICAgICAgICAgICAgICAgYXR0cmlidXRlczogZmFsc2UsXG4gICAgICAgICAgICAgICAgc3VidHJlZTogdHJ1ZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0sIDEwMDAgKiAxMCk7XG4gICAgfVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjb25zaXN0ZW50LXJldHVyblxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdiZWZvcmV1bmxvYWQnLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHVwZGF0ZUlzRGlydHlUaW1lb3V0KTtcbiAgICAgICAgdXBkYXRlSXNEaXJ0eSgpO1xuICAgICAgICB2YXIgZGlzcGxheUNvbmZpcm1hdGlvbiA9ICFmb3JtU3VibWl0dGVkICYmIChpc0RpcnR5IHx8IGlzQ29tbWVudHNEaXJ0eSk7XG4gICAgICAgIGlmIChkaXNwbGF5Q29uZmlybWF0aW9uKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tcGFyYW0tcmVhc3NpZ25cbiAgICAgICAgICAgIGV2ZW50LnJldHVyblZhbHVlID0gY29uZmlybWF0aW9uTWVzc2FnZTtcbiAgICAgICAgICAgIHJldHVybiBjb25maXJtYXRpb25NZXNzYWdlO1xuICAgICAgICB9XG4gICAgfSk7XG59XG53aW5kb3cuZW5hYmxlRGlydHlGb3JtQ2hlY2sgPSBlbmFibGVEaXJ0eUZvcm1DaGVjaztcbigwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGJvZHkgZnJvbSB3aGljaCB0cmFuc2l0aW9ucyBtYXkgYmUgaHVuZyBzbyB0aGV5IGRvbid0IGFwcGVhciB0byB0cmFuc2l0aW9uIGFzIHRoZSBwYWdlIGxvYWRzXG4gICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoJ2JvZHknKS5hZGRDbGFzcygncmVhZHknKTtcbiAgICAvKiBGdW5jdGlvbnMgdGhhdCBuZWVkIHRvIHJ1bi9yZXJ1biB3aGVuIGFjdGl2ZSB0YWJzIGFyZSBjaGFuZ2VkICovXG4gICAgZnVuY3Rpb24gcmVzaXplVGV4dEFyZWFzKCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZnVuYy1uYW1lc1xuICAgICAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKSgndGV4dGFyZWFbZGF0YS1hdXRvc2l6ZS1vbl0nKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAgICAgYXV0b3NpemUudXBkYXRlKCgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKHRoaXMpLmdldCgpKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIC8vIFJlc2l6ZSB0ZXh0YXJlYXMgb24gcGFnZSBsb2FkIGFuZCB3aGVuIHRhYiBjaGFuZ2VkXG4gICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoZG9jdW1lbnQpLnJlYWR5KHJlc2l6ZVRleHRBcmVhcyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignd2FndGFpbDp0YWItY2hhbmdlZCcsIHJlc2l6ZVRleHRBcmVhcyk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKSgnLmRyb3Bkb3duJykuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkZHJvcGRvd24gPSAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKSh0aGlzKTtcbiAgICAgICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoJy5kcm9wZG93bi10b2dnbGUnLCAkZHJvcGRvd24pLm9uKCdjbGljaycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgJGRyb3Bkb3duLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICBpZiAoJGRyb3Bkb3duLmhhc0NsYXNzKCdvcGVuJykpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBhIGRyb3Bkb3duIGlzIG9wZW5lZCwgYWRkIGFuIGV2ZW50IGxpc3RlbmVyIGZvciBkb2N1bWVudCBjbGlja3MgdG8gY2xvc2UgaXRcbiAgICAgICAgICAgICAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkub24oJ2NsaWNrLmRyb3Bkb3duLmNhbmNlbCcsIGZ1bmN0aW9uIChlMikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVsVGFyZyA9IGUyLnJlbGF0ZWRUYXJnZXQgfHwgZTIudG9FbGVtZW50O1xuICAgICAgICAgICAgICAgICAgICAvLyBPbmx5IGNsb3NlIGRyb3Bkb3duIGlmIHRoZSBjbGljayB0YXJnZXQgd2Fzbid0IGEgY2hpbGQgb2YgdGhpcyBkcm9wZG93blxuICAgICAgICAgICAgICAgICAgICBpZiAoISgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKHJlbFRhcmcpLnBhcmVudHMoKS5pcygkZHJvcGRvd24pKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZHJvcGRvd24ucmVtb3ZlQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKGRvY3VtZW50KS5vZmYoJ2NsaWNrLmRyb3Bkb3duLmNhbmNlbCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkub2ZmKCdjbGljay5kcm9wZG93bi5jYW5jZWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgLyogRHJvcHpvbmVzICovXG4gICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoJy5kcm9wLXpvbmUnKVxuICAgICAgICAub24oJ2RyYWdvdmVyJywgZnVuY3Rpb24gb25EcmFnT3ZlcigpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkodGhpcykuYWRkQ2xhc3MoJ2hvdmVyZWQnKTtcbiAgICB9KVxuICAgICAgICAub24oJ2RyYWdsZWF2ZSBkcmFnZW5kIGRyb3AnLCBmdW5jdGlvbiBvbkRyYWdMZWF2ZSgpIHtcbiAgICAgICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkodGhpcykucmVtb3ZlQ2xhc3MoJ2hvdmVyZWQnKTtcbiAgICB9KTtcbiAgICAvKiBIZWFkZXIgc2VhcmNoIGJlaGF2aW91ciAqL1xuICAgIGlmICh3aW5kb3cuaGVhZGVyU2VhcmNoKSB7XG4gICAgICAgIHZhciBzZWFyY2hDdXJyZW50SW5kZXhfMSA9IDA7XG4gICAgICAgIHZhciBzZWFyY2hOZXh0SW5kZXhfMSA9IDA7XG4gICAgICAgIHZhciAkaW5wdXRfMSA9ICgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKHdpbmRvdy5oZWFkZXJTZWFyY2gudGVybUlucHV0KTtcbiAgICAgICAgdmFyICRpbnB1dENvbnRhaW5lciA9ICRpbnB1dF8xLnBhcmVudCgpO1xuICAgICAgICB2YXIgJGljb25fMSA9ICRpbnB1dENvbnRhaW5lci5maW5kKCd1c2UnKTtcbiAgICAgICAgdmFyIGJhc2VJY29uXzEgPSAkaWNvbl8xLmF0dHIoJ2hyZWYnKTtcbiAgICAgICAgJGlucHV0XzEub24oJ2tleXVwIGN1dCBwYXN0ZSBjaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoJGlucHV0XzEuZGF0YSgndGltZXInKSk7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVzZS1iZWZvcmUtZGVmaW5lXG4gICAgICAgICAgICAkaW5wdXRfMS5kYXRhKCd0aW1lcicsIHNldFRpbWVvdXQoc2VhcmNoXzEsIDIwMCkpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gYXV0byBmb2N1cyBvbiBzZWFyY2ggYm94XG4gICAgICAgICRpbnB1dF8xLnRyaWdnZXIoJ2ZvY3VzJyk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICAgIHZhciBzZWFyY2hfMSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBuZXdRdWVyeSA9ICRpbnB1dF8xLnZhbCgpO1xuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby11c2UtYmVmb3JlLWRlZmluZVxuICAgICAgICAgICAgdmFyIGN1cnJlbnRRdWVyeSA9IGdldFVSTFBhcmFtXzEoJ3EnKTtcbiAgICAgICAgICAgIC8vIG9ubHkgZG8gdGhlIHF1ZXJ5IGlmIGl0IGhhcyBjaGFuZ2VkIGZvciB0cmltbWVkIHF1ZXJpZXNcbiAgICAgICAgICAgIC8vIGZvciBleGFtcGxlIC0gXCIgXCIgPT09IFwiXCIgYW5kIFwiZmlyc3R3b3JkIFwiID09PT0gXCJmaXJzdHdvcmRcIlxuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWVyeS50cmltKCkgIT09IG5ld1F1ZXJ5LnRyaW0oKSkge1xuICAgICAgICAgICAgICAgICRpY29uXzEuYXR0cignaHJlZicsICcjaWNvbi1zcGlubmVyJyk7XG4gICAgICAgICAgICAgICAgc2VhcmNoTmV4dEluZGV4XzEgKz0gMTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXhfMSA9IHNlYXJjaE5leHRJbmRleF8xO1xuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBxLCByZXNldCB0byBmaXJzdCBwYWdlLCBhbmQga2VlcCBvdGhlciBxdWVyeSBwYXJhbXNcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICAgICAgICBzZWFyY2hQYXJhbXMuc2V0KCdxJywgbmV3UXVlcnkpO1xuICAgICAgICAgICAgICAgIHNlYXJjaFBhcmFtc1tcImRlbGV0ZVwiXSgncCcpO1xuICAgICAgICAgICAgICAgIHZhciBxdWVyeVN0cmluZ18xID0gc2VhcmNoUGFyYW1zLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICAgICAganF1ZXJ5XzFbXCJkZWZhdWx0XCJdLmFqYXgoe1xuICAgICAgICAgICAgICAgICAgICB1cmw6IHdpbmRvdy5oZWFkZXJTZWFyY2gudXJsLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBxdWVyeVN0cmluZ18xLFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4XzEgPiBzZWFyY2hDdXJyZW50SW5kZXhfMSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlYXJjaEN1cnJlbnRJbmRleF8xID0gaW5kZXhfMTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKSh3aW5kb3cuaGVhZGVyU2VhcmNoLnRhcmdldE91dHB1dCkuaHRtbChkYXRhKS5zbGlkZURvd24oODAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgbnVsbCwgJz8nICsgcXVlcnlTdHJpbmdfMSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGlucHV0XzFbMF0uZGlzcGF0Y2hFdmVudChuZXcgRXZlbnQoJ3NlYXJjaC1zdWNjZXNzJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LndhZ3RhaWwudWkuaW5pdERyb3BEb3ducygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVpbml0aWFsaXNlIGFueSB0b29sdGlwc1xuICAgICAgICAgICAgICAgICAgICAgICAgKDAsIGluaXRUb29sdGlwc18xLmluaXRUb29sdGlwcykoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpY29uXzEuYXR0cignaHJlZicsIGJhc2VJY29uXzEpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICAgIHZhciBnZXRVUkxQYXJhbV8xID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgICAgICAgIHZhciByZXN1bHRzID0gbmV3IFJlZ0V4cCgnW1xcXFw/Jl0nICsgbmFtZSArICc9KFteXSopJykuZXhlYyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHNbMV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qIERlYm91bmNlIHN1Ym1pc3Npb24gb2YgbG9uZy1ydW5uaW5nIGZvcm1zIGFuZCBhZGQgc3Bpbm5lciB0byBnaXZlIHNlbnNlIG9mIGFjdGl2aXR5ICovXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGZ1bmMtbmFtZXNcbiAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkub24oJ2NsaWNrJywgJ2J1dHRvbi5idXR0b24tbG9uZ3J1bm5pbmcnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciAkc2VsZiA9ICgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKHRoaXMpO1xuICAgICAgICB2YXIgJHJlcGxhY2VtZW50RWxlbSA9ICgwLCBqcXVlcnlfMVtcImRlZmF1bHRcIl0pKCdlbScsICRzZWxmKTtcbiAgICAgICAgdmFyIHJlRW5hYmxlQWZ0ZXIgPSAzMDtcbiAgICAgICAgdmFyIGRhdGFOYW1lID0gJ2Rpc2FibGVkdGltZW91dCc7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBmdW5jLW5hbWVzXG4gICAgICAgIHdpbmRvdy5jYW5jZWxTcGlubmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJHNlbGZcbiAgICAgICAgICAgICAgICAucHJvcCgnZGlzYWJsZWQnLCAnJylcbiAgICAgICAgICAgICAgICAucmVtb3ZlRGF0YShkYXRhTmFtZSlcbiAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2J1dHRvbi1sb25ncnVubmluZy1hY3RpdmUnKTtcbiAgICAgICAgICAgIGlmICgkc2VsZi5kYXRhKCdjbGlja2VkLXRleHQnKSkge1xuICAgICAgICAgICAgICAgICRyZXBsYWNlbWVudEVsZW0udGV4dCgkc2VsZi5kYXRhKCdvcmlnaW5hbC10ZXh0JykpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBJZiBjbGllbnQtc2lkZSB2YWxpZGF0aW9uIGlzIGFjdGl2ZSBvbiB0aGlzIGZvcm0sIGFuZCBpcyBnb2luZyB0byBibG9jayBzdWJtaXNzaW9uIG9mIHRoZVxuICAgICAgICAvLyBmb3JtLCBkb24ndCBhY3RpdmF0ZSB0aGUgc3Bpbm5lclxuICAgICAgICB2YXIgZm9ybSA9ICRzZWxmLmNsb3Nlc3QoJ2Zvcm0nKS5nZXQoMCk7XG4gICAgICAgIGlmIChmb3JtICYmXG4gICAgICAgICAgICBmb3JtLmNoZWNrVmFsaWRpdHkgJiZcbiAgICAgICAgICAgICFmb3JtLm5vVmFsaWRhdGUgJiZcbiAgICAgICAgICAgICFmb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIC8vIERpc2FibGluZyBhIGJ1dHRvbiBwcmV2ZW50cyBpdCBzdWJtaXR0aW5nIHRoZSBmb3JtLCBzbyBkaXNhYmxpbmdcbiAgICAgICAgLy8gbXVzdCBvY2N1ciBvbiBhIGJyaWVmIHRpbWVvdXQgb25seSBhZnRlciB0aGlzIGZ1bmN0aW9uIHJldHVybnMuXG4gICAgICAgIHZhciB0aW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoISRzZWxmLmRhdGEoZGF0YU5hbWUpKSB7XG4gICAgICAgICAgICAgICAgLy8gQnV0dG9uIHJlLWVuYWJsZXMgYWZ0ZXIgYSB0aW1lb3V0IHRvIHByZXZlbnQgYnV0dG9uIGJlY29taW5nXG4gICAgICAgICAgICAgICAgLy8gcGVybWFuZW50bHkgdW4tdXNhYmxlXG4gICAgICAgICAgICAgICAgJHNlbGYuZGF0YShkYXRhTmFtZSwgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCgkc2VsZi5kYXRhKGRhdGFOYW1lKSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bmRlZlxuICAgICAgICAgICAgICAgICAgICBjYW5jZWxTcGlubmVyKCk7XG4gICAgICAgICAgICAgICAgfSwgcmVFbmFibGVBZnRlciAqIDEwMDApKTtcbiAgICAgICAgICAgICAgICBpZiAoJHNlbGYuZGF0YSgnY2xpY2tlZC10ZXh0JykgJiYgJHJlcGxhY2VtZW50RWxlbS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gU2F2ZSBjdXJyZW50IGJ1dHRvbiB0ZXh0XG4gICAgICAgICAgICAgICAgICAgICRzZWxmLmRhdGEoJ29yaWdpbmFsLXRleHQnLCAkcmVwbGFjZW1lbnRFbGVtLnRleHQoKSk7XG4gICAgICAgICAgICAgICAgICAgICRyZXBsYWNlbWVudEVsZW0udGV4dCgkc2VsZi5kYXRhKCdjbGlja2VkLXRleHQnKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIERpc2FibGluZyBidXR0b24gbXVzdCBiZSBkb25lIGxhc3Q6IGRpc2FibGVkIGJ1dHRvbnMgY2FuJ3QgYmVcbiAgICAgICAgICAgICAgICAvLyBtb2RpZmllZCBpbiB0aGUgbm9ybWFsIHdheSwgaXQgd291bGQgc2VlbS5cbiAgICAgICAgICAgICAgICAkc2VsZi5hZGRDbGFzcygnYnV0dG9uLWxvbmdydW5uaW5nLWFjdGl2ZScpLnByb3AoJ2Rpc2FibGVkJywgJ3RydWUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgICAgfSwgMTApO1xuICAgIH0pO1xufSk7XG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gV2FndGFpbCBnbG9iYWwgbW9kdWxlLCBtYWlubHkgdXNlZnVsIGZvciBkZWJ1Z2dpbmcuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIElubGluZSBkcm9wZG93biBtb2R1bGVcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG52YXIgd2FndGFpbCA9IHdpbmRvdy53YWd0YWlsIHx8IHt9O1xuaWYgKCF3YWd0YWlsLnVpKSB7XG4gICAgd2FndGFpbC51aSA9IHt9O1xufVxuLy8gQ29uc3RhbnRzXG52YXIgRFJPUERPV05fU0VMRUNUT1IgPSAnW2RhdGEtZHJvcGRvd25dJztcbnZhciBMSVNUSU5HX1RJVExFX1NFTEVDVE9SID0gJ1tkYXRhLWxpc3RpbmctcGFnZS10aXRsZV0nO1xudmFyIExJU1RJTkdfQUNUSVZFX0NMQVNTID0gJ2xpc3RpbmdfX2l0ZW0tLWFjdGl2ZSc7XG52YXIgSUNPTl9ET1dOID0gJ2ljb24tYXJyb3ctZG93bic7XG52YXIgSUNPTl9VUCA9ICdpY29uLWFycm93LXVwJztcbnZhciBJU19PUEVOID0gJ2lzLW9wZW4nO1xudmFyIGNsaWNrRXZlbnQgPSAnY2xpY2snO1xudmFyIFRPR0dMRV9TRUxFQ1RPUiA9ICdbZGF0YS1kcm9wZG93bi10b2dnbGVdJztcbnZhciBBUklBID0gJ2FyaWEtaGlkZGVuJztcbnZhciBrZXlzID0ge1xuICAgIEVTQzogMjcsXG4gICAgRU5URVI6IDEzLFxuICAgIFNQQUNFOiAzMlxufTtcbi8qKlxuICogU2luZ2xldG9uIGNvbnRyb2xsZXIgYW5kIHJlZ2lzdHJ5IGZvciBEcm9wRG93biBjb21wb25lbnRzLlxuICpcbiAqIE1vc3RseSB1c2VkIHRvIG1haW50YWluIG9wZW4vY2xvc2VkIHN0YXRlIG9mIGNvbXBvbmVudHMgYW5kIGVhc2lseVxuICogdG9nZ2xlIHRoZW0gd2hlbiB0aGUgZm9jdXMgY2hhbmdlcy5cbiAqL1xudmFyIERyb3BEb3duQ29udHJvbGxlciA9IHtcbiAgICBkcm9wRG93bnM6IFtdLFxuICAgIGNsb3NlQWxsRXhjZXB0OiBmdW5jdGlvbiAoZHJvcERvd24pIHtcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5kcm9wRG93bnMuaW5kZXhPZihkcm9wRG93bik7XG4gICAgICAgIHRoaXMuZHJvcERvd25zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0sIGkpIHtcbiAgICAgICAgICAgIGlmIChpICE9PSBpbmRleCAmJiBpdGVtLnN0YXRlLmlzT3Blbikge1xuICAgICAgICAgICAgICAgIGl0ZW0uY2xvc2VEcm9wRG93bigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIGFkZDogZnVuY3Rpb24gKGRyb3BEb3duKSB7XG4gICAgICAgIHRoaXMuZHJvcERvd25zLnB1c2goZHJvcERvd24pO1xuICAgIH0sXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRyb3BEb3ducztcbiAgICB9LFxuICAgIGdldEJ5SW5kZXg6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kcm9wRG93bnNbaW5kZXhdO1xuICAgIH0sXG4gICAgZ2V0T3BlbkRyb3BEb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBuZWVkbGUgPSBudWxsO1xuICAgICAgICB0aGlzLmRyb3BEb3ducy5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5zdGF0ZS5pc09wZW4pIHtcbiAgICAgICAgICAgICAgICBuZWVkbGUgPSBpdGVtO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIG5lZWRsZTtcbiAgICB9XG59O1xuLyoqXG4gKiBEcm9wRG93biBjb21wb25lbnRcbiAqXG4gKiBUZW1wbGF0ZTogX2J1dHRvbl93aXRoX2Ryb3Bkb3duLmh0bWxcbiAqXG4gKiBDYW4gY29udGFpbiBhIGxpc3Qgb2YgbGlua3NcbiAqIENvbnRyb2xsYWJsZSB2aWEgYSB0b2dnbGUgY2xhc3Mgb3IgdGhlIGtleWJvYXJkLlxuICovXG5mdW5jdGlvbiBEcm9wRG93bihlbCwgcmVnaXN0cnkpIHtcbiAgICBpZiAoIWVsIHx8ICFyZWdpc3RyeSkge1xuICAgICAgICBpZiAoJ2Vycm9yJyBpbiBjb25zb2xlKSB7XG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQSBkcm9wZG93biB3YXMgY3JlYXRlZCB3aXRob3V0IGFuIGVsZW1lbnQgb3IgdGhlIERyb3BEb3duQ29udHJvbGxlci5cXG5NYWtlIHN1cmUgdG8gcGFzcyBib3RoIHRvIHlvdXIgY29tcG9uZW50LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgfVxuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRwYXJlbnQgPSAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShlbCkucGFyZW50cyhMSVNUSU5HX1RJVExFX1NFTEVDVE9SKTtcbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgICBpc09wZW46IGZhbHNlXG4gICAgfTtcbiAgICB0aGlzLnJlZ2lzdHJ5ID0gcmVnaXN0cnk7XG4gICAgdGhpcy5jbGlja091dHNpZGVEcm9wRG93biA9IHRoaXMuY2xpY2tPdXRzaWRlRHJvcERvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLmNsb3NlRHJvcERvd24gPSB0aGlzLmNsb3NlRHJvcERvd24uYmluZCh0aGlzKTtcbiAgICB0aGlzLm9wZW5Ecm9wRG93biA9IHRoaXMub3BlbkRyb3BEb3duLmJpbmQodGhpcyk7XG4gICAgdGhpcy5oYW5kbGVDbGljayA9IHRoaXMuaGFuZGxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICB0aGlzLmhhbmRsZUtleUV2ZW50ID0gdGhpcy5oYW5kbGVLZXlFdmVudC5iaW5kKHRoaXMpO1xuICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoY2xpY2tFdmVudCwgdGhpcy5oYW5kbGVDbGljayk7XG4gICAgZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuaGFuZGxlS2V5RXZlbnQpO1xuICAgIHRoaXMuJHBhcmVudC5kYXRhKCdjbG9zZScsIHRoaXMuY2xvc2VEcm9wRG93bik7XG59XG5Ecm9wRG93bi5wcm90b3R5cGUgPSB7XG4gICAgaGFuZGxlS2V5RXZlbnQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB2YWxpZFRyaWdnZXJzID0gW2tleXMuU1BBQ0UsIGtleXMuRU5URVJdO1xuICAgICAgICBpZiAodmFsaWRUcmlnZ2Vycy5pbmRleE9mKGUud2hpY2gpID4gLTEpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQ2xpY2soZSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIGhhbmRsZUNsaWNrOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBpZiAoIXRoaXMuc3RhdGUuaXNPcGVuKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW5Ecm9wRG93bihlKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEcm9wRG93bihlKTtcbiAgICAgICAgfVxuICAgIH0sXG4gICAgb3BlbkRyb3BEb3duOiBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgIHZhciAkcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgICAgICB2YXIgdG9nZ2xlID0gZWwucXVlcnlTZWxlY3RvcihUT0dHTEVfU0VMRUNUT1IpO1xuICAgICAgICB0aGlzLnN0YXRlLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMucmVnaXN0cnkuY2xvc2VBbGxFeGNlcHQodGhpcyk7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoSVNfT1BFTik7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShBUklBLCBmYWxzZSk7XG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QucmVtb3ZlKElDT05fRE9XTik7XG4gICAgICAgIHRvZ2dsZS5jbGFzc0xpc3QuYWRkKElDT05fVVApO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKGNsaWNrRXZlbnQsIHRoaXMuY2xpY2tPdXRzaWRlRHJvcERvd24sIGZhbHNlKTtcbiAgICAgICAgJHBhcmVudC5hZGRDbGFzcyhMSVNUSU5HX0FDVElWRV9DTEFTUyk7XG4gICAgfSxcbiAgICBjbG9zZURyb3BEb3duOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgICAgIHZhciAkcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgICAgICB2YXIgdG9nZ2xlID0gZWwucXVlcnlTZWxlY3RvcihUT0dHTEVfU0VMRUNUT1IpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGNsaWNrRXZlbnQsIHRoaXMuY2xpY2tPdXRzaWRlRHJvcERvd24sIGZhbHNlKTtcbiAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShJU19PUEVOKTtcbiAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5hZGQoSUNPTl9ET1dOKTtcbiAgICAgICAgdG9nZ2xlLmNsYXNzTGlzdC5yZW1vdmUoSUNPTl9VUCk7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZShBUklBLCB0cnVlKTtcbiAgICAgICAgJHBhcmVudC5yZW1vdmVDbGFzcyhMSVNUSU5HX0FDVElWRV9DTEFTUyk7XG4gICAgfSxcbiAgICBjbGlja091dHNpZGVEcm9wRG93bjogZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICAgICAgdmFyIHJlbFRhcmdldCA9IGUucmVsYXRlZFRhcmdldCB8fCBlLnRvRWxlbWVudDtcbiAgICAgICAgaWYgKCEoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShyZWxUYXJnZXQpLnBhcmVudHMoKS5pcyhlbCkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2VEcm9wRG93bigpO1xuICAgICAgICB9XG4gICAgfVxufTtcbmZ1bmN0aW9uIGluaXREcm9wRG93bigpIHtcbiAgICB2YXIgZHJvcERvd24gPSBuZXcgRHJvcERvd24odGhpcywgRHJvcERvd25Db250cm9sbGVyKTtcbiAgICBEcm9wRG93bkNvbnRyb2xsZXIuYWRkKGRyb3BEb3duKTtcbn1cbmZ1bmN0aW9uIGhhbmRsZUtleVByZXNzKGUpIHtcbiAgICBpZiAoZS53aGljaCA9PT0ga2V5cy5FU0MpIHtcbiAgICAgICAgdmFyIG9wZW5fMSA9IERyb3BEb3duQ29udHJvbGxlci5nZXRPcGVuRHJvcERvd24oKTtcbiAgICAgICAgaWYgKG9wZW5fMSkge1xuICAgICAgICAgICAgb3Blbl8xLmNsb3NlRHJvcERvd24oKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbmZ1bmN0aW9uIGluaXREcm9wRG93bnMoKSB7XG4gICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoRFJPUERPV05fU0VMRUNUT1IpLmVhY2goaW5pdERyb3BEb3duKTtcbiAgICAoMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkub24oJ2tleWRvd24nLCBoYW5kbGVLZXlQcmVzcyk7XG59XG4oMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkucmVhZHkoaW5pdERyb3BEb3ducyk7XG53YWd0YWlsLnVpLmluaXREcm9wRG93bnMgPSBpbml0RHJvcERvd25zO1xud2FndGFpbC51aS5Ecm9wRG93bkNvbnRyb2xsZXIgPSBEcm9wRG93bkNvbnRyb2xsZXI7XG4oMCwganF1ZXJ5XzFbXCJkZWZhdWx0XCJdKShkb2N1bWVudCkucmVhZHkoaW5pdEJ1dHRvblNlbGVjdHNfMS5pbml0QnV0dG9uU2VsZWN0cyk7XG53aW5kb3cud2FndGFpbCA9IHdhZ3RhaWw7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/entrypoints/admin/core.js\n");

/***/ }),

/***/ "./client/src/includes/initButtonSelects.ts":
/*!**************************************************!*\
  !*** ./client/src/includes/initButtonSelects.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.initButtonSelects = void 0;\n/**\n * Initialise button selectors\n */\nvar initButtonSelects = function () {\n    document.querySelectorAll('.button-select').forEach(function (element) {\n        var inputElement = element.querySelector('input[type=\"hidden\"]');\n        if (!inputElement) {\n            return;\n        }\n        element\n            .querySelectorAll('.button-select__option')\n            .forEach(function (buttonElement) {\n            buttonElement.addEventListener('click', function (event) {\n                event.preventDefault();\n                inputElement.value = buttonElement.value;\n                element\n                    .querySelectorAll('.button-select__option--selected')\n                    .forEach(function (selectedButtonElement) {\n                    selectedButtonElement.classList.remove('button-select__option--selected');\n                });\n                buttonElement.classList.add('button-select__option--selected');\n            });\n        });\n    });\n};\nexports.initButtonSelects = initButtonSelects;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2luY2x1ZGVzL2luaXRCdXR0b25TZWxlY3RzLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9pbmNsdWRlcy9pbml0QnV0dG9uU2VsZWN0cy50cz9kOTExIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuaW5pdEJ1dHRvblNlbGVjdHMgPSB2b2lkIDA7XG4vKipcbiAqIEluaXRpYWxpc2UgYnV0dG9uIHNlbGVjdG9yc1xuICovXG52YXIgaW5pdEJ1dHRvblNlbGVjdHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbi1zZWxlY3QnKS5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gICAgICAgIHZhciBpbnB1dEVsZW1lbnQgPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W3R5cGU9XCJoaWRkZW5cIl0nKTtcbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAucXVlcnlTZWxlY3RvckFsbCgnLmJ1dHRvbi1zZWxlY3RfX29wdGlvbicpXG4gICAgICAgICAgICAuZm9yRWFjaChmdW5jdGlvbiAoYnV0dG9uRWxlbWVudCkge1xuICAgICAgICAgICAgYnV0dG9uRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgaW5wdXRFbGVtZW50LnZhbHVlID0gYnV0dG9uRWxlbWVudC52YWx1ZTtcbiAgICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICAgICAgICAgIC5xdWVyeVNlbGVjdG9yQWxsKCcuYnV0dG9uLXNlbGVjdF9fb3B0aW9uLS1zZWxlY3RlZCcpXG4gICAgICAgICAgICAgICAgICAgIC5mb3JFYWNoKGZ1bmN0aW9uIChzZWxlY3RlZEJ1dHRvbkVsZW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRCdXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoJ2J1dHRvbi1zZWxlY3RfX29wdGlvbi0tc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBidXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQoJ2J1dHRvbi1zZWxlY3RfX29wdGlvbi0tc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn07XG5leHBvcnRzLmluaXRCdXR0b25TZWxlY3RzID0gaW5pdEJ1dHRvblNlbGVjdHM7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/includes/initButtonSelects.ts\n");

/***/ }),

/***/ "./client/src/includes/initTagField.ts":
/*!*********************************************!*\
  !*** ./client/src/includes/initTagField.ts ***!
  \*********************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.initTagField = void 0;\nvar jquery_1 = __importDefault(__webpack_require__(/*! jquery */ \"jquery\"));\n/**\n * Initialises the tag fields using the jQuery tagit widget\n *\n * @param id - element id to initialise against\n * @param source -  auto complete URL source\n * @param options - Other options passed to jQuery tagit\n */\nvar initTagField = function (id, source, options) {\n    var tagFieldElement = document.getElementById(id);\n    if (!tagFieldElement)\n        return;\n    var finalOptions = __assign({ autocomplete: { source: source }, preprocessTag: function (val) {\n            // Double quote a tag if it contains a space\n            // and if it isn't already quoted.\n            if (val && val[0] !== '\"' && val.indexOf(' ') > -1) {\n                return '\"' + val + '\"';\n            }\n            return val;\n        } }, options);\n    (0, jquery_1[\"default\"])('#' + id).tagit(finalOptions);\n};\nexports.initTagField = initTagField;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2luY2x1ZGVzL2luaXRUYWdGaWVsZC50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2luY2x1ZGVzL2luaXRUYWdGaWVsZC50cz9jMzAyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmluaXRUYWdGaWVsZCA9IHZvaWQgMDtcbnZhciBqcXVlcnlfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwianF1ZXJ5XCIpKTtcbi8qKlxuICogSW5pdGlhbGlzZXMgdGhlIHRhZyBmaWVsZHMgdXNpbmcgdGhlIGpRdWVyeSB0YWdpdCB3aWRnZXRcbiAqXG4gKiBAcGFyYW0gaWQgLSBlbGVtZW50IGlkIHRvIGluaXRpYWxpc2UgYWdhaW5zdFxuICogQHBhcmFtIHNvdXJjZSAtICBhdXRvIGNvbXBsZXRlIFVSTCBzb3VyY2VcbiAqIEBwYXJhbSBvcHRpb25zIC0gT3RoZXIgb3B0aW9ucyBwYXNzZWQgdG8galF1ZXJ5IHRhZ2l0XG4gKi9cbnZhciBpbml0VGFnRmllbGQgPSBmdW5jdGlvbiAoaWQsIHNvdXJjZSwgb3B0aW9ucykge1xuICAgIHZhciB0YWdGaWVsZEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChpZCk7XG4gICAgaWYgKCF0YWdGaWVsZEVsZW1lbnQpXG4gICAgICAgIHJldHVybjtcbiAgICB2YXIgZmluYWxPcHRpb25zID0gX19hc3NpZ24oeyBhdXRvY29tcGxldGU6IHsgc291cmNlOiBzb3VyY2UgfSwgcHJlcHJvY2Vzc1RhZzogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgLy8gRG91YmxlIHF1b3RlIGEgdGFnIGlmIGl0IGNvbnRhaW5zIGEgc3BhY2VcbiAgICAgICAgICAgIC8vIGFuZCBpZiBpdCBpc24ndCBhbHJlYWR5IHF1b3RlZC5cbiAgICAgICAgICAgIGlmICh2YWwgJiYgdmFsWzBdICE9PSAnXCInICYmIHZhbC5pbmRleE9mKCcgJykgPiAtMSkge1xuICAgICAgICAgICAgICAgIHJldHVybiAnXCInICsgdmFsICsgJ1wiJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB2YWw7XG4gICAgICAgIH0gfSwgb3B0aW9ucyk7XG4gICAgKDAsIGpxdWVyeV8xW1wiZGVmYXVsdFwiXSkoJyMnICsgaWQpLnRhZ2l0KGZpbmFsT3B0aW9ucyk7XG59O1xuZXhwb3J0cy5pbml0VGFnRmllbGQgPSBpbml0VGFnRmllbGQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/includes/initTagField.ts\n");

/***/ }),

/***/ "jquery":
/*!*************************!*\
  !*** external "jQuery" ***!
  \*************************/
/***/ ((module) => {

module.exports = jQuery;

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"core": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = globalThis["webpackChunkwagtail"] = globalThis["webpackChunkwagtail"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["wagtail/admin/static/wagtailadmin/js/vendor"], () => (__webpack_require__("./client/src/entrypoints/admin/core.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;