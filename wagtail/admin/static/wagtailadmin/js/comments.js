/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./node_modules/immer/dist/immer.esm.js":
/*!**********************************************!*\
  !*** ./node_modules/immer/dist/immer.esm.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"Immer\": () => (/* binding */ un),\n/* harmony export */   \"applyPatches\": () => (/* binding */ pn),\n/* harmony export */   \"castDraft\": () => (/* binding */ K),\n/* harmony export */   \"castImmutable\": () => (/* binding */ $),\n/* harmony export */   \"createDraft\": () => (/* binding */ ln),\n/* harmony export */   \"current\": () => (/* binding */ D),\n/* harmony export */   \"enableAllPlugins\": () => (/* binding */ J),\n/* harmony export */   \"enableES5\": () => (/* binding */ N),\n/* harmony export */   \"enableMapSet\": () => (/* binding */ C),\n/* harmony export */   \"enablePatches\": () => (/* binding */ T),\n/* harmony export */   \"finishDraft\": () => (/* binding */ dn),\n/* harmony export */   \"freeze\": () => (/* binding */ d),\n/* harmony export */   \"immerable\": () => (/* binding */ L),\n/* harmony export */   \"isDraft\": () => (/* binding */ r),\n/* harmony export */   \"isDraftable\": () => (/* binding */ t),\n/* harmony export */   \"nothing\": () => (/* binding */ H),\n/* harmony export */   \"original\": () => (/* binding */ e),\n/* harmony export */   \"produce\": () => (/* binding */ fn),\n/* harmony export */   \"produceWithPatches\": () => (/* binding */ cn),\n/* harmony export */   \"setAutoFreeze\": () => (/* binding */ sn),\n/* harmony export */   \"setUseProxies\": () => (/* binding */ vn)\n/* harmony export */ });\nfunction n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(true){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return false||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if( true&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return true&&f(r),en.get(r,n)},set:function(r){var t=this[Q]; true&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return true&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return true&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q]; true&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (fn);\n//# sourceMappingURL=immer.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvaW1tZXIvZGlzdC9pbW1lci5lc20uanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vbm9kZV9tb2R1bGVzL2ltbWVyL2Rpc3QvaW1tZXIuZXNtLmpzP2FkZmEiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gbihuKXtmb3IodmFyIHI9YXJndW1lbnRzLmxlbmd0aCx0PUFycmF5KHI+MT9yLTE6MCksZT0xO2U8cjtlKyspdFtlLTFdPWFyZ3VtZW50c1tlXTtpZihcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WKXt2YXIgaT1ZW25dLG89aT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBpP2kuYXBwbHkobnVsbCx0KTppOlwidW5rbm93biBlcnJvciBucjogXCIrbjt0aHJvdyBFcnJvcihcIltJbW1lcl0gXCIrbyl9dGhyb3cgRXJyb3IoXCJbSW1tZXJdIG1pbmlmaWVkIGVycm9yIG5yOiBcIituKyh0Lmxlbmd0aD9cIiBcIit0Lm1hcCgoZnVuY3Rpb24obil7cmV0dXJuXCInXCIrbitcIidcIn0pKS5qb2luKFwiLFwiKTpcIlwiKStcIi4gRmluZCB0aGUgZnVsbCBlcnJvciBhdDogaHR0cHM6Ly9iaXQubHkvM2NYRUtXZlwiKX1mdW5jdGlvbiByKG4pe3JldHVybiEhbiYmISFuW1FdfWZ1bmN0aW9uIHQobil7cmV0dXJuISFuJiYoZnVuY3Rpb24obil7aWYoIW58fFwib2JqZWN0XCIhPXR5cGVvZiBuKXJldHVybiExO3ZhciByPU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTtpZihudWxsPT09cilyZXR1cm4hMDt2YXIgdD1PYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChyLFwiY29uc3RydWN0b3JcIikmJnIuY29uc3RydWN0b3I7cmV0dXJuIHQ9PT1PYmplY3R8fFwiZnVuY3Rpb25cIj09dHlwZW9mIHQmJkZ1bmN0aW9uLnRvU3RyaW5nLmNhbGwodCk9PT1afShuKXx8QXJyYXkuaXNBcnJheShuKXx8ISFuW0xdfHwhIW4uY29uc3RydWN0b3JbTF18fHMobil8fHYobikpfWZ1bmN0aW9uIGUodCl7cmV0dXJuIHIodCl8fG4oMjMsdCksdFtRXS50fWZ1bmN0aW9uIGkobixyLHQpe3ZvaWQgMD09PXQmJih0PSExKSwwPT09byhuKT8odD9PYmplY3Qua2V5czpubikobikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dCYmXCJzeW1ib2xcIj09dHlwZW9mIGV8fHIoZSxuW2VdLG4pfSkpOm4uZm9yRWFjaCgoZnVuY3Rpb24odCxlKXtyZXR1cm4gcihlLHQsbil9KSl9ZnVuY3Rpb24gbyhuKXt2YXIgcj1uW1FdO3JldHVybiByP3IuaT4zP3IuaS00OnIuaTpBcnJheS5pc0FycmF5KG4pPzE6cyhuKT8yOnYobik/MzowfWZ1bmN0aW9uIHUobixyKXtyZXR1cm4gMj09PW8obik/bi5oYXMocik6T2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4scil9ZnVuY3Rpb24gYShuLHIpe3JldHVybiAyPT09byhuKT9uLmdldChyKTpuW3JdfWZ1bmN0aW9uIGYobixyLHQpe3ZhciBlPW8obik7Mj09PWU/bi5zZXQocix0KTozPT09ZT8obi5kZWxldGUociksbi5hZGQodCkpOm5bcl09dH1mdW5jdGlvbiBjKG4scil7cmV0dXJuIG49PT1yPzAhPT1ufHwxL249PTEvcjpuIT1uJiZyIT1yfWZ1bmN0aW9uIHMobil7cmV0dXJuIFgmJm4gaW5zdGFuY2VvZiBNYXB9ZnVuY3Rpb24gdihuKXtyZXR1cm4gcSYmbiBpbnN0YW5jZW9mIFNldH1mdW5jdGlvbiBwKG4pe3JldHVybiBuLm98fG4udH1mdW5jdGlvbiBsKG4pe2lmKEFycmF5LmlzQXJyYXkobikpcmV0dXJuIEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKG4pO3ZhciByPXJuKG4pO2RlbGV0ZSByW1FdO2Zvcih2YXIgdD1ubihyKSxlPTA7ZTx0Lmxlbmd0aDtlKyspe3ZhciBpPXRbZV0sbz1yW2ldOyExPT09by53cml0YWJsZSYmKG8ud3JpdGFibGU9ITAsby5jb25maWd1cmFibGU9ITApLChvLmdldHx8by5zZXQpJiYocltpXT17Y29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwLGVudW1lcmFibGU6by5lbnVtZXJhYmxlLHZhbHVlOm5baV19KX1yZXR1cm4gT2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2Yobikscil9ZnVuY3Rpb24gZChuLGUpe3JldHVybiB2b2lkIDA9PT1lJiYoZT0hMSkseShuKXx8cihuKXx8IXQobik/bjoobyhuKT4xJiYobi5zZXQ9bi5hZGQ9bi5jbGVhcj1uLmRlbGV0ZT1oKSxPYmplY3QuZnJlZXplKG4pLGUmJmkobiwoZnVuY3Rpb24obixyKXtyZXR1cm4gZChyLCEwKX0pLCEwKSxuKX1mdW5jdGlvbiBoKCl7bigyKX1mdW5jdGlvbiB5KG4pe3JldHVybiBudWxsPT1ufHxcIm9iamVjdFwiIT10eXBlb2Ygbnx8T2JqZWN0LmlzRnJvemVuKG4pfWZ1bmN0aW9uIGIocil7dmFyIHQ9dG5bcl07cmV0dXJuIHR8fG4oMTgsciksdH1mdW5jdGlvbiBtKG4scil7dG5bbl18fCh0bltuXT1yKX1mdW5jdGlvbiBfKCl7cmV0dXJuXCJwcm9kdWN0aW9uXCI9PT1wcm9jZXNzLmVudi5OT0RFX0VOVnx8VXx8bigwKSxVfWZ1bmN0aW9uIGoobixyKXtyJiYoYihcIlBhdGNoZXNcIiksbi51PVtdLG4ucz1bXSxuLnY9cil9ZnVuY3Rpb24gTyhuKXtnKG4pLG4ucC5mb3JFYWNoKFMpLG4ucD1udWxsfWZ1bmN0aW9uIGcobil7bj09PVUmJihVPW4ubCl9ZnVuY3Rpb24gdyhuKXtyZXR1cm4gVT17cDpbXSxsOlUsaDpuLG06ITAsXzowfX1mdW5jdGlvbiBTKG4pe3ZhciByPW5bUV07MD09PXIuaXx8MT09PXIuaT9yLmooKTpyLk89ITB9ZnVuY3Rpb24gUChyLGUpe2UuXz1lLnAubGVuZ3RoO3ZhciBpPWUucFswXSxvPXZvaWQgMCE9PXImJnIhPT1pO3JldHVybiBlLmguZ3x8YihcIkVTNVwiKS5TKGUscixvKSxvPyhpW1FdLlAmJihPKGUpLG4oNCkpLHQocikmJihyPU0oZSxyKSxlLmx8fHgoZSxyKSksZS51JiZiKFwiUGF0Y2hlc1wiKS5NKGlbUV0udCxyLGUudSxlLnMpKTpyPU0oZSxpLFtdKSxPKGUpLGUudSYmZS52KGUudSxlLnMpLHIhPT1IP3I6dm9pZCAwfWZ1bmN0aW9uIE0obixyLHQpe2lmKHkocikpcmV0dXJuIHI7dmFyIGU9cltRXTtpZighZSlyZXR1cm4gaShyLChmdW5jdGlvbihpLG8pe3JldHVybiBBKG4sZSxyLGksbyx0KX0pLCEwKSxyO2lmKGUuQSE9PW4pcmV0dXJuIHI7aWYoIWUuUClyZXR1cm4geChuLGUudCwhMCksZS50O2lmKCFlLkkpe2UuST0hMCxlLkEuXy0tO3ZhciBvPTQ9PT1lLml8fDU9PT1lLmk/ZS5vPWwoZS5rKTplLm87aSgzPT09ZS5pP25ldyBTZXQobyk6bywoZnVuY3Rpb24ocixpKXtyZXR1cm4gQShuLGUsbyxyLGksdCl9KSkseChuLG8sITEpLHQmJm4udSYmYihcIlBhdGNoZXNcIikuUihlLHQsbi51LG4ucyl9cmV0dXJuIGUub31mdW5jdGlvbiBBKGUsaSxvLGEsYyxzKXtpZihcInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZjPT09byYmbig1KSxyKGMpKXt2YXIgdj1NKGUsYyxzJiZpJiYzIT09aS5pJiYhdShpLkQsYSk/cy5jb25jYXQoYSk6dm9pZCAwKTtpZihmKG8sYSx2KSwhcih2KSlyZXR1cm47ZS5tPSExfWlmKHQoYykmJiF5KGMpKXtpZighZS5oLkYmJmUuXzwxKXJldHVybjtNKGUsYyksaSYmaS5BLmx8fHgoZSxjKX19ZnVuY3Rpb24geChuLHIsdCl7dm9pZCAwPT09dCYmKHQ9ITEpLG4uaC5GJiZuLm0mJmQocix0KX1mdW5jdGlvbiB6KG4scil7dmFyIHQ9bltRXTtyZXR1cm4odD9wKHQpOm4pW3JdfWZ1bmN0aW9uIEkobixyKXtpZihyIGluIG4pZm9yKHZhciB0PU9iamVjdC5nZXRQcm90b3R5cGVPZihuKTt0Oyl7dmFyIGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LHIpO2lmKGUpcmV0dXJuIGU7dD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodCl9fWZ1bmN0aW9uIGsobil7bi5QfHwobi5QPSEwLG4ubCYmayhuLmwpKX1mdW5jdGlvbiBFKG4pe24ub3x8KG4ubz1sKG4udCkpfWZ1bmN0aW9uIFIobixyLHQpe3ZhciBlPXMocik/YihcIk1hcFNldFwiKS5OKHIsdCk6dihyKT9iKFwiTWFwU2V0XCIpLlQocix0KTpuLmc/ZnVuY3Rpb24obixyKXt2YXIgdD1BcnJheS5pc0FycmF5KG4pLGU9e2k6dD8xOjAsQTpyP3IuQTpfKCksUDohMSxJOiExLEQ6e30sbDpyLHQ6bixrOm51bGwsbzpudWxsLGo6bnVsbCxDOiExfSxpPWUsbz1lbjt0JiYoaT1bZV0sbz1vbik7dmFyIHU9UHJveHkucmV2b2NhYmxlKGksbyksYT11LnJldm9rZSxmPXUucHJveHk7cmV0dXJuIGUuaz1mLGUuaj1hLGZ9KHIsdCk6YihcIkVTNVwiKS5KKHIsdCk7cmV0dXJuKHQ/dC5BOl8oKSkucC5wdXNoKGUpLGV9ZnVuY3Rpb24gRChlKXtyZXR1cm4gcihlKXx8bigyMixlKSxmdW5jdGlvbiBuKHIpe2lmKCF0KHIpKXJldHVybiByO3ZhciBlLHU9cltRXSxjPW8ocik7aWYodSl7aWYoIXUuUCYmKHUuaTw0fHwhYihcIkVTNVwiKS5LKHUpKSlyZXR1cm4gdS50O3UuST0hMCxlPUYocixjKSx1Lkk9ITF9ZWxzZSBlPUYocixjKTtyZXR1cm4gaShlLChmdW5jdGlvbihyLHQpe3UmJmEodS50LHIpPT09dHx8ZihlLHIsbih0KSl9KSksMz09PWM/bmV3IFNldChlKTplfShlKX1mdW5jdGlvbiBGKG4scil7c3dpdGNoKHIpe2Nhc2UgMjpyZXR1cm4gbmV3IE1hcChuKTtjYXNlIDM6cmV0dXJuIEFycmF5LmZyb20obil9cmV0dXJuIGwobil9ZnVuY3Rpb24gTigpe2Z1bmN0aW9uIHQobixyKXt2YXIgdD1zW25dO3JldHVybiB0P3QuZW51bWVyYWJsZT1yOnNbbl09dD17Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6cixnZXQ6ZnVuY3Rpb24oKXt2YXIgcj10aGlzW1FdO3JldHVyblwicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmYociksZW4uZ2V0KHIsbil9LHNldDpmdW5jdGlvbihyKXt2YXIgdD10aGlzW1FdO1wicHJvZHVjdGlvblwiIT09cHJvY2Vzcy5lbnYuTk9ERV9FTlYmJmYodCksZW4uc2V0KHQsbixyKX19LHR9ZnVuY3Rpb24gZShuKXtmb3IodmFyIHI9bi5sZW5ndGgtMTtyPj0wO3ItLSl7dmFyIHQ9bltyXVtRXTtpZighdC5QKXN3aXRjaCh0Lmkpe2Nhc2UgNTphKHQpJiZrKHQpO2JyZWFrO2Nhc2UgNDpvKHQpJiZrKHQpfX19ZnVuY3Rpb24gbyhuKXtmb3IodmFyIHI9bi50LHQ9bi5rLGU9bm4odCksaT1lLmxlbmd0aC0xO2k+PTA7aS0tKXt2YXIgbz1lW2ldO2lmKG8hPT1RKXt2YXIgYT1yW29dO2lmKHZvaWQgMD09PWEmJiF1KHIsbykpcmV0dXJuITA7dmFyIGY9dFtvXSxzPWYmJmZbUV07aWYocz9zLnQhPT1hOiFjKGYsYSkpcmV0dXJuITB9fXZhciB2PSEhcltRXTtyZXR1cm4gZS5sZW5ndGghPT1ubihyKS5sZW5ndGgrKHY/MDoxKX1mdW5jdGlvbiBhKG4pe3ZhciByPW4uaztpZihyLmxlbmd0aCE9PW4udC5sZW5ndGgpcmV0dXJuITA7dmFyIHQ9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihyLHIubGVuZ3RoLTEpO2lmKHQmJiF0LmdldClyZXR1cm4hMDtmb3IodmFyIGU9MDtlPHIubGVuZ3RoO2UrKylpZighci5oYXNPd25Qcm9wZXJ0eShlKSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBmKHIpe3IuTyYmbigzLEpTT04uc3RyaW5naWZ5KHAocikpKX12YXIgcz17fTttKFwiRVM1XCIse0o6ZnVuY3Rpb24obixyKXt2YXIgZT1BcnJheS5pc0FycmF5KG4pLGk9ZnVuY3Rpb24obixyKXtpZihuKXtmb3IodmFyIGU9QXJyYXkoci5sZW5ndGgpLGk9MDtpPHIubGVuZ3RoO2krKylPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIlwiK2ksdChpLCEwKSk7cmV0dXJuIGV9dmFyIG89cm4ocik7ZGVsZXRlIG9bUV07Zm9yKHZhciB1PW5uKG8pLGE9MDthPHUubGVuZ3RoO2ErKyl7dmFyIGY9dVthXTtvW2ZdPXQoZixufHwhIW9bZl0uZW51bWVyYWJsZSl9cmV0dXJuIE9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHIpLG8pfShlLG4pLG89e2k6ZT81OjQsQTpyP3IuQTpfKCksUDohMSxJOiExLEQ6e30sbDpyLHQ6bixrOmksbzpudWxsLE86ITEsQzohMX07cmV0dXJuIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFEse3ZhbHVlOm8sd3JpdGFibGU6ITB9KSxpfSxTOmZ1bmN0aW9uKG4sdCxvKXtvP3IodCkmJnRbUV0uQT09PW4mJmUobi5wKToobi51JiZmdW5jdGlvbiBuKHIpe2lmKHImJlwib2JqZWN0XCI9PXR5cGVvZiByKXt2YXIgdD1yW1FdO2lmKHQpe3ZhciBlPXQudCxvPXQuayxmPXQuRCxjPXQuaTtpZig0PT09YylpKG8sKGZ1bmN0aW9uKHIpe3IhPT1RJiYodm9pZCAwIT09ZVtyXXx8dShlLHIpP2Zbcl18fG4ob1tyXSk6KGZbcl09ITAsayh0KSkpfSkpLGkoZSwoZnVuY3Rpb24obil7dm9pZCAwIT09b1tuXXx8dShvLG4pfHwoZltuXT0hMSxrKHQpKX0pKTtlbHNlIGlmKDU9PT1jKXtpZihhKHQpJiYoayh0KSxmLmxlbmd0aD0hMCksby5sZW5ndGg8ZS5sZW5ndGgpZm9yKHZhciBzPW8ubGVuZ3RoO3M8ZS5sZW5ndGg7cysrKWZbc109ITE7ZWxzZSBmb3IodmFyIHY9ZS5sZW5ndGg7djxvLmxlbmd0aDt2KyspZlt2XT0hMDtmb3IodmFyIHA9TWF0aC5taW4oby5sZW5ndGgsZS5sZW5ndGgpLGw9MDtsPHA7bCsrKW8uaGFzT3duUHJvcGVydHkobCl8fChmW2xdPSEwKSx2b2lkIDA9PT1mW2xdJiZuKG9bbF0pfX19fShuLnBbMF0pLGUobi5wKSl9LEs6ZnVuY3Rpb24obil7cmV0dXJuIDQ9PT1uLmk/byhuKTphKG4pfX0pfWZ1bmN0aW9uIFQoKXtmdW5jdGlvbiBlKG4pe2lmKCF0KG4pKXJldHVybiBuO2lmKEFycmF5LmlzQXJyYXkobikpcmV0dXJuIG4ubWFwKGUpO2lmKHMobikpcmV0dXJuIG5ldyBNYXAoQXJyYXkuZnJvbShuLmVudHJpZXMoKSkubWFwKChmdW5jdGlvbihuKXtyZXR1cm5bblswXSxlKG5bMV0pXX0pKSk7aWYodihuKSlyZXR1cm4gbmV3IFNldChBcnJheS5mcm9tKG4pLm1hcChlKSk7dmFyIHI9T2JqZWN0LmNyZWF0ZShPYmplY3QuZ2V0UHJvdG90eXBlT2YobikpO2Zvcih2YXIgaSBpbiBuKXJbaV09ZShuW2ldKTtyZXR1cm4gdShuLEwpJiYocltMXT1uW0xdKSxyfWZ1bmN0aW9uIGYobil7cmV0dXJuIHIobik/ZShuKTpufXZhciBjPVwiYWRkXCI7bShcIlBhdGNoZXNcIix7JDpmdW5jdGlvbihyLHQpe3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe2Zvcih2YXIgaT10LnBhdGgsdT10Lm9wLGY9cixzPTA7czxpLmxlbmd0aC0xO3MrKyl7dmFyIHY9byhmKSxwPVwiXCIraVtzXTswIT09diYmMSE9PXZ8fFwiX19wcm90b19fXCIhPT1wJiZcImNvbnN0cnVjdG9yXCIhPT1wfHxuKDI0KSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBmJiZcInByb3RvdHlwZVwiPT09cCYmbigyNCksXCJvYmplY3RcIiE9dHlwZW9mKGY9YShmLHApKSYmbigxNSxpLmpvaW4oXCIvXCIpKX12YXIgbD1vKGYpLGQ9ZSh0LnZhbHVlKSxoPWlbaS5sZW5ndGgtMV07c3dpdGNoKHUpe2Nhc2VcInJlcGxhY2VcIjpzd2l0Y2gobCl7Y2FzZSAyOnJldHVybiBmLnNldChoLGQpO2Nhc2UgMzpuKDE2KTtkZWZhdWx0OnJldHVybiBmW2hdPWR9Y2FzZSBjOnN3aXRjaChsKXtjYXNlIDE6cmV0dXJuXCItXCI9PT1oP2YucHVzaChkKTpmLnNwbGljZShoLDAsZCk7Y2FzZSAyOnJldHVybiBmLnNldChoLGQpO2Nhc2UgMzpyZXR1cm4gZi5hZGQoZCk7ZGVmYXVsdDpyZXR1cm4gZltoXT1kfWNhc2VcInJlbW92ZVwiOnN3aXRjaChsKXtjYXNlIDE6cmV0dXJuIGYuc3BsaWNlKGgsMSk7Y2FzZSAyOnJldHVybiBmLmRlbGV0ZShoKTtjYXNlIDM6cmV0dXJuIGYuZGVsZXRlKHQudmFsdWUpO2RlZmF1bHQ6cmV0dXJuIGRlbGV0ZSBmW2hdfWRlZmF1bHQ6bigxNyx1KX19KSkscn0sUjpmdW5jdGlvbihuLHIsdCxlKXtzd2l0Y2gobi5pKXtjYXNlIDA6Y2FzZSA0OmNhc2UgMjpyZXR1cm4gZnVuY3Rpb24obixyLHQsZSl7dmFyIG89bi50LHM9bi5vO2kobi5ELChmdW5jdGlvbihuLGkpe3ZhciB2PWEobyxuKSxwPWEocyxuKSxsPWk/dShvLG4pP1wicmVwbGFjZVwiOmM6XCJyZW1vdmVcIjtpZih2IT09cHx8XCJyZXBsYWNlXCIhPT1sKXt2YXIgZD1yLmNvbmNhdChuKTt0LnB1c2goXCJyZW1vdmVcIj09PWw/e29wOmwscGF0aDpkfTp7b3A6bCxwYXRoOmQsdmFsdWU6cH0pLGUucHVzaChsPT09Yz97b3A6XCJyZW1vdmVcIixwYXRoOmR9OlwicmVtb3ZlXCI9PT1sP3tvcDpjLHBhdGg6ZCx2YWx1ZTpmKHYpfTp7b3A6XCJyZXBsYWNlXCIscGF0aDpkLHZhbHVlOmYodil9KX19KSl9KG4scix0LGUpO2Nhc2UgNTpjYXNlIDE6cmV0dXJuIGZ1bmN0aW9uKG4scix0LGUpe3ZhciBpPW4udCxvPW4uRCx1PW4ubztpZih1Lmxlbmd0aDxpLmxlbmd0aCl7dmFyIGE9W3UsaV07aT1hWzBdLHU9YVsxXTt2YXIgcz1bZSx0XTt0PXNbMF0sZT1zWzFdfWZvcih2YXIgdj0wO3Y8aS5sZW5ndGg7disrKWlmKG9bdl0mJnVbdl0hPT1pW3ZdKXt2YXIgcD1yLmNvbmNhdChbdl0pO3QucHVzaCh7b3A6XCJyZXBsYWNlXCIscGF0aDpwLHZhbHVlOmYodVt2XSl9KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6cCx2YWx1ZTpmKGlbdl0pfSl9Zm9yKHZhciBsPWkubGVuZ3RoO2w8dS5sZW5ndGg7bCsrKXt2YXIgZD1yLmNvbmNhdChbbF0pO3QucHVzaCh7b3A6YyxwYXRoOmQsdmFsdWU6Zih1W2xdKX0pfWkubGVuZ3RoPHUubGVuZ3RoJiZlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6ci5jb25jYXQoW1wibGVuZ3RoXCJdKSx2YWx1ZTppLmxlbmd0aH0pfShuLHIsdCxlKTtjYXNlIDM6cmV0dXJuIGZ1bmN0aW9uKG4scix0LGUpe3ZhciBpPW4udCxvPW4ubyx1PTA7aS5mb3JFYWNoKChmdW5jdGlvbihuKXtpZighby5oYXMobikpe3ZhciBpPXIuY29uY2F0KFt1XSk7dC5wdXNoKHtvcDpcInJlbW92ZVwiLHBhdGg6aSx2YWx1ZTpufSksZS51bnNoaWZ0KHtvcDpjLHBhdGg6aSx2YWx1ZTpufSl9dSsrfSkpLHU9MCxvLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCFpLmhhcyhuKSl7dmFyIG89ci5jb25jYXQoW3VdKTt0LnB1c2goe29wOmMscGF0aDpvLHZhbHVlOm59KSxlLnVuc2hpZnQoe29wOlwicmVtb3ZlXCIscGF0aDpvLHZhbHVlOm59KX11Kyt9KSl9KG4scix0LGUpfX0sTTpmdW5jdGlvbihuLHIsdCxlKXt0LnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6cj09PUg/dm9pZCAwOnJ9KSxlLnB1c2goe29wOlwicmVwbGFjZVwiLHBhdGg6W10sdmFsdWU6bn0pfX0pfWZ1bmN0aW9uIEMoKXtmdW5jdGlvbiByKG4scil7ZnVuY3Rpb24gdCgpe3RoaXMuY29uc3RydWN0b3I9bn1hKG4sciksbi5wcm90b3R5cGU9KHQucHJvdG90eXBlPXIucHJvdG90eXBlLG5ldyB0KX1mdW5jdGlvbiBlKG4pe24ub3x8KG4uRD1uZXcgTWFwLG4ubz1uZXcgTWFwKG4udCkpfWZ1bmN0aW9uIG8obil7bi5vfHwobi5vPW5ldyBTZXQsbi50LmZvckVhY2goKGZ1bmN0aW9uKHIpe2lmKHQocikpe3ZhciBlPVIobi5BLmgscixuKTtuLnAuc2V0KHIsZSksbi5vLmFkZChlKX1lbHNlIG4uby5hZGQocil9KSkpfWZ1bmN0aW9uIHUocil7ci5PJiZuKDMsSlNPTi5zdHJpbmdpZnkocChyKSkpfXZhciBhPWZ1bmN0aW9uKG4scil7cmV0dXJuKGE9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKG4scil7bi5fX3Byb3RvX189cn18fGZ1bmN0aW9uKG4scil7Zm9yKHZhciB0IGluIHIpci5oYXNPd25Qcm9wZXJ0eSh0KSYmKG5bdF09clt0XSl9KShuLHIpfSxmPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gbihuLHIpe3JldHVybiB0aGlzW1FdPXtpOjIsbDpyLEE6cj9yLkE6XygpLFA6ITEsSTohMSxvOnZvaWQgMCxEOnZvaWQgMCx0Om4sazp0aGlzLEM6ITEsTzohMX0sdGhpc31yKG4sTWFwKTt2YXIgbz1uLnByb3RvdHlwZTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLnNpemV9fSksby5oYXM9ZnVuY3Rpb24obil7cmV0dXJuIHAodGhpc1tRXSkuaGFzKG4pfSxvLnNldD1mdW5jdGlvbihuLHIpe3ZhciB0PXRoaXNbUV07cmV0dXJuIHUodCkscCh0KS5oYXMobikmJnAodCkuZ2V0KG4pPT09cnx8KGUodCksayh0KSx0LkQuc2V0KG4sITApLHQuby5zZXQobixyKSx0LkQuc2V0KG4sITApKSx0aGlzfSxvLmRlbGV0ZT1mdW5jdGlvbihuKXtpZighdGhpcy5oYXMobikpcmV0dXJuITE7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxlKHIpLGsociksci50LmhhcyhuKT9yLkQuc2V0KG4sITEpOnIuRC5kZWxldGUobiksci5vLmRlbGV0ZShuKSwhMH0sby5jbGVhcj1mdW5jdGlvbigpe3ZhciBuPXRoaXNbUV07dShuKSxwKG4pLnNpemUmJihlKG4pLGsobiksbi5EPW5ldyBNYXAsaShuLnQsKGZ1bmN0aW9uKHIpe24uRC5zZXQociwhMSl9KSksbi5vLmNsZWFyKCkpfSxvLmZvckVhY2g9ZnVuY3Rpb24obixyKXt2YXIgdD10aGlzO3AodGhpc1tRXSkuZm9yRWFjaCgoZnVuY3Rpb24oZSxpKXtuLmNhbGwocix0LmdldChpKSxpLHQpfSkpfSxvLmdldD1mdW5jdGlvbihuKXt2YXIgcj10aGlzW1FdO3Uocik7dmFyIGk9cChyKS5nZXQobik7aWYoci5JfHwhdChpKSlyZXR1cm4gaTtpZihpIT09ci50LmdldChuKSlyZXR1cm4gaTt2YXIgbz1SKHIuQS5oLGkscik7cmV0dXJuIGUociksci5vLnNldChuLG8pLG99LG8ua2V5cz1mdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLmtleXMoKX0sby52YWx1ZXM9ZnVuY3Rpb24oKXt2YXIgbixyPXRoaXMsdD10aGlzLmtleXMoKTtyZXR1cm4obj17fSlbVl09ZnVuY3Rpb24oKXtyZXR1cm4gci52YWx1ZXMoKX0sbi5uZXh0PWZ1bmN0aW9uKCl7dmFyIG49dC5uZXh0KCk7cmV0dXJuIG4uZG9uZT9uOntkb25lOiExLHZhbHVlOnIuZ2V0KG4udmFsdWUpfX0sbn0sby5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIG4scj10aGlzLHQ9dGhpcy5rZXlzKCk7cmV0dXJuKG49e30pW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHIuZW50cmllcygpfSxuLm5leHQ9ZnVuY3Rpb24oKXt2YXIgbj10Lm5leHQoKTtpZihuLmRvbmUpcmV0dXJuIG47dmFyIGU9ci5nZXQobi52YWx1ZSk7cmV0dXJue2RvbmU6ITEsdmFsdWU6W24udmFsdWUsZV19fSxufSxvW1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuZW50cmllcygpfSxufSgpLGM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBuKG4scil7cmV0dXJuIHRoaXNbUV09e2k6MyxsOnIsQTpyP3IuQTpfKCksUDohMSxJOiExLG86dm9pZCAwLHQ6bixrOnRoaXMscDpuZXcgTWFwLE86ITEsQzohMX0sdGhpc31yKG4sU2V0KTt2YXIgdD1uLnByb3RvdHlwZTtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJzaXplXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBwKHRoaXNbUV0pLnNpemV9fSksdC5oYXM9ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxyLm8/ISFyLm8uaGFzKG4pfHwhKCFyLnAuaGFzKG4pfHwhci5vLmhhcyhyLnAuZ2V0KG4pKSk6ci50LmhhcyhuKX0sdC5hZGQ9ZnVuY3Rpb24obil7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSx0aGlzLmhhcyhuKXx8KG8ociksayhyKSxyLm8uYWRkKG4pKSx0aGlzfSx0LmRlbGV0ZT1mdW5jdGlvbihuKXtpZighdGhpcy5oYXMobikpcmV0dXJuITE7dmFyIHI9dGhpc1tRXTtyZXR1cm4gdShyKSxvKHIpLGsociksci5vLmRlbGV0ZShuKXx8ISFyLnAuaGFzKG4pJiZyLm8uZGVsZXRlKHIucC5nZXQobikpfSx0LmNsZWFyPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTt1KG4pLHAobikuc2l6ZSYmKG8obiksayhuKSxuLm8uY2xlYXIoKSl9LHQudmFsdWVzPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm4gdShuKSxvKG4pLG4uby52YWx1ZXMoKX0sdC5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIG49dGhpc1tRXTtyZXR1cm4gdShuKSxvKG4pLG4uby5lbnRyaWVzKCl9LHQua2V5cz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnZhbHVlcygpfSx0W1ZdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudmFsdWVzKCl9LHQuZm9yRWFjaD1mdW5jdGlvbihuLHIpe2Zvcih2YXIgdD10aGlzLnZhbHVlcygpLGU9dC5uZXh0KCk7IWUuZG9uZTspbi5jYWxsKHIsZS52YWx1ZSxlLnZhbHVlLHRoaXMpLGU9dC5uZXh0KCl9LG59KCk7bShcIk1hcFNldFwiLHtOOmZ1bmN0aW9uKG4scil7cmV0dXJuIG5ldyBmKG4scil9LFQ6ZnVuY3Rpb24obixyKXtyZXR1cm4gbmV3IGMobixyKX19KX1mdW5jdGlvbiBKKCl7TigpLEMoKSxUKCl9ZnVuY3Rpb24gSyhuKXtyZXR1cm4gbn1mdW5jdGlvbiAkKG4pe3JldHVybiBufXZhciBHLFUsVz1cInVuZGVmaW5lZFwiIT10eXBlb2YgU3ltYm9sJiZcInN5bWJvbFwiPT10eXBlb2YgU3ltYm9sKFwieFwiKSxYPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBNYXAscT1cInVuZGVmaW5lZFwiIT10eXBlb2YgU2V0LEI9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb3h5JiZ2b2lkIDAhPT1Qcm94eS5yZXZvY2FibGUmJlwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0LEg9Vz9TeW1ib2wuZm9yKFwiaW1tZXItbm90aGluZ1wiKTooKEc9e30pW1wiaW1tZXItbm90aGluZ1wiXT0hMCxHKSxMPVc/U3ltYm9sLmZvcihcImltbWVyLWRyYWZ0YWJsZVwiKTpcIl9fJGltbWVyX2RyYWZ0YWJsZVwiLFE9Vz9TeW1ib2wuZm9yKFwiaW1tZXItc3RhdGVcIik6XCJfXyRpbW1lcl9zdGF0ZVwiLFY9XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLml0ZXJhdG9yfHxcIkBAaXRlcmF0b3JcIixZPXswOlwiSWxsZWdhbCBzdGF0ZVwiLDE6XCJJbW1lciBkcmFmdHMgY2Fubm90IGhhdmUgY29tcHV0ZWQgcHJvcGVydGllc1wiLDI6XCJUaGlzIG9iamVjdCBoYXMgYmVlbiBmcm96ZW4gYW5kIHNob3VsZCBub3QgYmUgbXV0YXRlZFwiLDM6ZnVuY3Rpb24obil7cmV0dXJuXCJDYW5ub3QgdXNlIGEgcHJveHkgdGhhdCBoYXMgYmVlbiByZXZva2VkLiBEaWQgeW91IHBhc3MgYW4gb2JqZWN0IGZyb20gaW5zaWRlIGFuIGltbWVyIGZ1bmN0aW9uIHRvIGFuIGFzeW5jIHByb2Nlc3M/IFwiK259LDQ6XCJBbiBpbW1lciBwcm9kdWNlciByZXR1cm5lZCBhIG5ldyB2YWx1ZSAqYW5kKiBtb2RpZmllZCBpdHMgZHJhZnQuIEVpdGhlciByZXR1cm4gYSBuZXcgdmFsdWUgKm9yKiBtb2RpZnkgdGhlIGRyYWZ0LlwiLDU6XCJJbW1lciBmb3JiaWRzIGNpcmN1bGFyIHJlZmVyZW5jZXNcIiw2OlwiVGhlIGZpcnN0IG9yIHNlY29uZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uXCIsNzpcIlRoZSB0aGlyZCBhcmd1bWVudCB0byBgcHJvZHVjZWAgbXVzdCBiZSBhIGZ1bmN0aW9uIG9yIHVuZGVmaW5lZFwiLDg6XCJGaXJzdCBhcmd1bWVudCB0byBgY3JlYXRlRHJhZnRgIG11c3QgYmUgYSBwbGFpbiBvYmplY3QsIGFuIGFycmF5LCBvciBhbiBpbW1lcmFibGUgb2JqZWN0XCIsOTpcIkZpcnN0IGFyZ3VtZW50IHRvIGBmaW5pc2hEcmFmdGAgbXVzdCBiZSBhIGRyYWZ0IHJldHVybmVkIGJ5IGBjcmVhdGVEcmFmdGBcIiwxMDpcIlRoZSBnaXZlbiBkcmFmdCBpcyBhbHJlYWR5IGZpbmFsaXplZFwiLDExOlwiT2JqZWN0LmRlZmluZVByb3BlcnR5KCkgY2Fubm90IGJlIHVzZWQgb24gYW4gSW1tZXIgZHJhZnRcIiwxMjpcIk9iamVjdC5zZXRQcm90b3R5cGVPZigpIGNhbm5vdCBiZSB1c2VkIG9uIGFuIEltbWVyIGRyYWZ0XCIsMTM6XCJJbW1lciBvbmx5IHN1cHBvcnRzIGRlbGV0aW5nIGFycmF5IGluZGljZXNcIiwxNDpcIkltbWVyIG9ubHkgc3VwcG9ydHMgc2V0dGluZyBhcnJheSBpbmRpY2VzIGFuZCB0aGUgJ2xlbmd0aCcgcHJvcGVydHlcIiwxNTpmdW5jdGlvbihuKXtyZXR1cm5cIkNhbm5vdCBhcHBseSBwYXRjaCwgcGF0aCBkb2Vzbid0IHJlc29sdmU6IFwiK259LDE2OidTZXRzIGNhbm5vdCBoYXZlIFwicmVwbGFjZVwiIHBhdGNoZXMuJywxNzpmdW5jdGlvbihuKXtyZXR1cm5cIlVuc3VwcG9ydGVkIHBhdGNoIG9wZXJhdGlvbjogXCIrbn0sMTg6ZnVuY3Rpb24obil7cmV0dXJuXCJUaGUgcGx1Z2luIGZvciAnXCIrbitcIicgaGFzIG5vdCBiZWVuIGxvYWRlZCBpbnRvIEltbWVyLiBUbyBlbmFibGUgdGhlIHBsdWdpbiwgaW1wb3J0IGFuZCBjYWxsIGBlbmFibGVcIituK1wiKClgIHdoZW4gaW5pdGlhbGl6aW5nIHlvdXIgYXBwbGljYXRpb24uXCJ9LDIwOlwiQ2Fubm90IHVzZSBwcm94aWVzIGlmIFByb3h5LCBQcm94eS5yZXZvY2FibGUgb3IgUmVmbGVjdCBhcmUgbm90IGF2YWlsYWJsZVwiLDIxOmZ1bmN0aW9uKG4pe3JldHVyblwicHJvZHVjZSBjYW4gb25seSBiZSBjYWxsZWQgb24gdGhpbmdzIHRoYXQgYXJlIGRyYWZ0YWJsZTogcGxhaW4gb2JqZWN0cywgYXJyYXlzLCBNYXAsIFNldCBvciBjbGFzc2VzIHRoYXQgYXJlIG1hcmtlZCB3aXRoICdbaW1tZXJhYmxlXTogdHJ1ZScuIEdvdCAnXCIrbitcIidcIn0sMjI6ZnVuY3Rpb24obil7cmV0dXJuXCInY3VycmVudCcgZXhwZWN0cyBhIGRyYWZ0LCBnb3Q6IFwiK259LDIzOmZ1bmN0aW9uKG4pe3JldHVyblwiJ29yaWdpbmFsJyBleHBlY3RzIGEgZHJhZnQsIGdvdDogXCIrbn0sMjQ6XCJQYXRjaGluZyByZXNlcnZlZCBhdHRyaWJ1dGVzIGxpa2UgX19wcm90b19fLCBwcm90b3R5cGUgYW5kIGNvbnN0cnVjdG9yIGlzIG5vdCBhbGxvd2VkXCJ9LFo9XCJcIitPYmplY3QucHJvdG90eXBlLmNvbnN0cnVjdG9yLG5uPVwidW5kZWZpbmVkXCIhPXR5cGVvZiBSZWZsZWN0JiZSZWZsZWN0Lm93bktleXM/UmVmbGVjdC5vd25LZXlzOnZvaWQgMCE9PU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHM/ZnVuY3Rpb24obil7cmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKG4pLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG4pKX06T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMscm49T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnN8fGZ1bmN0aW9uKG4pe3ZhciByPXt9O3JldHVybiBubihuKS5mb3JFYWNoKChmdW5jdGlvbih0KXtyW3RdPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobix0KX0pKSxyfSx0bj17fSxlbj17Z2V0OmZ1bmN0aW9uKG4scil7aWYocj09PVEpcmV0dXJuIG47dmFyIGU9cChuKTtpZighdShlLHIpKXJldHVybiBmdW5jdGlvbihuLHIsdCl7dmFyIGUsaT1JKHIsdCk7cmV0dXJuIGk/XCJ2YWx1ZVwiaW4gaT9pLnZhbHVlOm51bGw9PT0oZT1pLmdldCl8fHZvaWQgMD09PWU/dm9pZCAwOmUuY2FsbChuLmspOnZvaWQgMH0obixlLHIpO3ZhciBpPWVbcl07cmV0dXJuIG4uSXx8IXQoaSk/aTppPT09eihuLnQscik/KEUobiksbi5vW3JdPVIobi5BLmgsaSxuKSk6aX0saGFzOmZ1bmN0aW9uKG4scil7cmV0dXJuIHIgaW4gcChuKX0sb3duS2V5czpmdW5jdGlvbihuKXtyZXR1cm4gUmVmbGVjdC5vd25LZXlzKHAobikpfSxzZXQ6ZnVuY3Rpb24obixyLHQpe3ZhciBlPUkocChuKSxyKTtpZihudWxsPT1lP3ZvaWQgMDplLnNldClyZXR1cm4gZS5zZXQuY2FsbChuLmssdCksITA7aWYoIW4uUCl7dmFyIGk9eihwKG4pLHIpLG89bnVsbD09aT92b2lkIDA6aVtRXTtpZihvJiZvLnQ9PT10KXJldHVybiBuLm9bcl09dCxuLkRbcl09ITEsITA7aWYoYyh0LGkpJiYodm9pZCAwIT09dHx8dShuLnQscikpKXJldHVybiEwO0UobiksayhuKX1yZXR1cm4gbi5vW3JdPT09dCYmXCJudW1iZXJcIiE9dHlwZW9mIHQmJih2b2lkIDAhPT10fHxyIGluIG4ubyl8fChuLm9bcl09dCxuLkRbcl09ITAsITApfSxkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbihuLHIpe3JldHVybiB2b2lkIDAhPT16KG4udCxyKXx8ciBpbiBuLnQ/KG4uRFtyXT0hMSxFKG4pLGsobikpOmRlbGV0ZSBuLkRbcl0sbi5vJiZkZWxldGUgbi5vW3JdLCEwfSxnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3I6ZnVuY3Rpb24obixyKXt2YXIgdD1wKG4pLGU9UmVmbGVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCxyKTtyZXR1cm4gZT97d3JpdGFibGU6ITAsY29uZmlndXJhYmxlOjEhPT1uLml8fFwibGVuZ3RoXCIhPT1yLGVudW1lcmFibGU6ZS5lbnVtZXJhYmxlLHZhbHVlOnRbcl19OmV9LGRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKCl7bigxMSl9LGdldFByb3RvdHlwZU9mOmZ1bmN0aW9uKG4pe3JldHVybiBPYmplY3QuZ2V0UHJvdG90eXBlT2Yobi50KX0sc2V0UHJvdG90eXBlT2Y6ZnVuY3Rpb24oKXtuKDEyKX19LG9uPXt9O2koZW4sKGZ1bmN0aW9uKG4scil7b25bbl09ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWFyZ3VtZW50c1swXVswXSxyLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSksb24uZGVsZXRlUHJvcGVydHk9ZnVuY3Rpb24ocix0KXtyZXR1cm5cInByb2R1Y3Rpb25cIiE9PXByb2Nlc3MuZW52Lk5PREVfRU5WJiZpc05hTihwYXJzZUludCh0KSkmJm4oMTMpLG9uLnNldC5jYWxsKHRoaXMscix0LHZvaWQgMCl9LG9uLnNldD1mdW5jdGlvbihyLHQsZSl7cmV0dXJuXCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmXCJsZW5ndGhcIiE9PXQmJmlzTmFOKHBhcnNlSW50KHQpKSYmbigxNCksZW4uc2V0LmNhbGwodGhpcyxyWzBdLHQsZSxyWzBdKX07dmFyIHVuPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZShyKXt2YXIgZT10aGlzO3RoaXMuZz1CLHRoaXMuRj0hMCx0aGlzLnByb2R1Y2U9ZnVuY3Rpb24ocixpLG8pe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIHImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGkpe3ZhciB1PWk7aT1yO3ZhciBhPWU7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPXRoaXM7dm9pZCAwPT09biYmKG49dSk7Zm9yKHZhciB0PWFyZ3VtZW50cy5sZW5ndGgsZT1BcnJheSh0PjE/dC0xOjApLG89MTtvPHQ7bysrKWVbby0xXT1hcmd1bWVudHNbb107cmV0dXJuIGEucHJvZHVjZShuLChmdW5jdGlvbihuKXt2YXIgdDtyZXR1cm4odD1pKS5jYWxsLmFwcGx5KHQsW3Isbl0uY29uY2F0KGUpKX0pKX19dmFyIGY7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgaSYmbig2KSx2b2lkIDAhPT1vJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiBvJiZuKDcpLHQocikpe3ZhciBjPXcoZSkscz1SKGUscix2b2lkIDApLHY9ITA7dHJ5e2Y9aShzKSx2PSExfWZpbmFsbHl7dj9PKGMpOmcoYyl9cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb21pc2UmJmYgaW5zdGFuY2VvZiBQcm9taXNlP2YudGhlbigoZnVuY3Rpb24obil7cmV0dXJuIGooYyxvKSxQKG4sYyl9KSwoZnVuY3Rpb24obil7dGhyb3cgTyhjKSxufSkpOihqKGMsbyksUChmLGMpKX1pZighcnx8XCJvYmplY3RcIiE9dHlwZW9mIHIpe2lmKHZvaWQgMD09PShmPWkocikpJiYoZj1yKSxmPT09SCYmKGY9dm9pZCAwKSxlLkYmJmQoZiwhMCksbyl7dmFyIHA9W10sbD1bXTtiKFwiUGF0Y2hlc1wiKS5NKHIsZixwLGwpLG8ocCxsKX1yZXR1cm4gZn1uKDIxLHIpfSx0aGlzLnByb2R1Y2VXaXRoUGF0Y2hlcz1mdW5jdGlvbihuLHIpe2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pcmV0dXJuIGZ1bmN0aW9uKHIpe2Zvcih2YXIgdD1hcmd1bWVudHMubGVuZ3RoLGk9QXJyYXkodD4xP3QtMTowKSxvPTE7bzx0O28rKylpW28tMV09YXJndW1lbnRzW29dO3JldHVybiBlLnByb2R1Y2VXaXRoUGF0Y2hlcyhyLChmdW5jdGlvbihyKXtyZXR1cm4gbi5hcHBseSh2b2lkIDAsW3JdLmNvbmNhdChpKSl9KSl9O3ZhciB0LGksbz1lLnByb2R1Y2UobixyLChmdW5jdGlvbihuLHIpe3Q9bixpPXJ9KSk7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb21pc2UmJm8gaW5zdGFuY2VvZiBQcm9taXNlP28udGhlbigoZnVuY3Rpb24obil7cmV0dXJuW24sdCxpXX0pKTpbbyx0LGldfSxcImJvb2xlYW5cIj09dHlwZW9mKG51bGw9PXI/dm9pZCAwOnIudXNlUHJveGllcykmJnRoaXMuc2V0VXNlUHJveGllcyhyLnVzZVByb3hpZXMpLFwiYm9vbGVhblwiPT10eXBlb2YobnVsbD09cj92b2lkIDA6ci5hdXRvRnJlZXplKSYmdGhpcy5zZXRBdXRvRnJlZXplKHIuYXV0b0ZyZWV6ZSl9dmFyIGk9ZS5wcm90b3R5cGU7cmV0dXJuIGkuY3JlYXRlRHJhZnQ9ZnVuY3Rpb24oZSl7dChlKXx8big4KSxyKGUpJiYoZT1EKGUpKTt2YXIgaT13KHRoaXMpLG89Uih0aGlzLGUsdm9pZCAwKTtyZXR1cm4gb1tRXS5DPSEwLGcoaSksb30saS5maW5pc2hEcmFmdD1mdW5jdGlvbihyLHQpe3ZhciBlPXImJnJbUV07XCJwcm9kdWN0aW9uXCIhPT1wcm9jZXNzLmVudi5OT0RFX0VOViYmKGUmJmUuQ3x8big5KSxlLkkmJm4oMTApKTt2YXIgaT1lLkE7cmV0dXJuIGooaSx0KSxQKHZvaWQgMCxpKX0saS5zZXRBdXRvRnJlZXplPWZ1bmN0aW9uKG4pe3RoaXMuRj1ufSxpLnNldFVzZVByb3hpZXM9ZnVuY3Rpb24ocil7ciYmIUImJm4oMjApLHRoaXMuZz1yfSxpLmFwcGx5UGF0Y2hlcz1mdW5jdGlvbihuLHQpe3ZhciBlO2ZvcihlPXQubGVuZ3RoLTE7ZT49MDtlLS0pe3ZhciBpPXRbZV07aWYoMD09PWkucGF0aC5sZW5ndGgmJlwicmVwbGFjZVwiPT09aS5vcCl7bj1pLnZhbHVlO2JyZWFrfX1lPi0xJiYodD10LnNsaWNlKGUrMSkpO3ZhciBvPWIoXCJQYXRjaGVzXCIpLiQ7cmV0dXJuIHIobik/byhuLHQpOnRoaXMucHJvZHVjZShuLChmdW5jdGlvbihuKXtyZXR1cm4gbyhuLHQpfSkpfSxlfSgpLGFuPW5ldyB1bixmbj1hbi5wcm9kdWNlLGNuPWFuLnByb2R1Y2VXaXRoUGF0Y2hlcy5iaW5kKGFuKSxzbj1hbi5zZXRBdXRvRnJlZXplLmJpbmQoYW4pLHZuPWFuLnNldFVzZVByb3hpZXMuYmluZChhbikscG49YW4uYXBwbHlQYXRjaGVzLmJpbmQoYW4pLGxuPWFuLmNyZWF0ZURyYWZ0LmJpbmQoYW4pLGRuPWFuLmZpbmlzaERyYWZ0LmJpbmQoYW4pO2V4cG9ydCBkZWZhdWx0IGZuO2V4cG9ydHt1biBhcyBJbW1lcixwbiBhcyBhcHBseVBhdGNoZXMsSyBhcyBjYXN0RHJhZnQsJCBhcyBjYXN0SW1tdXRhYmxlLGxuIGFzIGNyZWF0ZURyYWZ0LEQgYXMgY3VycmVudCxKIGFzIGVuYWJsZUFsbFBsdWdpbnMsTiBhcyBlbmFibGVFUzUsQyBhcyBlbmFibGVNYXBTZXQsVCBhcyBlbmFibGVQYXRjaGVzLGRuIGFzIGZpbmlzaERyYWZ0LGQgYXMgZnJlZXplLEwgYXMgaW1tZXJhYmxlLHIgYXMgaXNEcmFmdCx0IGFzIGlzRHJhZnRhYmxlLEggYXMgbm90aGluZyxlIGFzIG9yaWdpbmFsLGZuIGFzIHByb2R1Y2UsY24gYXMgcHJvZHVjZVdpdGhQYXRjaGVzLHNuIGFzIHNldEF1dG9GcmVlemUsdm4gYXMgc2V0VXNlUHJveGllc307XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbW1lci5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/immer/dist/immer.esm.js\n");

/***/ }),

/***/ "./node_modules/reselect/es/defaultMemoize.js":
/*!****************************************************!*\
  !*** ./node_modules/reselect/es/defaultMemoize.js ***!
  \****************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultEqualityCheck\": () => (/* binding */ defaultEqualityCheck),\n/* harmony export */   \"createCacheKeyComparator\": () => (/* binding */ createCacheKeyComparator),\n/* harmony export */   \"defaultMemoize\": () => (/* binding */ defaultMemoize)\n/* harmony export */ });\n// Cache implementation based on Erik Rasmussen's `lru-memoize`:\n// https://github.com/erikras/lru-memoize\nvar NOT_FOUND = 'NOT_FOUND';\n\nfunction createSingletonCache(equals) {\n  var entry;\n  return {\n    get: function get(key) {\n      if (entry && equals(entry.key, key)) {\n        return entry.value;\n      }\n\n      return NOT_FOUND;\n    },\n    put: function put(key, value) {\n      entry = {\n        key: key,\n        value: value\n      };\n    },\n    getEntries: function getEntries() {\n      return entry ? [entry] : [];\n    },\n    clear: function clear() {\n      entry = undefined;\n    }\n  };\n}\n\nfunction createLruCache(maxSize, equals) {\n  var entries = [];\n\n  function get(key) {\n    var cacheIndex = entries.findIndex(function (entry) {\n      return equals(key, entry.key);\n    }); // We found a cached entry\n\n    if (cacheIndex > -1) {\n      var entry = entries[cacheIndex]; // Cached entry not at top of cache, move it to the top\n\n      if (cacheIndex > 0) {\n        entries.splice(cacheIndex, 1);\n        entries.unshift(entry);\n      }\n\n      return entry.value;\n    } // No entry found in cache, return sentinel\n\n\n    return NOT_FOUND;\n  }\n\n  function put(key, value) {\n    if (get(key) === NOT_FOUND) {\n      // TODO Is unshift slow?\n      entries.unshift({\n        key: key,\n        value: value\n      });\n\n      if (entries.length > maxSize) {\n        entries.pop();\n      }\n    }\n  }\n\n  function getEntries() {\n    return entries;\n  }\n\n  function clear() {\n    entries = [];\n  }\n\n  return {\n    get: get,\n    put: put,\n    getEntries: getEntries,\n    clear: clear\n  };\n}\n\nvar defaultEqualityCheck = function defaultEqualityCheck(a, b) {\n  return a === b;\n};\nfunction createCacheKeyComparator(equalityCheck) {\n  return function areArgumentsShallowlyEqual(prev, next) {\n    if (prev === null || next === null || prev.length !== next.length) {\n      return false;\n    } // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n\n\n    var length = prev.length;\n\n    for (var i = 0; i < length; i++) {\n      if (!equalityCheck(prev[i], next[i])) {\n        return false;\n      }\n    }\n\n    return true;\n  };\n}\n// defaultMemoize now supports a configurable cache size with LRU behavior,\n// and optional comparison of the result value with existing values\nfunction defaultMemoize(func, equalityCheckOrOptions) {\n  var providedOptions = typeof equalityCheckOrOptions === 'object' ? equalityCheckOrOptions : {\n    equalityCheck: equalityCheckOrOptions\n  };\n  var _providedOptions$equa = providedOptions.equalityCheck,\n      equalityCheck = _providedOptions$equa === void 0 ? defaultEqualityCheck : _providedOptions$equa,\n      _providedOptions$maxS = providedOptions.maxSize,\n      maxSize = _providedOptions$maxS === void 0 ? 1 : _providedOptions$maxS,\n      resultEqualityCheck = providedOptions.resultEqualityCheck;\n  var comparator = createCacheKeyComparator(equalityCheck);\n  var cache = maxSize === 1 ? createSingletonCache(comparator) : createLruCache(maxSize, comparator); // we reference arguments instead of spreading them for performance reasons\n\n  function memoized() {\n    var value = cache.get(arguments);\n\n    if (value === NOT_FOUND) {\n      // @ts-ignore\n      value = func.apply(null, arguments);\n\n      if (resultEqualityCheck) {\n        var entries = cache.getEntries();\n        var matchingEntry = entries.find(function (entry) {\n          return resultEqualityCheck(entry.value, value);\n        });\n\n        if (matchingEntry) {\n          value = matchingEntry.value;\n        }\n      }\n\n      cache.put(arguments, value);\n    }\n\n    return value;\n  }\n\n  memoized.clearCache = function () {\n    return cache.clear();\n  };\n\n  return memoized;\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcmVzZWxlY3QvZXMvZGVmYXVsdE1lbW9pemUuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FndGFpbC8uL25vZGVfbW9kdWxlcy9yZXNlbGVjdC9lcy9kZWZhdWx0TWVtb2l6ZS5qcz8xMmM4Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIENhY2hlIGltcGxlbWVudGF0aW9uIGJhc2VkIG9uIEVyaWsgUmFzbXVzc2VuJ3MgYGxydS1tZW1vaXplYDpcbi8vIGh0dHBzOi8vZ2l0aHViLmNvbS9lcmlrcmFzL2xydS1tZW1vaXplXG52YXIgTk9UX0ZPVU5EID0gJ05PVF9GT1VORCc7XG5cbmZ1bmN0aW9uIGNyZWF0ZVNpbmdsZXRvbkNhY2hlKGVxdWFscykge1xuICB2YXIgZW50cnk7XG4gIHJldHVybiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoa2V5KSB7XG4gICAgICBpZiAoZW50cnkgJiYgZXF1YWxzKGVudHJ5LmtleSwga2V5KSkge1xuICAgICAgICByZXR1cm4gZW50cnkudmFsdWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBOT1RfRk9VTkQ7XG4gICAgfSxcbiAgICBwdXQ6IGZ1bmN0aW9uIHB1dChrZXksIHZhbHVlKSB7XG4gICAgICBlbnRyeSA9IHtcbiAgICAgICAga2V5OiBrZXksXG4gICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgfTtcbiAgICB9LFxuICAgIGdldEVudHJpZXM6IGZ1bmN0aW9uIGdldEVudHJpZXMoKSB7XG4gICAgICByZXR1cm4gZW50cnkgPyBbZW50cnldIDogW107XG4gICAgfSxcbiAgICBjbGVhcjogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICBlbnRyeSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUxydUNhY2hlKG1heFNpemUsIGVxdWFscykge1xuICB2YXIgZW50cmllcyA9IFtdO1xuXG4gIGZ1bmN0aW9uIGdldChrZXkpIHtcbiAgICB2YXIgY2FjaGVJbmRleCA9IGVudHJpZXMuZmluZEluZGV4KGZ1bmN0aW9uIChlbnRyeSkge1xuICAgICAgcmV0dXJuIGVxdWFscyhrZXksIGVudHJ5LmtleSk7XG4gICAgfSk7IC8vIFdlIGZvdW5kIGEgY2FjaGVkIGVudHJ5XG5cbiAgICBpZiAoY2FjaGVJbmRleCA+IC0xKSB7XG4gICAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2NhY2hlSW5kZXhdOyAvLyBDYWNoZWQgZW50cnkgbm90IGF0IHRvcCBvZiBjYWNoZSwgbW92ZSBpdCB0byB0aGUgdG9wXG5cbiAgICAgIGlmIChjYWNoZUluZGV4ID4gMCkge1xuICAgICAgICBlbnRyaWVzLnNwbGljZShjYWNoZUluZGV4LCAxKTtcbiAgICAgICAgZW50cmllcy51bnNoaWZ0KGVudHJ5KTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGVudHJ5LnZhbHVlO1xuICAgIH0gLy8gTm8gZW50cnkgZm91bmQgaW4gY2FjaGUsIHJldHVybiBzZW50aW5lbFxuXG5cbiAgICByZXR1cm4gTk9UX0ZPVU5EO1xuICB9XG5cbiAgZnVuY3Rpb24gcHV0KGtleSwgdmFsdWUpIHtcbiAgICBpZiAoZ2V0KGtleSkgPT09IE5PVF9GT1VORCkge1xuICAgICAgLy8gVE9ETyBJcyB1bnNoaWZ0IHNsb3c/XG4gICAgICBlbnRyaWVzLnVuc2hpZnQoe1xuICAgICAgICBrZXk6IGtleSxcbiAgICAgICAgdmFsdWU6IHZhbHVlXG4gICAgICB9KTtcblxuICAgICAgaWYgKGVudHJpZXMubGVuZ3RoID4gbWF4U2l6ZSkge1xuICAgICAgICBlbnRyaWVzLnBvcCgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEVudHJpZXMoKSB7XG4gICAgcmV0dXJuIGVudHJpZXM7XG4gIH1cblxuICBmdW5jdGlvbiBjbGVhcigpIHtcbiAgICBlbnRyaWVzID0gW107XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGdldDogZ2V0LFxuICAgIHB1dDogcHV0LFxuICAgIGdldEVudHJpZXM6IGdldEVudHJpZXMsXG4gICAgY2xlYXI6IGNsZWFyXG4gIH07XG59XG5cbmV4cG9ydCB2YXIgZGVmYXVsdEVxdWFsaXR5Q2hlY2sgPSBmdW5jdGlvbiBkZWZhdWx0RXF1YWxpdHlDaGVjayhhLCBiKSB7XG4gIHJldHVybiBhID09PSBiO1xufTtcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDYWNoZUtleUNvbXBhcmF0b3IoZXF1YWxpdHlDaGVjaykge1xuICByZXR1cm4gZnVuY3Rpb24gYXJlQXJndW1lbnRzU2hhbGxvd2x5RXF1YWwocHJldiwgbmV4dCkge1xuICAgIGlmIChwcmV2ID09PSBudWxsIHx8IG5leHQgPT09IG51bGwgfHwgcHJldi5sZW5ndGggIT09IG5leHQubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSAvLyBEbyB0aGlzIGluIGEgZm9yIGxvb3AgKGFuZCBub3QgYSBgZm9yRWFjaGAgb3IgYW4gYGV2ZXJ5YCkgc28gd2UgY2FuIGRldGVybWluZSBlcXVhbGl0eSBhcyBmYXN0IGFzIHBvc3NpYmxlLlxuXG5cbiAgICB2YXIgbGVuZ3RoID0gcHJldi5sZW5ndGg7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICBpZiAoIWVxdWFsaXR5Q2hlY2socHJldltpXSwgbmV4dFtpXSkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9O1xufVxuLy8gZGVmYXVsdE1lbW9pemUgbm93IHN1cHBvcnRzIGEgY29uZmlndXJhYmxlIGNhY2hlIHNpemUgd2l0aCBMUlUgYmVoYXZpb3IsXG4vLyBhbmQgb3B0aW9uYWwgY29tcGFyaXNvbiBvZiB0aGUgcmVzdWx0IHZhbHVlIHdpdGggZXhpc3RpbmcgdmFsdWVzXG5leHBvcnQgZnVuY3Rpb24gZGVmYXVsdE1lbW9pemUoZnVuYywgZXF1YWxpdHlDaGVja09yT3B0aW9ucykge1xuICB2YXIgcHJvdmlkZWRPcHRpb25zID0gdHlwZW9mIGVxdWFsaXR5Q2hlY2tPck9wdGlvbnMgPT09ICdvYmplY3QnID8gZXF1YWxpdHlDaGVja09yT3B0aW9ucyA6IHtcbiAgICBlcXVhbGl0eUNoZWNrOiBlcXVhbGl0eUNoZWNrT3JPcHRpb25zXG4gIH07XG4gIHZhciBfcHJvdmlkZWRPcHRpb25zJGVxdWEgPSBwcm92aWRlZE9wdGlvbnMuZXF1YWxpdHlDaGVjayxcbiAgICAgIGVxdWFsaXR5Q2hlY2sgPSBfcHJvdmlkZWRPcHRpb25zJGVxdWEgPT09IHZvaWQgMCA/IGRlZmF1bHRFcXVhbGl0eUNoZWNrIDogX3Byb3ZpZGVkT3B0aW9ucyRlcXVhLFxuICAgICAgX3Byb3ZpZGVkT3B0aW9ucyRtYXhTID0gcHJvdmlkZWRPcHRpb25zLm1heFNpemUsXG4gICAgICBtYXhTaXplID0gX3Byb3ZpZGVkT3B0aW9ucyRtYXhTID09PSB2b2lkIDAgPyAxIDogX3Byb3ZpZGVkT3B0aW9ucyRtYXhTLFxuICAgICAgcmVzdWx0RXF1YWxpdHlDaGVjayA9IHByb3ZpZGVkT3B0aW9ucy5yZXN1bHRFcXVhbGl0eUNoZWNrO1xuICB2YXIgY29tcGFyYXRvciA9IGNyZWF0ZUNhY2hlS2V5Q29tcGFyYXRvcihlcXVhbGl0eUNoZWNrKTtcbiAgdmFyIGNhY2hlID0gbWF4U2l6ZSA9PT0gMSA/IGNyZWF0ZVNpbmdsZXRvbkNhY2hlKGNvbXBhcmF0b3IpIDogY3JlYXRlTHJ1Q2FjaGUobWF4U2l6ZSwgY29tcGFyYXRvcik7IC8vIHdlIHJlZmVyZW5jZSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgdGhlbSBmb3IgcGVyZm9ybWFuY2UgcmVhc29uc1xuXG4gIGZ1bmN0aW9uIG1lbW9pemVkKCkge1xuICAgIHZhciB2YWx1ZSA9IGNhY2hlLmdldChhcmd1bWVudHMpO1xuXG4gICAgaWYgKHZhbHVlID09PSBOT1RfRk9VTkQpIHtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHZhbHVlID0gZnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuXG4gICAgICBpZiAocmVzdWx0RXF1YWxpdHlDaGVjaykge1xuICAgICAgICB2YXIgZW50cmllcyA9IGNhY2hlLmdldEVudHJpZXMoKTtcbiAgICAgICAgdmFyIG1hdGNoaW5nRW50cnkgPSBlbnRyaWVzLmZpbmQoZnVuY3Rpb24gKGVudHJ5KSB7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdEVxdWFsaXR5Q2hlY2soZW50cnkudmFsdWUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG1hdGNoaW5nRW50cnkpIHtcbiAgICAgICAgICB2YWx1ZSA9IG1hdGNoaW5nRW50cnkudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY2FjaGUucHV0KGFyZ3VtZW50cywgdmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIG1lbW9pemVkLmNsZWFyQ2FjaGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGNhY2hlLmNsZWFyKCk7XG4gIH07XG5cbiAgcmV0dXJuIG1lbW9pemVkO1xufSJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./node_modules/reselect/es/defaultMemoize.js\n");

/***/ }),

/***/ "./node_modules/reselect/es/index.js":
/*!*******************************************!*\
  !*** ./node_modules/reselect/es/index.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"defaultMemoize\": () => (/* reexport safe */ _defaultMemoize__WEBPACK_IMPORTED_MODULE_0__.defaultMemoize),\n/* harmony export */   \"defaultEqualityCheck\": () => (/* reexport safe */ _defaultMemoize__WEBPACK_IMPORTED_MODULE_0__.defaultEqualityCheck),\n/* harmony export */   \"createSelectorCreator\": () => (/* binding */ createSelectorCreator),\n/* harmony export */   \"createSelector\": () => (/* binding */ createSelector),\n/* harmony export */   \"createStructuredSelector\": () => (/* binding */ createStructuredSelector)\n/* harmony export */ });\n/* harmony import */ var _defaultMemoize__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./defaultMemoize */ \"./node_modules/reselect/es/defaultMemoize.js\");\n\n\n\nfunction getDependencies(funcs) {\n  var dependencies = Array.isArray(funcs[0]) ? funcs[0] : funcs;\n\n  if (!dependencies.every(function (dep) {\n    return typeof dep === 'function';\n  })) {\n    var dependencyTypes = dependencies.map(function (dep) {\n      return typeof dep === 'function' ? \"function \" + (dep.name || 'unnamed') + \"()\" : typeof dep;\n    }).join(', ');\n    throw new Error(\"createSelector expects all input-selectors to be functions, but received the following types: [\" + dependencyTypes + \"]\");\n  }\n\n  return dependencies;\n}\n\nfunction createSelectorCreator(memoize) {\n  for (var _len = arguments.length, memoizeOptionsFromArgs = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    memoizeOptionsFromArgs[_key - 1] = arguments[_key];\n  }\n\n  var createSelector = function createSelector() {\n    for (var _len2 = arguments.length, funcs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      funcs[_key2] = arguments[_key2];\n    }\n\n    var _recomputations = 0;\n\n    var _lastResult; // Due to the intricacies of rest params, we can't do an optional arg after `...funcs`.\n    // So, start by declaring the default value here.\n    // (And yes, the words 'memoize' and 'options' appear too many times in this next sequence.)\n\n\n    var directlyPassedOptions = {\n      memoizeOptions: undefined\n    }; // Normally, the result func or \"output selector\" is the last arg\n\n    var resultFunc = funcs.pop(); // If the result func is actually an _object_, assume it's our options object\n\n    if (typeof resultFunc === 'object') {\n      directlyPassedOptions = resultFunc; // and pop the real result func off\n\n      resultFunc = funcs.pop();\n    }\n\n    if (typeof resultFunc !== 'function') {\n      throw new Error(\"createSelector expects an output function after the inputs, but received: [\" + typeof resultFunc + \"]\");\n    } // Determine which set of options we're using. Prefer options passed directly,\n    // but fall back to options given to createSelectorCreator.\n\n\n    var _directlyPassedOption = directlyPassedOptions,\n        _directlyPassedOption2 = _directlyPassedOption.memoizeOptions,\n        memoizeOptions = _directlyPassedOption2 === void 0 ? memoizeOptionsFromArgs : _directlyPassedOption2; // Simplifying assumption: it's unlikely that the first options arg of the provided memoizer\n    // is an array. In most libs I've looked at, it's an equality function or options object.\n    // Based on that, if `memoizeOptions` _is_ an array, we assume it's a full\n    // user-provided array of options. Otherwise, it must be just the _first_ arg, and so\n    // we wrap it in an array so we can apply it.\n\n    var finalMemoizeOptions = Array.isArray(memoizeOptions) ? memoizeOptions : [memoizeOptions];\n    var dependencies = getDependencies(funcs);\n    var memoizedResultFunc = memoize.apply(void 0, [function () {\n      _recomputations++; // apply arguments instead of spreading for performance.\n\n      return resultFunc.apply(null, arguments);\n    }].concat(finalMemoizeOptions)); // If a selector is called with the exact same arguments we don't need to traverse our dependencies again.\n\n    var selector = memoize(function () {\n      var params = [];\n      var length = dependencies.length;\n\n      for (var i = 0; i < length; i++) {\n        // apply arguments instead of spreading and mutate a local list of params for performance.\n        // @ts-ignore\n        params.push(dependencies[i].apply(null, arguments));\n      } // apply arguments instead of spreading for performance.\n\n\n      _lastResult = memoizedResultFunc.apply(null, params);\n      return _lastResult;\n    });\n    Object.assign(selector, {\n      resultFunc: resultFunc,\n      memoizedResultFunc: memoizedResultFunc,\n      dependencies: dependencies,\n      lastResult: function lastResult() {\n        return _lastResult;\n      },\n      recomputations: function recomputations() {\n        return _recomputations;\n      },\n      resetRecomputations: function resetRecomputations() {\n        return _recomputations = 0;\n      }\n    });\n    return selector;\n  }; // @ts-ignore\n\n\n  return createSelector;\n}\nvar createSelector = /* #__PURE__ */createSelectorCreator(_defaultMemoize__WEBPACK_IMPORTED_MODULE_0__.defaultMemoize);\n// Manual definition of state and output arguments\nvar createStructuredSelector = function createStructuredSelector(selectors, selectorCreator) {\n  if (selectorCreator === void 0) {\n    selectorCreator = createSelector;\n  }\n\n  if (typeof selectors !== 'object') {\n    throw new Error('createStructuredSelector expects first argument to be an object ' + (\"where each property is a selector, instead received a \" + typeof selectors));\n  }\n\n  var objectKeys = Object.keys(selectors);\n  var resultSelector = selectorCreator( // @ts-ignore\n  objectKeys.map(function (key) {\n    return selectors[key];\n  }), function () {\n    for (var _len3 = arguments.length, values = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n      values[_key3] = arguments[_key3];\n    }\n\n    return values.reduce(function (composition, value, index) {\n      composition[objectKeys[index]] = value;\n      return composition;\n    }, {});\n  });\n  return resultSelector;\n};//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvcmVzZWxlY3QvZXMvaW5kZXguanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vbm9kZV9tb2R1bGVzL3Jlc2VsZWN0L2VzL2luZGV4LmpzPzFiOGEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVmYXVsdE1lbW9pemUsIGRlZmF1bHRFcXVhbGl0eUNoZWNrIH0gZnJvbSAnLi9kZWZhdWx0TWVtb2l6ZSc7XG5leHBvcnQgeyBkZWZhdWx0TWVtb2l6ZSwgZGVmYXVsdEVxdWFsaXR5Q2hlY2sgfTtcblxuZnVuY3Rpb24gZ2V0RGVwZW5kZW5jaWVzKGZ1bmNzKSB7XG4gIHZhciBkZXBlbmRlbmNpZXMgPSBBcnJheS5pc0FycmF5KGZ1bmNzWzBdKSA/IGZ1bmNzWzBdIDogZnVuY3M7XG5cbiAgaWYgKCFkZXBlbmRlbmNpZXMuZXZlcnkoZnVuY3Rpb24gKGRlcCkge1xuICAgIHJldHVybiB0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nO1xuICB9KSkge1xuICAgIHZhciBkZXBlbmRlbmN5VHlwZXMgPSBkZXBlbmRlbmNpZXMubWFwKGZ1bmN0aW9uIChkZXApIHtcbiAgICAgIHJldHVybiB0eXBlb2YgZGVwID09PSAnZnVuY3Rpb24nID8gXCJmdW5jdGlvbiBcIiArIChkZXAubmFtZSB8fCAndW5uYW1lZCcpICsgXCIoKVwiIDogdHlwZW9mIGRlcDtcbiAgICB9KS5qb2luKCcsICcpO1xuICAgIHRocm93IG5ldyBFcnJvcihcImNyZWF0ZVNlbGVjdG9yIGV4cGVjdHMgYWxsIGlucHV0LXNlbGVjdG9ycyB0byBiZSBmdW5jdGlvbnMsIGJ1dCByZWNlaXZlZCB0aGUgZm9sbG93aW5nIHR5cGVzOiBbXCIgKyBkZXBlbmRlbmN5VHlwZXMgKyBcIl1cIik7XG4gIH1cblxuICByZXR1cm4gZGVwZW5kZW5jaWVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3JDcmVhdG9yKG1lbW9pemUpIHtcbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIG1lbW9pemVPcHRpb25zRnJvbUFyZ3MgPSBuZXcgQXJyYXkoX2xlbiA+IDEgPyBfbGVuIC0gMSA6IDApLCBfa2V5ID0gMTsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuICAgIG1lbW9pemVPcHRpb25zRnJvbUFyZ3NbX2tleSAtIDFdID0gYXJndW1lbnRzW19rZXldO1xuICB9XG5cbiAgdmFyIGNyZWF0ZVNlbGVjdG9yID0gZnVuY3Rpb24gY3JlYXRlU2VsZWN0b3IoKSB7XG4gICAgZm9yICh2YXIgX2xlbjIgPSBhcmd1bWVudHMubGVuZ3RoLCBmdW5jcyA9IG5ldyBBcnJheShfbGVuMiksIF9rZXkyID0gMDsgX2tleTIgPCBfbGVuMjsgX2tleTIrKykge1xuICAgICAgZnVuY3NbX2tleTJdID0gYXJndW1lbnRzW19rZXkyXTtcbiAgICB9XG5cbiAgICB2YXIgX3JlY29tcHV0YXRpb25zID0gMDtcblxuICAgIHZhciBfbGFzdFJlc3VsdDsgLy8gRHVlIHRvIHRoZSBpbnRyaWNhY2llcyBvZiByZXN0IHBhcmFtcywgd2UgY2FuJ3QgZG8gYW4gb3B0aW9uYWwgYXJnIGFmdGVyIGAuLi5mdW5jc2AuXG4gICAgLy8gU28sIHN0YXJ0IGJ5IGRlY2xhcmluZyB0aGUgZGVmYXVsdCB2YWx1ZSBoZXJlLlxuICAgIC8vIChBbmQgeWVzLCB0aGUgd29yZHMgJ21lbW9pemUnIGFuZCAnb3B0aW9ucycgYXBwZWFyIHRvbyBtYW55IHRpbWVzIGluIHRoaXMgbmV4dCBzZXF1ZW5jZS4pXG5cblxuICAgIHZhciBkaXJlY3RseVBhc3NlZE9wdGlvbnMgPSB7XG4gICAgICBtZW1vaXplT3B0aW9uczogdW5kZWZpbmVkXG4gICAgfTsgLy8gTm9ybWFsbHksIHRoZSByZXN1bHQgZnVuYyBvciBcIm91dHB1dCBzZWxlY3RvclwiIGlzIHRoZSBsYXN0IGFyZ1xuXG4gICAgdmFyIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTsgLy8gSWYgdGhlIHJlc3VsdCBmdW5jIGlzIGFjdHVhbGx5IGFuIF9vYmplY3RfLCBhc3N1bWUgaXQncyBvdXIgb3B0aW9ucyBvYmplY3RcblxuICAgIGlmICh0eXBlb2YgcmVzdWx0RnVuYyA9PT0gJ29iamVjdCcpIHtcbiAgICAgIGRpcmVjdGx5UGFzc2VkT3B0aW9ucyA9IHJlc3VsdEZ1bmM7IC8vIGFuZCBwb3AgdGhlIHJlYWwgcmVzdWx0IGZ1bmMgb2ZmXG5cbiAgICAgIHJlc3VsdEZ1bmMgPSBmdW5jcy5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHJlc3VsdEZ1bmMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcImNyZWF0ZVNlbGVjdG9yIGV4cGVjdHMgYW4gb3V0cHV0IGZ1bmN0aW9uIGFmdGVyIHRoZSBpbnB1dHMsIGJ1dCByZWNlaXZlZDogW1wiICsgdHlwZW9mIHJlc3VsdEZ1bmMgKyBcIl1cIik7XG4gICAgfSAvLyBEZXRlcm1pbmUgd2hpY2ggc2V0IG9mIG9wdGlvbnMgd2UncmUgdXNpbmcuIFByZWZlciBvcHRpb25zIHBhc3NlZCBkaXJlY3RseSxcbiAgICAvLyBidXQgZmFsbCBiYWNrIHRvIG9wdGlvbnMgZ2l2ZW4gdG8gY3JlYXRlU2VsZWN0b3JDcmVhdG9yLlxuXG5cbiAgICB2YXIgX2RpcmVjdGx5UGFzc2VkT3B0aW9uID0gZGlyZWN0bHlQYXNzZWRPcHRpb25zLFxuICAgICAgICBfZGlyZWN0bHlQYXNzZWRPcHRpb24yID0gX2RpcmVjdGx5UGFzc2VkT3B0aW9uLm1lbW9pemVPcHRpb25zLFxuICAgICAgICBtZW1vaXplT3B0aW9ucyA9IF9kaXJlY3RseVBhc3NlZE9wdGlvbjIgPT09IHZvaWQgMCA/IG1lbW9pemVPcHRpb25zRnJvbUFyZ3MgOiBfZGlyZWN0bHlQYXNzZWRPcHRpb24yOyAvLyBTaW1wbGlmeWluZyBhc3N1bXB0aW9uOiBpdCdzIHVubGlrZWx5IHRoYXQgdGhlIGZpcnN0IG9wdGlvbnMgYXJnIG9mIHRoZSBwcm92aWRlZCBtZW1vaXplclxuICAgIC8vIGlzIGFuIGFycmF5LiBJbiBtb3N0IGxpYnMgSSd2ZSBsb29rZWQgYXQsIGl0J3MgYW4gZXF1YWxpdHkgZnVuY3Rpb24gb3Igb3B0aW9ucyBvYmplY3QuXG4gICAgLy8gQmFzZWQgb24gdGhhdCwgaWYgYG1lbW9pemVPcHRpb25zYCBfaXNfIGFuIGFycmF5LCB3ZSBhc3N1bWUgaXQncyBhIGZ1bGxcbiAgICAvLyB1c2VyLXByb3ZpZGVkIGFycmF5IG9mIG9wdGlvbnMuIE90aGVyd2lzZSwgaXQgbXVzdCBiZSBqdXN0IHRoZSBfZmlyc3RfIGFyZywgYW5kIHNvXG4gICAgLy8gd2Ugd3JhcCBpdCBpbiBhbiBhcnJheSBzbyB3ZSBjYW4gYXBwbHkgaXQuXG5cbiAgICB2YXIgZmluYWxNZW1vaXplT3B0aW9ucyA9IEFycmF5LmlzQXJyYXkobWVtb2l6ZU9wdGlvbnMpID8gbWVtb2l6ZU9wdGlvbnMgOiBbbWVtb2l6ZU9wdGlvbnNdO1xuICAgIHZhciBkZXBlbmRlbmNpZXMgPSBnZXREZXBlbmRlbmNpZXMoZnVuY3MpO1xuICAgIHZhciBtZW1vaXplZFJlc3VsdEZ1bmMgPSBtZW1vaXplLmFwcGx5KHZvaWQgMCwgW2Z1bmN0aW9uICgpIHtcbiAgICAgIF9yZWNvbXB1dGF0aW9ucysrOyAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuXG4gICAgICByZXR1cm4gcmVzdWx0RnVuYy5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgIH1dLmNvbmNhdChmaW5hbE1lbW9pemVPcHRpb25zKSk7IC8vIElmIGEgc2VsZWN0b3IgaXMgY2FsbGVkIHdpdGggdGhlIGV4YWN0IHNhbWUgYXJndW1lbnRzIHdlIGRvbid0IG5lZWQgdG8gdHJhdmVyc2Ugb3VyIGRlcGVuZGVuY2llcyBhZ2Fpbi5cblxuICAgIHZhciBzZWxlY3RvciA9IG1lbW9pemUoZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgICAgdmFyIGxlbmd0aCA9IGRlcGVuZGVuY2llcy5sZW5ndGg7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgLy8gYXBwbHkgYXJndW1lbnRzIGluc3RlYWQgb2Ygc3ByZWFkaW5nIGFuZCBtdXRhdGUgYSBsb2NhbCBsaXN0IG9mIHBhcmFtcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgcGFyYW1zLnB1c2goZGVwZW5kZW5jaWVzW2ldLmFwcGx5KG51bGwsIGFyZ3VtZW50cykpO1xuICAgICAgfSAvLyBhcHBseSBhcmd1bWVudHMgaW5zdGVhZCBvZiBzcHJlYWRpbmcgZm9yIHBlcmZvcm1hbmNlLlxuXG5cbiAgICAgIF9sYXN0UmVzdWx0ID0gbWVtb2l6ZWRSZXN1bHRGdW5jLmFwcGx5KG51bGwsIHBhcmFtcyk7XG4gICAgICByZXR1cm4gX2xhc3RSZXN1bHQ7XG4gICAgfSk7XG4gICAgT2JqZWN0LmFzc2lnbihzZWxlY3Rvciwge1xuICAgICAgcmVzdWx0RnVuYzogcmVzdWx0RnVuYyxcbiAgICAgIG1lbW9pemVkUmVzdWx0RnVuYzogbWVtb2l6ZWRSZXN1bHRGdW5jLFxuICAgICAgZGVwZW5kZW5jaWVzOiBkZXBlbmRlbmNpZXMsXG4gICAgICBsYXN0UmVzdWx0OiBmdW5jdGlvbiBsYXN0UmVzdWx0KCkge1xuICAgICAgICByZXR1cm4gX2xhc3RSZXN1bHQ7XG4gICAgICB9LFxuICAgICAgcmVjb21wdXRhdGlvbnM6IGZ1bmN0aW9uIHJlY29tcHV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gX3JlY29tcHV0YXRpb25zO1xuICAgICAgfSxcbiAgICAgIHJlc2V0UmVjb21wdXRhdGlvbnM6IGZ1bmN0aW9uIHJlc2V0UmVjb21wdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiBfcmVjb21wdXRhdGlvbnMgPSAwO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBzZWxlY3RvcjtcbiAgfTsgLy8gQHRzLWlnbm9yZVxuXG5cbiAgcmV0dXJuIGNyZWF0ZVNlbGVjdG9yO1xufVxuZXhwb3J0IHZhciBjcmVhdGVTZWxlY3RvciA9IC8qICNfX1BVUkVfXyAqL2NyZWF0ZVNlbGVjdG9yQ3JlYXRvcihkZWZhdWx0TWVtb2l6ZSk7XG4vLyBNYW51YWwgZGVmaW5pdGlvbiBvZiBzdGF0ZSBhbmQgb3V0cHV0IGFyZ3VtZW50c1xuZXhwb3J0IHZhciBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3IgPSBmdW5jdGlvbiBjcmVhdGVTdHJ1Y3R1cmVkU2VsZWN0b3Ioc2VsZWN0b3JzLCBzZWxlY3RvckNyZWF0b3IpIHtcbiAgaWYgKHNlbGVjdG9yQ3JlYXRvciA9PT0gdm9pZCAwKSB7XG4gICAgc2VsZWN0b3JDcmVhdG9yID0gY3JlYXRlU2VsZWN0b3I7XG4gIH1cblxuICBpZiAodHlwZW9mIHNlbGVjdG9ycyAhPT0gJ29iamVjdCcpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ2NyZWF0ZVN0cnVjdHVyZWRTZWxlY3RvciBleHBlY3RzIGZpcnN0IGFyZ3VtZW50IHRvIGJlIGFuIG9iamVjdCAnICsgKFwid2hlcmUgZWFjaCBwcm9wZXJ0eSBpcyBhIHNlbGVjdG9yLCBpbnN0ZWFkIHJlY2VpdmVkIGEgXCIgKyB0eXBlb2Ygc2VsZWN0b3JzKSk7XG4gIH1cblxuICB2YXIgb2JqZWN0S2V5cyA9IE9iamVjdC5rZXlzKHNlbGVjdG9ycyk7XG4gIHZhciByZXN1bHRTZWxlY3RvciA9IHNlbGVjdG9yQ3JlYXRvciggLy8gQHRzLWlnbm9yZVxuICBvYmplY3RLZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHNlbGVjdG9yc1trZXldO1xuICB9KSwgZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIF9sZW4zID0gYXJndW1lbnRzLmxlbmd0aCwgdmFsdWVzID0gbmV3IEFycmF5KF9sZW4zKSwgX2tleTMgPSAwOyBfa2V5MyA8IF9sZW4zOyBfa2V5MysrKSB7XG4gICAgICB2YWx1ZXNbX2tleTNdID0gYXJndW1lbnRzW19rZXkzXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzLnJlZHVjZShmdW5jdGlvbiAoY29tcG9zaXRpb24sIHZhbHVlLCBpbmRleCkge1xuICAgICAgY29tcG9zaXRpb25bb2JqZWN0S2V5c1tpbmRleF1dID0gdmFsdWU7XG4gICAgICByZXR1cm4gY29tcG9zaXRpb247XG4gICAgfSwge30pO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdFNlbGVjdG9yO1xufTsiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./node_modules/reselect/es/index.js\n");

/***/ }),

/***/ "./client/src/components/CommentApp/actions/comments.ts":
/*!**************************************************************!*\
  !*** ./client/src/components/CommentApp/actions/comments.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.commentActionFunctions = exports.invalidateContentPath = exports.deleteReply = exports.updateReply = exports.addReply = exports.setFocusedComment = exports.resolveComment = exports.deleteComment = exports.updateComment = exports.addComment = exports.INVALIDATE_CONTENT_PATH = exports.DELETE_REPLY = exports.UPDATE_REPLY = exports.ADD_REPLY = exports.SET_PINNED_COMMENT = exports.SET_FOCUSED_COMMENT = exports.RESOLVE_COMMENT = exports.DELETE_COMMENT = exports.UPDATE_COMMENT = exports.ADD_COMMENT = void 0;\nexports.ADD_COMMENT = 'add-comment';\nexports.UPDATE_COMMENT = 'update-comment';\nexports.DELETE_COMMENT = 'delete-comment';\nexports.RESOLVE_COMMENT = 'resolve-comment';\nexports.SET_FOCUSED_COMMENT = 'set-focused-comment';\nexports.SET_PINNED_COMMENT = 'set-pinned-comment';\nexports.ADD_REPLY = 'add-reply';\nexports.UPDATE_REPLY = 'update-reply';\nexports.DELETE_REPLY = 'delete-reply';\nexports.INVALIDATE_CONTENT_PATH = 'invalidate-content-path';\nfunction addComment(comment) {\n    return {\n        type: exports.ADD_COMMENT,\n        comment: comment\n    };\n}\nexports.addComment = addComment;\nfunction updateComment(commentId, update) {\n    return {\n        type: exports.UPDATE_COMMENT,\n        commentId: commentId,\n        update: update\n    };\n}\nexports.updateComment = updateComment;\nfunction deleteComment(commentId) {\n    return {\n        type: exports.DELETE_COMMENT,\n        commentId: commentId\n    };\n}\nexports.deleteComment = deleteComment;\nfunction resolveComment(commentId) {\n    return {\n        type: exports.RESOLVE_COMMENT,\n        commentId: commentId\n    };\n}\nexports.resolveComment = resolveComment;\nfunction setFocusedComment(commentId, _a) {\n    var _b = _a === void 0 ? {\n        updatePinnedComment: false,\n        forceFocus: false\n    } : _a, updatePinnedComment = _b.updatePinnedComment, forceFocus = _b.forceFocus;\n    return {\n        type: exports.SET_FOCUSED_COMMENT,\n        commentId: commentId,\n        updatePinnedComment: updatePinnedComment,\n        forceFocus: forceFocus\n    };\n}\nexports.setFocusedComment = setFocusedComment;\nfunction addReply(commentId, reply) {\n    return {\n        type: exports.ADD_REPLY,\n        commentId: commentId,\n        reply: reply\n    };\n}\nexports.addReply = addReply;\nfunction updateReply(commentId, replyId, update) {\n    return {\n        type: exports.UPDATE_REPLY,\n        commentId: commentId,\n        replyId: replyId,\n        update: update\n    };\n}\nexports.updateReply = updateReply;\nfunction deleteReply(commentId, replyId) {\n    return {\n        type: exports.DELETE_REPLY,\n        commentId: commentId,\n        replyId: replyId\n    };\n}\nexports.deleteReply = deleteReply;\nfunction invalidateContentPath(contentPath) {\n    return {\n        type: exports.INVALIDATE_CONTENT_PATH,\n        contentPath: contentPath\n    };\n}\nexports.invalidateContentPath = invalidateContentPath;\nexports.commentActionFunctions = {\n    addComment: addComment,\n    updateComment: updateComment,\n    deleteComment: deleteComment,\n    resolveComment: resolveComment,\n    setFocusedComment: setFocusedComment,\n    addReply: addReply,\n    updateReply: updateReply,\n    deleteReply: deleteReply,\n    invalidateContentPath: invalidateContentPath\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9hY3Rpb25zL2NvbW1lbnRzLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvYWN0aW9ucy9jb21tZW50cy50cz9hYTdiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuY29tbWVudEFjdGlvbkZ1bmN0aW9ucyA9IGV4cG9ydHMuaW52YWxpZGF0ZUNvbnRlbnRQYXRoID0gZXhwb3J0cy5kZWxldGVSZXBseSA9IGV4cG9ydHMudXBkYXRlUmVwbHkgPSBleHBvcnRzLmFkZFJlcGx5ID0gZXhwb3J0cy5zZXRGb2N1c2VkQ29tbWVudCA9IGV4cG9ydHMucmVzb2x2ZUNvbW1lbnQgPSBleHBvcnRzLmRlbGV0ZUNvbW1lbnQgPSBleHBvcnRzLnVwZGF0ZUNvbW1lbnQgPSBleHBvcnRzLmFkZENvbW1lbnQgPSBleHBvcnRzLklOVkFMSURBVEVfQ09OVEVOVF9QQVRIID0gZXhwb3J0cy5ERUxFVEVfUkVQTFkgPSBleHBvcnRzLlVQREFURV9SRVBMWSA9IGV4cG9ydHMuQUREX1JFUExZID0gZXhwb3J0cy5TRVRfUElOTkVEX0NPTU1FTlQgPSBleHBvcnRzLlNFVF9GT0NVU0VEX0NPTU1FTlQgPSBleHBvcnRzLlJFU09MVkVfQ09NTUVOVCA9IGV4cG9ydHMuREVMRVRFX0NPTU1FTlQgPSBleHBvcnRzLlVQREFURV9DT01NRU5UID0gZXhwb3J0cy5BRERfQ09NTUVOVCA9IHZvaWQgMDtcbmV4cG9ydHMuQUREX0NPTU1FTlQgPSAnYWRkLWNvbW1lbnQnO1xuZXhwb3J0cy5VUERBVEVfQ09NTUVOVCA9ICd1cGRhdGUtY29tbWVudCc7XG5leHBvcnRzLkRFTEVURV9DT01NRU5UID0gJ2RlbGV0ZS1jb21tZW50JztcbmV4cG9ydHMuUkVTT0xWRV9DT01NRU5UID0gJ3Jlc29sdmUtY29tbWVudCc7XG5leHBvcnRzLlNFVF9GT0NVU0VEX0NPTU1FTlQgPSAnc2V0LWZvY3VzZWQtY29tbWVudCc7XG5leHBvcnRzLlNFVF9QSU5ORURfQ09NTUVOVCA9ICdzZXQtcGlubmVkLWNvbW1lbnQnO1xuZXhwb3J0cy5BRERfUkVQTFkgPSAnYWRkLXJlcGx5JztcbmV4cG9ydHMuVVBEQVRFX1JFUExZID0gJ3VwZGF0ZS1yZXBseSc7XG5leHBvcnRzLkRFTEVURV9SRVBMWSA9ICdkZWxldGUtcmVwbHknO1xuZXhwb3J0cy5JTlZBTElEQVRFX0NPTlRFTlRfUEFUSCA9ICdpbnZhbGlkYXRlLWNvbnRlbnQtcGF0aCc7XG5mdW5jdGlvbiBhZGRDb21tZW50KGNvbW1lbnQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBleHBvcnRzLkFERF9DT01NRU5ULFxuICAgICAgICBjb21tZW50OiBjb21tZW50XG4gICAgfTtcbn1cbmV4cG9ydHMuYWRkQ29tbWVudCA9IGFkZENvbW1lbnQ7XG5mdW5jdGlvbiB1cGRhdGVDb21tZW50KGNvbW1lbnRJZCwgdXBkYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogZXhwb3J0cy5VUERBVEVfQ09NTUVOVCxcbiAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQsXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlXG4gICAgfTtcbn1cbmV4cG9ydHMudXBkYXRlQ29tbWVudCA9IHVwZGF0ZUNvbW1lbnQ7XG5mdW5jdGlvbiBkZWxldGVDb21tZW50KGNvbW1lbnRJZCkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGV4cG9ydHMuREVMRVRFX0NPTU1FTlQsXG4gICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkXG4gICAgfTtcbn1cbmV4cG9ydHMuZGVsZXRlQ29tbWVudCA9IGRlbGV0ZUNvbW1lbnQ7XG5mdW5jdGlvbiByZXNvbHZlQ29tbWVudChjb21tZW50SWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBleHBvcnRzLlJFU09MVkVfQ09NTUVOVCxcbiAgICAgICAgY29tbWVudElkOiBjb21tZW50SWRcbiAgICB9O1xufVxuZXhwb3J0cy5yZXNvbHZlQ29tbWVudCA9IHJlc29sdmVDb21tZW50O1xuZnVuY3Rpb24gc2V0Rm9jdXNlZENvbW1lbnQoY29tbWVudElkLCBfYSkge1xuICAgIHZhciBfYiA9IF9hID09PSB2b2lkIDAgPyB7XG4gICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IGZhbHNlLFxuICAgICAgICBmb3JjZUZvY3VzOiBmYWxzZVxuICAgIH0gOiBfYSwgdXBkYXRlUGlubmVkQ29tbWVudCA9IF9iLnVwZGF0ZVBpbm5lZENvbW1lbnQsIGZvcmNlRm9jdXMgPSBfYi5mb3JjZUZvY3VzO1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGV4cG9ydHMuU0VUX0ZPQ1VTRURfQ09NTUVOVCxcbiAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQsXG4gICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IHVwZGF0ZVBpbm5lZENvbW1lbnQsXG4gICAgICAgIGZvcmNlRm9jdXM6IGZvcmNlRm9jdXNcbiAgICB9O1xufVxuZXhwb3J0cy5zZXRGb2N1c2VkQ29tbWVudCA9IHNldEZvY3VzZWRDb21tZW50O1xuZnVuY3Rpb24gYWRkUmVwbHkoY29tbWVudElkLCByZXBseSkge1xuICAgIHJldHVybiB7XG4gICAgICAgIHR5cGU6IGV4cG9ydHMuQUREX1JFUExZLFxuICAgICAgICBjb21tZW50SWQ6IGNvbW1lbnRJZCxcbiAgICAgICAgcmVwbHk6IHJlcGx5XG4gICAgfTtcbn1cbmV4cG9ydHMuYWRkUmVwbHkgPSBhZGRSZXBseTtcbmZ1bmN0aW9uIHVwZGF0ZVJlcGx5KGNvbW1lbnRJZCwgcmVwbHlJZCwgdXBkYXRlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogZXhwb3J0cy5VUERBVEVfUkVQTFksXG4gICAgICAgIGNvbW1lbnRJZDogY29tbWVudElkLFxuICAgICAgICByZXBseUlkOiByZXBseUlkLFxuICAgICAgICB1cGRhdGU6IHVwZGF0ZVxuICAgIH07XG59XG5leHBvcnRzLnVwZGF0ZVJlcGx5ID0gdXBkYXRlUmVwbHk7XG5mdW5jdGlvbiBkZWxldGVSZXBseShjb21tZW50SWQsIHJlcGx5SWQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBleHBvcnRzLkRFTEVURV9SRVBMWSxcbiAgICAgICAgY29tbWVudElkOiBjb21tZW50SWQsXG4gICAgICAgIHJlcGx5SWQ6IHJlcGx5SWRcbiAgICB9O1xufVxuZXhwb3J0cy5kZWxldGVSZXBseSA9IGRlbGV0ZVJlcGx5O1xuZnVuY3Rpb24gaW52YWxpZGF0ZUNvbnRlbnRQYXRoKGNvbnRlbnRQYXRoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgdHlwZTogZXhwb3J0cy5JTlZBTElEQVRFX0NPTlRFTlRfUEFUSCxcbiAgICAgICAgY29udGVudFBhdGg6IGNvbnRlbnRQYXRoXG4gICAgfTtcbn1cbmV4cG9ydHMuaW52YWxpZGF0ZUNvbnRlbnRQYXRoID0gaW52YWxpZGF0ZUNvbnRlbnRQYXRoO1xuZXhwb3J0cy5jb21tZW50QWN0aW9uRnVuY3Rpb25zID0ge1xuICAgIGFkZENvbW1lbnQ6IGFkZENvbW1lbnQsXG4gICAgdXBkYXRlQ29tbWVudDogdXBkYXRlQ29tbWVudCxcbiAgICBkZWxldGVDb21tZW50OiBkZWxldGVDb21tZW50LFxuICAgIHJlc29sdmVDb21tZW50OiByZXNvbHZlQ29tbWVudCxcbiAgICBzZXRGb2N1c2VkQ29tbWVudDogc2V0Rm9jdXNlZENvbW1lbnQsXG4gICAgYWRkUmVwbHk6IGFkZFJlcGx5LFxuICAgIHVwZGF0ZVJlcGx5OiB1cGRhdGVSZXBseSxcbiAgICBkZWxldGVSZXBseTogZGVsZXRlUmVwbHksXG4gICAgaW52YWxpZGF0ZUNvbnRlbnRQYXRoOiBpbnZhbGlkYXRlQ29udGVudFBhdGhcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/actions/comments.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/actions/settings.ts":
/*!**************************************************************!*\
  !*** ./client/src/components/CommentApp/actions/settings.ts ***!
  \**************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.updateGlobalSettings = exports.UPDATE_GLOBAL_SETTINGS = void 0;\nexports.UPDATE_GLOBAL_SETTINGS = 'update-global-settings';\nfunction updateGlobalSettings(update) {\n    return {\n        type: exports.UPDATE_GLOBAL_SETTINGS,\n        update: update\n    };\n}\nexports.updateGlobalSettings = updateGlobalSettings;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9hY3Rpb25zL3NldHRpbmdzLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvYWN0aW9ucy9zZXR0aW5ncy50cz9hMWRjIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMudXBkYXRlR2xvYmFsU2V0dGluZ3MgPSBleHBvcnRzLlVQREFURV9HTE9CQUxfU0VUVElOR1MgPSB2b2lkIDA7XG5leHBvcnRzLlVQREFURV9HTE9CQUxfU0VUVElOR1MgPSAndXBkYXRlLWdsb2JhbC1zZXR0aW5ncyc7XG5mdW5jdGlvbiB1cGRhdGVHbG9iYWxTZXR0aW5ncyh1cGRhdGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0eXBlOiBleHBvcnRzLlVQREFURV9HTE9CQUxfU0VUVElOR1MsXG4gICAgICAgIHVwZGF0ZTogdXBkYXRlXG4gICAgfTtcbn1cbmV4cG9ydHMudXBkYXRlR2xvYmFsU2V0dGluZ3MgPSB1cGRhdGVHbG9iYWxTZXR0aW5ncztcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/actions/settings.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/components/Comment/index.tsx":
/*!***********************************************************************!*\
  !*** ./client/src/components/CommentApp/components/Comment/index.tsx ***!
  \***********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nvar react_dom_1 = __importDefault(__webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index-exposed.js\"));\nvar focus_trap_react_1 = __importDefault(__webpack_require__(/*! focus-trap-react */ \"./node_modules/focus-trap-react/dist/focus-trap-react-exposed.js\"));\nvar gettext_1 = __webpack_require__(/*! ../../../../utils/gettext */ \"./client/src/utils/gettext.ts\");\nvar Icon_1 = __importDefault(__webpack_require__(/*! ../../../Icon/Icon */ \"./client/src/components/Icon/Icon.tsx\"));\nvar comments_1 = __webpack_require__(/*! ../../state/comments */ \"./client/src/components/CommentApp/state/comments.ts\");\nvar comments_2 = __webpack_require__(/*! ../../actions/comments */ \"./client/src/components/CommentApp/actions/comments.ts\");\nvar sequences_1 = __webpack_require__(/*! ../../utils/sequences */ \"./client/src/components/CommentApp/utils/sequences.ts\");\nvar CommentReply_1 = __importDefault(__webpack_require__(/*! ../CommentReply */ \"./client/src/components/CommentApp/components/CommentReply/index.tsx\"));\nvar CommentHeader_1 = __webpack_require__(/*! ../CommentHeader */ \"./client/src/components/CommentApp/components/CommentHeader/index.tsx\");\nvar TextArea_1 = __importDefault(__webpack_require__(/*! ../TextArea */ \"./client/src/components/CommentApp/components/TextArea/index.tsx\"));\nfunction saveComment(comment, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                mode: 'saving'\n            }));\n            try {\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'default',\n                    text: comment.newText,\n                    remoteId: comment.remoteId,\n                    author: comment.author,\n                    date: comment.date\n                }));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'save_error'\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction doDeleteComment(comment, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                mode: 'deleting'\n            }));\n            try {\n                store.dispatch((0, comments_2.deleteComment)(comment.localId));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'delete_error'\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nfunction doResolveComment(comment, store) {\n    store.dispatch((0, comments_2.resolveComment)(comment.localId));\n}\nvar CommentComponent = /** @class */ (function (_super) {\n    __extends(CommentComponent, _super);\n    function CommentComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommentComponent.prototype.renderReplies = function (_a) {\n        var e_1, _b;\n        var _this = this;\n        var _c = _a === void 0 ? {} : _a, _d = _c.hideNewReply, hideNewReply = _d === void 0 ? false : _d;\n        var _e = this.props, comment = _e.comment, isFocused = _e.isFocused, store = _e.store, user = _e.user;\n        if (!comment.remoteId) {\n            // Hide replies UI if the comment itself isn't saved yet\n            return null;\n        }\n        var onChangeNewReply = function (value) {\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                newReply: value\n            }));\n        };\n        var sendReply = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            var replyId, reply;\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                replyId = (0, sequences_1.getNextReplyId)();\n                reply = (0, comments_1.newCommentReply)(replyId, user, Date.now(), {\n                    text: comment.newReply,\n                    mode: 'default'\n                });\n                store.dispatch((0, comments_2.addReply)(comment.localId, reply));\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    newReply: ''\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        var onClickCancelReply = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                newReply: ''\n            }));\n            store.dispatch((0, comments_2.setFocusedComment)(null));\n            // Stop the event bubbling so that the comment isn't immediately refocused\n            e.stopPropagation();\n        };\n        var replies = [];\n        var replyBeingEdited = false;\n        try {\n            for (var _f = __values(comment.replies.values()), _g = _f.next(); !_g.done; _g = _f.next()) {\n                var reply = _g.value;\n                if (reply.mode === 'saving' || reply.mode === 'editing') {\n                    replyBeingEdited = true;\n                }\n                if (!reply.deleted) {\n                    replies.push(react_1[\"default\"].createElement(CommentReply_1[\"default\"], { key: reply.localId, store: store, user: user, comment: comment, reply: reply, isFocused: isFocused }));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (_g && !_g.done && (_b = _f[\"return\"])) _b.call(_f);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        // Hide new reply if a reply is being edited as well\n        var newReplyHidden = hideNewReply || replyBeingEdited;\n        var replyForm;\n        if (!newReplyHidden && (isFocused || comment.newReply)) {\n            replyForm = (react_1[\"default\"].createElement(\"form\", { onSubmit: sendReply },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment__reply-input\", placeholder: (0, gettext_1.gettext)('Enter your reply...'), value: comment.newReply, onChange: onChangeNewReply }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__reply-actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newReply.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, (0, gettext_1.gettext)('Reply')),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onClickCancelReply, className: \"comment__button\" }, (0, gettext_1.gettext)('Cancel')))));\n        }\n        else if (replies.length === 0) {\n            // If there is no form, or replies, don't add any elements to the dom\n            // This is in case there is a warning after the comment, some special styling\n            // is added if that element is that last child so we can't have any hidden elements here.\n            return null;\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(\"ul\", { className: \"comment__replies\" }, replies),\n            replyForm));\n    };\n    CommentComponent.prototype.renderCreating = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                newText: value\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_2.deleteComment)(comment.localId));\n        };\n        var descriptionId = \"comment-description-\".concat(comment.localId);\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, onChange: onChangeText, placeholder: (0, gettext_1.gettext)('Enter your comments...'), additionalAttributes: {\n                        'aria-describedby': descriptionId\n                    } }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, (0, gettext_1.gettext)('Comment')),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, (0, gettext_1.gettext)('Cancel'))))));\n    };\n    CommentComponent.prototype.renderEditing = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                newText: value\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                mode: 'default',\n                newText: comment.text\n            }));\n        };\n        var descriptionId = \"comment-description-\".concat(comment.localId);\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { descriptionId: descriptionId, commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { focusTarget: isFocused, className: \"comment__input\", value: comment.newText, additionalAttributes: {\n                        'aria-describedby': descriptionId\n                    }, onChange: onChangeText }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { disabled: comment.newText.length === 0, type: \"submit\", className: \"comment__button comment__button--primary\" }, (0, gettext_1.gettext)('Save')),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", onClick: onCancel, className: \"comment__button\" }, (0, gettext_1.gettext)('Cancel')))),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderSaving = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, (0, gettext_1.gettext)('Saving...')),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderSaveError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            this.renderReplies({ hideNewReply: true }),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\n                (0, gettext_1.gettext)('Save error'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, (0, gettext_1.gettext)('Retry')))));\n    };\n    CommentComponent.prototype.renderDeleteConfirm = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                mode: 'default'\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__confirm-delete\" },\n                (0, gettext_1.gettext)('Are you sure?'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, (0, gettext_1.gettext)('Cancel')),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button button button-small no\", onClick: onClickDelete }, (0, gettext_1.gettext)('Delete'))),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderDeleting = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__progress\" }, (0, gettext_1.gettext)('Deleting')),\n            this.renderReplies({ hideNewReply: true })));\n    };\n    CommentComponent.prototype.renderDeleteError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, doDeleteComment(comment, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'default'\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            this.renderReplies({ hideNewReply: true }),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment__error\" },\n                (0, gettext_1.gettext)('Delete error'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickCancel }, (0, gettext_1.gettext)('Cancel')),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment__button\", onClick: onClickRetry }, (0, gettext_1.gettext)('Retry')))));\n    };\n    CommentComponent.prototype.renderDefault = function () {\n        var _a = this.props, comment = _a.comment, store = _a.store, isFocused = _a.isFocused;\n        // Show edit/delete buttons if this comment was authored by the current user\n        var onEdit;\n        var onDelete;\n        if (comment.author === null ||\n            (this.props.user && this.props.user.id === comment.author.id)) {\n            onEdit = function () {\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'editing',\n                    newText: comment.text\n                }));\n            };\n            onDelete = function () {\n                store.dispatch((0, comments_2.updateComment)(comment.localId, {\n                    mode: 'delete_confirm'\n                }));\n            };\n        }\n        var notice = '';\n        if (!comment.remoteId) {\n            // Save the page to add this comment\n            notice = (0, gettext_1.gettext)('Save the page to add this comment');\n        }\n        else if (comment.text !== comment.originalText) {\n            // Save the page to save this comment\n            notice = (0, gettext_1.gettext)('Save the page to save this comment');\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: comment, store: store, onResolve: doResolveComment, onEdit: onEdit, onDelete: onDelete, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment__text\" }, comment.text),\n            notice && (react_1[\"default\"].createElement(\"div\", { className: \"comment__notice-placeholder\" },\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__notice\", role: \"status\" },\n                    react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"info-circle\" }),\n                    notice))),\n            this.renderReplies()));\n    };\n    CommentComponent.prototype.render = function () {\n        var _this = this;\n        var inner;\n        switch (this.props.comment.mode) {\n            case 'creating':\n                inner = this.renderCreating();\n                break;\n            case 'editing':\n                inner = this.renderEditing();\n                break;\n            case 'saving':\n                inner = this.renderSaving();\n                break;\n            case 'save_error':\n                inner = this.renderSaveError();\n                break;\n            case 'delete_confirm':\n                inner = this.renderDeleteConfirm();\n                break;\n            case 'deleting':\n                inner = this.renderDeleting();\n                break;\n            case 'delete_error':\n                inner = this.renderDeleteError();\n                break;\n            default:\n                inner = this.renderDefault();\n                break;\n        }\n        var onClick = function () {\n            _this.props.store.dispatch((0, comments_2.setFocusedComment)(_this.props.comment.localId, {\n                updatePinnedComment: false,\n                forceFocus: _this.props.isFocused && _this.props.forceFocus\n            }));\n        };\n        var onDoubleClick = function () {\n            _this.props.store.dispatch((0, comments_2.setFocusedComment)(_this.props.comment.localId, {\n                updatePinnedComment: true,\n                forceFocus: true\n            }));\n        };\n        var top = this.props.layout.getCommentPosition(this.props.comment.localId);\n        return (react_1[\"default\"].createElement(focus_trap_react_1[\"default\"], { focusTrapOptions: {\n                preventScroll: true,\n                clickOutsideDeactivates: true,\n                onDeactivate: function () {\n                    _this.props.store.dispatch((0, comments_2.setFocusedComment)(null, {\n                        updatePinnedComment: true,\n                        forceFocus: false\n                    }));\n                },\n                initialFocus: '[data-focus-target=\"true\"]',\n                delayFocus: false\n            }, active: this.props.isFocused && this.props.forceFocus },\n            react_1[\"default\"].createElement(\"li\", { tabIndex: -1, \"data-focus-target\": this.props.isFocused &&\n                    !['creating', 'editing'].includes(this.props.comment.mode), key: this.props.comment.localId, className: \"comment comment--mode-\".concat(this.props.comment.mode, \" \").concat(this.props.isFocused ? 'comment--focused' : ''), style: {\n                    position: 'absolute',\n                    top: \"\".concat(top, \"px\"),\n                    display: this.props.isVisible ? 'block' : 'none'\n                }, \"data-comment-id\": this.props.comment.localId, onClick: onClick, onDoubleClick: onDoubleClick }, inner)));\n    };\n    CommentComponent.prototype.componentDidMount = function () {\n        // eslint-disable-next-line react/no-find-dom-node\n        var element = react_dom_1[\"default\"].findDOMNode(this);\n        if (element instanceof HTMLElement) {\n            this.props.layout.setCommentElement(this.props.comment.localId, element);\n            if (this.props.isVisible) {\n                this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\n            }\n        }\n    };\n    CommentComponent.prototype.componentWillUnmount = function () {\n        this.props.layout.setCommentElement(this.props.comment.localId, null);\n    };\n    CommentComponent.prototype.componentDidUpdate = function () {\n        // eslint-disable-next-line react/no-find-dom-node\n        var element = react_dom_1[\"default\"].findDOMNode(this);\n        // Keep height up to date so that other comments will be moved out of the way\n        if (this.props.isVisible && element instanceof HTMLElement) {\n            this.props.layout.setCommentHeight(this.props.comment.localId, element.offsetHeight);\n        }\n    };\n    return CommentComponent;\n}(react_1[\"default\"].Component));\nexports[\"default\"] = CommentComponent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0NvbW1lbnQvaW5kZXgudHN4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvY29tcG9uZW50cy9Db21tZW50L2luZGV4LnRzeD85M2FiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fZXh0ZW5kcyA9ICh0aGlzICYmIHRoaXMuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxuICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxuICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGIsIHApKSBkW3BdID0gYltwXTsgfTtcbiAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgfTtcbiAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDbGFzcyBleHRlbmRzIHZhbHVlIFwiICsgU3RyaW5nKGIpICsgXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XG4gICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTtcbiAgICB9O1xufSkoKTtcbnZhciBfX2F3YWl0ZXIgPSAodGhpcyAmJiB0aGlzLl9fYXdhaXRlcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIF9hcmd1bWVudHMsIFAsIGdlbmVyYXRvcikge1xuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICBmdW5jdGlvbiBmdWxmaWxsZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3IubmV4dCh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxuICAgICAgICBzdGVwKChnZW5lcmF0b3IgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSkpLm5leHQoKSk7XG4gICAgfSk7XG59O1xudmFyIF9fZ2VuZXJhdG9yID0gKHRoaXMgJiYgdGhpcy5fX2dlbmVyYXRvcikgfHwgZnVuY3Rpb24gKHRoaXNBcmcsIGJvZHkpIHtcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xuICAgIGZ1bmN0aW9uIHZlcmIobikgeyByZXR1cm4gZnVuY3Rpb24gKHYpIHsgcmV0dXJuIHN0ZXAoW24sIHZdKTsgfTsgfVxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xuICAgICAgICB3aGlsZSAoXykgdHJ5IHtcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcbiAgICAgICAgICAgIGlmICh5ID0gMCwgdCkgb3AgPSBbb3BbMF0gJiAyLCB0LnZhbHVlXTtcbiAgICAgICAgICAgIHN3aXRjaCAob3BbMF0pIHtcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIDQ6IF8ubGFiZWwrKzsgcmV0dXJuIHsgdmFsdWU6IG9wWzFdLCBkb25lOiBmYWxzZSB9O1xuICAgICAgICAgICAgICAgIGNhc2UgNTogXy5sYWJlbCsrOyB5ID0gb3BbMV07IG9wID0gWzBdOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEodCA9IF8udHJ5cywgdCA9IHQubGVuZ3RoID4gMCAmJiB0W3QubGVuZ3RoIC0gMV0pICYmIChvcFswXSA9PT0gNiB8fCBvcFswXSA9PT0gMikpIHsgXyA9IDA7IGNvbnRpbnVlOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gNiAmJiBfLmxhYmVsIDwgdFsxXSkgeyBfLmxhYmVsID0gdFsxXTsgdCA9IG9wOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodCAmJiBfLmxhYmVsIDwgdFsyXSkgeyBfLmxhYmVsID0gdFsyXTsgXy5vcHMucHVzaChvcCk7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcbiAgICAgICAgICAgICAgICAgICAgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xuICAgICAgICB9IGNhdGNoIChlKSB7IG9wID0gWzYsIGVdOyB5ID0gMDsgfSBmaW5hbGx5IHsgZiA9IHQgPSAwOyB9XG4gICAgICAgIGlmIChvcFswXSAmIDUpIHRocm93IG9wWzFdOyByZXR1cm4geyB2YWx1ZTogb3BbMF0gPyBvcFsxXSA6IHZvaWQgMCwgZG9uZTogdHJ1ZSB9O1xuICAgIH1cbn07XG52YXIgX192YWx1ZXMgPSAodGhpcyAmJiB0aGlzLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7XG4gICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDtcbiAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTtcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XG4gICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XG4gICAgICAgIH1cbiAgICB9O1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xudmFyIHJlYWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtcbnZhciByZWFjdF9kb21fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZG9tXCIpKTtcbnZhciBmb2N1c190cmFwX3JlYWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImZvY3VzLXRyYXAtcmVhY3RcIikpO1xudmFyIGdldHRleHRfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi91dGlscy9nZXR0ZXh0XCIpO1xudmFyIEljb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vLi4vSWNvbi9JY29uXCIpKTtcbnZhciBjb21tZW50c18xID0gcmVxdWlyZShcIi4uLy4uL3N0YXRlL2NvbW1lbnRzXCIpO1xudmFyIGNvbW1lbnRzXzIgPSByZXF1aXJlKFwiLi4vLi4vYWN0aW9ucy9jb21tZW50c1wiKTtcbnZhciBzZXF1ZW5jZXNfMSA9IHJlcXVpcmUoXCIuLi8uLi91dGlscy9zZXF1ZW5jZXNcIik7XG52YXIgQ29tbWVudFJlcGx5XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL0NvbW1lbnRSZXBseVwiKSk7XG52YXIgQ29tbWVudEhlYWRlcl8xID0gcmVxdWlyZShcIi4uL0NvbW1lbnRIZWFkZXJcIik7XG52YXIgVGV4dEFyZWFfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vVGV4dEFyZWFcIikpO1xuZnVuY3Rpb24gc2F2ZUNvbW1lbnQoY29tbWVudCwgc3RvcmUpIHtcbiAgICByZXR1cm4gX19hd2FpdGVyKHRoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnVwZGF0ZUNvbW1lbnQpKGNvbW1lbnQubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdzYXZpbmcnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnVwZGF0ZUNvbW1lbnQpKGNvbW1lbnQubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgICAgICBtb2RlOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNvbW1lbnQubmV3VGV4dCxcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlSWQ6IGNvbW1lbnQucmVtb3RlSWQsXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvcjogY29tbWVudC5hdXRob3IsXG4gICAgICAgICAgICAgICAgICAgIGRhdGU6IGNvbW1lbnQuZGF0ZVxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZSAqL1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ3NhdmVfZXJyb3InXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmZ1bmN0aW9uIGRvRGVsZXRlQ29tbWVudChjb21tZW50LCBzdG9yZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIudXBkYXRlQ29tbWVudCkoY29tbWVudC5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgbW9kZTogJ2RlbGV0aW5nJ1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi5kZWxldGVDb21tZW50KShjb21tZW50LmxvY2FsSWQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZSAqL1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2RlbGV0ZV9lcnJvcidcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxuZnVuY3Rpb24gZG9SZXNvbHZlQ29tbWVudChjb21tZW50LCBzdG9yZSkge1xuICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnJlc29sdmVDb21tZW50KShjb21tZW50LmxvY2FsSWQpKTtcbn1cbnZhciBDb21tZW50Q29tcG9uZW50ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xuICAgIF9fZXh0ZW5kcyhDb21tZW50Q29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbW1lbnRDb21wb25lbnQoKSB7XG4gICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpcztcbiAgICB9XG4gICAgQ29tbWVudENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyUmVwbGllcyA9IGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZV8xLCBfYjtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9jID0gX2EgPT09IHZvaWQgMCA/IHt9IDogX2EsIF9kID0gX2MuaGlkZU5ld1JlcGx5LCBoaWRlTmV3UmVwbHkgPSBfZCA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZDtcbiAgICAgICAgdmFyIF9lID0gdGhpcy5wcm9wcywgY29tbWVudCA9IF9lLmNvbW1lbnQsIGlzRm9jdXNlZCA9IF9lLmlzRm9jdXNlZCwgc3RvcmUgPSBfZS5zdG9yZSwgdXNlciA9IF9lLnVzZXI7XG4gICAgICAgIGlmICghY29tbWVudC5yZW1vdGVJZCkge1xuICAgICAgICAgICAgLy8gSGlkZSByZXBsaWVzIFVJIGlmIHRoZSBjb21tZW50IGl0c2VsZiBpc24ndCBzYXZlZCB5ZXRcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvbkNoYW5nZU5ld1JlcGx5ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBuZXdSZXBseTogdmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHNlbmRSZXBseSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgcmVwbHlJZCwgcmVwbHk7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIHJlcGx5SWQgPSAoMCwgc2VxdWVuY2VzXzEuZ2V0TmV4dFJlcGx5SWQpKCk7XG4gICAgICAgICAgICAgICAgcmVwbHkgPSAoMCwgY29tbWVudHNfMS5uZXdDb21tZW50UmVwbHkpKHJlcGx5SWQsIHVzZXIsIERhdGUubm93KCksIHtcbiAgICAgICAgICAgICAgICAgICAgdGV4dDogY29tbWVudC5uZXdSZXBseSxcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2RlZmF1bHQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuYWRkUmVwbHkpKGNvbW1lbnQubG9jYWxJZCwgcmVwbHkpKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3UmVwbHk6ICcnXG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdmFyIG9uQ2xpY2tDYW5jZWxSZXBseSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBuZXdSZXBseTogJydcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnNldEZvY3VzZWRDb21tZW50KShudWxsKSk7XG4gICAgICAgICAgICAvLyBTdG9wIHRoZSBldmVudCBidWJibGluZyBzbyB0aGF0IHRoZSBjb21tZW50IGlzbid0IGltbWVkaWF0ZWx5IHJlZm9jdXNlZFxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIHJlcGxpZXMgPSBbXTtcbiAgICAgICAgdmFyIHJlcGx5QmVpbmdFZGl0ZWQgPSBmYWxzZTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGZvciAodmFyIF9mID0gX192YWx1ZXMoY29tbWVudC5yZXBsaWVzLnZhbHVlcygpKSwgX2cgPSBfZi5uZXh0KCk7ICFfZy5kb25lOyBfZyA9IF9mLm5leHQoKSkge1xuICAgICAgICAgICAgICAgIHZhciByZXBseSA9IF9nLnZhbHVlO1xuICAgICAgICAgICAgICAgIGlmIChyZXBseS5tb2RlID09PSAnc2F2aW5nJyB8fCByZXBseS5tb2RlID09PSAnZWRpdGluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVwbHlCZWluZ0VkaXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmICghcmVwbHkuZGVsZXRlZCkge1xuICAgICAgICAgICAgICAgICAgICByZXBsaWVzLnB1c2gocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50UmVwbHlfMVtcImRlZmF1bHRcIl0sIHsga2V5OiByZXBseS5sb2NhbElkLCBzdG9yZTogc3RvcmUsIHVzZXI6IHVzZXIsIGNvbW1lbnQ6IGNvbW1lbnQsIHJlcGx5OiByZXBseSwgaXNGb2N1c2VkOiBpc0ZvY3VzZWQgfSkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICBmaW5hbGx5IHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgaWYgKF9nICYmICFfZy5kb25lICYmIChfYiA9IF9mW1wicmV0dXJuXCJdKSkgX2IuY2FsbChfZik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gSGlkZSBuZXcgcmVwbHkgaWYgYSByZXBseSBpcyBiZWluZyBlZGl0ZWQgYXMgd2VsbFxuICAgICAgICB2YXIgbmV3UmVwbHlIaWRkZW4gPSBoaWRlTmV3UmVwbHkgfHwgcmVwbHlCZWluZ0VkaXRlZDtcbiAgICAgICAgdmFyIHJlcGx5Rm9ybTtcbiAgICAgICAgaWYgKCFuZXdSZXBseUhpZGRlbiAmJiAoaXNGb2N1c2VkIHx8IGNvbW1lbnQubmV3UmVwbHkpKSB7XG4gICAgICAgICAgICByZXBseUZvcm0gPSAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImZvcm1cIiwgeyBvblN1Ym1pdDogc2VuZFJlcGx5IH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChUZXh0QXJlYV8xW1wiZGVmYXVsdFwiXSwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fcmVwbHktaW5wdXRcIiwgcGxhY2Vob2xkZXI6ICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0VudGVyIHlvdXIgcmVwbHkuLi4nKSwgdmFsdWU6IGNvbW1lbnQubmV3UmVwbHksIG9uQ2hhbmdlOiBvbkNoYW5nZU5ld1JlcGx5IH0pLFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fcmVwbHktYWN0aW9uc1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyBkaXNhYmxlZDogY29tbWVudC5uZXdSZXBseS5sZW5ndGggPT09IDAsIHR5cGU6IFwic3VibWl0XCIsIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b24gY29tbWVudF9fYnV0dG9uLS1wcmltYXJ5XCIgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnUmVwbHknKSksXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBvbkNsaWNrQ2FuY2VsUmVwbHksIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b25cIiB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdDYW5jZWwnKSkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAocmVwbGllcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGZvcm0sIG9yIHJlcGxpZXMsIGRvbid0IGFkZCBhbnkgZWxlbWVudHMgdG8gdGhlIGRvbVxuICAgICAgICAgICAgLy8gVGhpcyBpcyBpbiBjYXNlIHRoZXJlIGlzIGEgd2FybmluZyBhZnRlciB0aGUgY29tbWVudCwgc29tZSBzcGVjaWFsIHN0eWxpbmdcbiAgICAgICAgICAgIC8vIGlzIGFkZGVkIGlmIHRoYXQgZWxlbWVudCBpcyB0aGF0IGxhc3QgY2hpbGQgc28gd2UgY2FuJ3QgaGF2ZSBhbnkgaGlkZGVuIGVsZW1lbnRzIGhlcmUuXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwidWxcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fcmVwbGllc1wiIH0sIHJlcGxpZXMpLFxuICAgICAgICAgICAgcmVwbHlGb3JtKSk7XG4gICAgfTtcbiAgICBDb21tZW50Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJDcmVhdGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29tbWVudCA9IF9hLmNvbW1lbnQsIHN0b3JlID0gX2Euc3RvcmUsIGlzRm9jdXNlZCA9IF9hLmlzRm9jdXNlZDtcbiAgICAgICAgdmFyIG9uQ2hhbmdlVGV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIudXBkYXRlQ29tbWVudCkoY29tbWVudC5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgbmV3VGV4dDogdmFsdWVcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG9uU2F2ZSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzYXZlQ29tbWVudChjb21tZW50LCBzdG9yZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICB2YXIgb25DYW5jZWwgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuZGVsZXRlQ29tbWVudCkoY29tbWVudC5sb2NhbElkKSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBkZXNjcmlwdGlvbklkID0gXCJjb21tZW50LWRlc2NyaXB0aW9uLVwiLmNvbmNhdChjb21tZW50LmxvY2FsSWQpO1xuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRIZWFkZXJfMS5Db21tZW50SGVhZGVyLCB7IGRlc2NyaXB0aW9uSWQ6IGRlc2NyaXB0aW9uSWQsIGNvbW1lbnRSZXBseTogY29tbWVudCwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7IG9uU3VibWl0OiBvblNhdmUgfSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFRleHRBcmVhXzFbXCJkZWZhdWx0XCJdLCB7IGZvY3VzVGFyZ2V0OiBpc0ZvY3VzZWQsIGNsYXNzTmFtZTogXCJjb21tZW50X19pbnB1dFwiLCB2YWx1ZTogY29tbWVudC5uZXdUZXh0LCBvbkNoYW5nZTogb25DaGFuZ2VUZXh0LCBwbGFjZWhvbGRlcjogKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnRW50ZXIgeW91ciBjb21tZW50cy4uLicpLCBhZGRpdGlvbmFsQXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknOiBkZXNjcmlwdGlvbklkXG4gICAgICAgICAgICAgICAgICAgIH0gfSksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X19hY3Rpb25zXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGRpc2FibGVkOiBjb21tZW50Lm5ld1RleHQubGVuZ3RoID09PSAwLCB0eXBlOiBcInN1Ym1pdFwiLCBjbGFzc05hbWU6IFwiY29tbWVudF9fYnV0dG9uIGNvbW1lbnRfX2J1dHRvbi0tcHJpbWFyeVwiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0NvbW1lbnQnKSksXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBvbkNhbmNlbCwgY2xhc3NOYW1lOiBcImNvbW1lbnRfX2J1dHRvblwiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0NhbmNlbCcpKSkpKSk7XG4gICAgfTtcbiAgICBDb21tZW50Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJFZGl0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb21tZW50ID0gX2EuY29tbWVudCwgc3RvcmUgPSBfYS5zdG9yZSwgaXNGb2N1c2VkID0gX2EuaXNGb2N1c2VkO1xuICAgICAgICB2YXIgb25DaGFuZ2VUZXh0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBuZXdUZXh0OiB2YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25TYXZlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNhdmVDb21tZW50KGNvbW1lbnQsIHN0b3JlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHZhciBvbkNhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBtb2RlOiAnZGVmYXVsdCcsXG4gICAgICAgICAgICAgICAgbmV3VGV4dDogY29tbWVudC50ZXh0XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBkZXNjcmlwdGlvbklkID0gXCJjb21tZW50LWRlc2NyaXB0aW9uLVwiLmNvbmNhdChjb21tZW50LmxvY2FsSWQpO1xuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRIZWFkZXJfMS5Db21tZW50SGVhZGVyLCB7IGRlc2NyaXB0aW9uSWQ6IGRlc2NyaXB0aW9uSWQsIGNvbW1lbnRSZXBseTogY29tbWVudCwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZm9ybVwiLCB7IG9uU3VibWl0OiBvblNhdmUgfSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFRleHRBcmVhXzFbXCJkZWZhdWx0XCJdLCB7IGZvY3VzVGFyZ2V0OiBpc0ZvY3VzZWQsIGNsYXNzTmFtZTogXCJjb21tZW50X19pbnB1dFwiLCB2YWx1ZTogY29tbWVudC5uZXdUZXh0LCBhZGRpdGlvbmFsQXR0cmlidXRlczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgJ2FyaWEtZGVzY3JpYmVkYnknOiBkZXNjcmlwdGlvbklkXG4gICAgICAgICAgICAgICAgICAgIH0sIG9uQ2hhbmdlOiBvbkNoYW5nZVRleHQgfSksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X19hY3Rpb25zXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IGRpc2FibGVkOiBjb21tZW50Lm5ld1RleHQubGVuZ3RoID09PSAwLCB0eXBlOiBcInN1Ym1pdFwiLCBjbGFzc05hbWU6IFwiY29tbWVudF9fYnV0dG9uIGNvbW1lbnRfX2J1dHRvbi0tcHJpbWFyeVwiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ1NhdmUnKSksXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBvbkNsaWNrOiBvbkNhbmNlbCwgY2xhc3NOYW1lOiBcImNvbW1lbnRfX2J1dHRvblwiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0NhbmNlbCcpKSkpLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXBsaWVzKHsgaGlkZU5ld1JlcGx5OiB0cnVlIH0pKSk7XG4gICAgfTtcbiAgICBDb21tZW50Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJTYXZpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbW1lbnQgPSBfYS5jb21tZW50LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiBjb21tZW50LCBzdG9yZTogc3RvcmUsIGZvY3VzZWQ6IGlzRm9jdXNlZCB9KSxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJwXCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX3RleHRcIiB9LCBjb21tZW50LnRleHQpLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X19wcm9ncmVzc1wiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ1NhdmluZy4uLicpKSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwbGllcyh7IGhpZGVOZXdSZXBseTogdHJ1ZSB9KSkpO1xuICAgIH07XG4gICAgQ29tbWVudENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyU2F2ZUVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb21tZW50ID0gX2EuY29tbWVudCwgc3RvcmUgPSBfYS5zdG9yZSwgaXNGb2N1c2VkID0gX2EuaXNGb2N1c2VkO1xuICAgICAgICB2YXIgb25DbGlja1JldHJ5ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNhdmVDb21tZW50KGNvbW1lbnQsIHN0b3JlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiBjb21tZW50LCBzdG9yZTogc3RvcmUsIGZvY3VzZWQ6IGlzRm9jdXNlZCB9KSxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJwXCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX3RleHRcIiB9LCBjb21tZW50LnRleHQpLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXBsaWVzKHsgaGlkZU5ld1JlcGx5OiB0cnVlIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X19lcnJvclwiIH0sXG4gICAgICAgICAgICAgICAgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2ZSBlcnJvcicpLFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY29tbWVudF9fYnV0dG9uXCIsIG9uQ2xpY2s6IG9uQ2xpY2tSZXRyeSB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdSZXRyeScpKSkpKTtcbiAgICB9O1xuICAgIENvbW1lbnRDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckRlbGV0ZUNvbmZpcm0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbW1lbnQgPSBfYS5jb21tZW50LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIHZhciBvbkNsaWNrRGVsZXRlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRvRGVsZXRlQ29tbWVudChjb21tZW50LCBzdG9yZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICB2YXIgb25DbGlja0NhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBtb2RlOiAnZGVmYXVsdCdcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHJlYWN0XzFbXCJkZWZhdWx0XCJdLkZyYWdtZW50LCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50SGVhZGVyXzEuQ29tbWVudEhlYWRlciwgeyBjb21tZW50UmVwbHk6IGNvbW1lbnQsIHN0b3JlOiBzdG9yZSwgZm9jdXNlZDogaXNGb2N1c2VkIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInBcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fdGV4dFwiIH0sIGNvbW1lbnQudGV4dCksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX2NvbmZpcm0tZGVsZXRlXCIgfSxcbiAgICAgICAgICAgICAgICAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdBcmUgeW91IHN1cmU/JyksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b25cIiwgb25DbGljazogb25DbGlja0NhbmNlbCB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdDYW5jZWwnKSksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b24gYnV0dG9uIGJ1dHRvbi1zbWFsbCBub1wiLCBvbkNsaWNrOiBvbkNsaWNrRGVsZXRlIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0RlbGV0ZScpKSksXG4gICAgICAgICAgICB0aGlzLnJlbmRlclJlcGxpZXMoeyBoaWRlTmV3UmVwbHk6IHRydWUgfSkpKTtcbiAgICB9O1xuICAgIENvbW1lbnRDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckRlbGV0aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb21tZW50ID0gX2EuY29tbWVudCwgc3RvcmUgPSBfYS5zdG9yZSwgaXNGb2N1c2VkID0gX2EuaXNGb2N1c2VkO1xuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRIZWFkZXJfMS5Db21tZW50SGVhZGVyLCB7IGNvbW1lbnRSZXBseTogY29tbWVudCwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X190ZXh0XCIgfSwgY29tbWVudC50ZXh0KSxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fcHJvZ3Jlc3NcIiB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdEZWxldGluZycpKSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwbGllcyh7IGhpZGVOZXdSZXBseTogdHJ1ZSB9KSkpO1xuICAgIH07XG4gICAgQ29tbWVudENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyRGVsZXRlRXJyb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbW1lbnQgPSBfYS5jb21tZW50LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIHZhciBvbkNsaWNrUmV0cnkgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZG9EZWxldGVDb21tZW50KGNvbW1lbnQsIHN0b3JlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHZhciBvbkNsaWNrQ2FuY2VsID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIudXBkYXRlQ29tbWVudCkoY29tbWVudC5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdkZWZhdWx0J1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiBjb21tZW50LCBzdG9yZTogc3RvcmUsIGZvY3VzZWQ6IGlzRm9jdXNlZCB9KSxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJwXCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX3RleHRcIiB9LCBjb21tZW50LnRleHQpLFxuICAgICAgICAgICAgdGhpcy5yZW5kZXJSZXBsaWVzKHsgaGlkZU5ld1JlcGx5OiB0cnVlIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50X19lcnJvclwiIH0sXG4gICAgICAgICAgICAgICAgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnRGVsZXRlIGVycm9yJyksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b25cIiwgb25DbGljazogb25DbGlja0NhbmNlbCB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdDYW5jZWwnKSksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50X19idXR0b25cIiwgb25DbGljazogb25DbGlja1JldHJ5IH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ1JldHJ5JykpKSkpO1xuICAgIH07XG4gICAgQ29tbWVudENvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyRGVmYXVsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29tbWVudCA9IF9hLmNvbW1lbnQsIHN0b3JlID0gX2Euc3RvcmUsIGlzRm9jdXNlZCA9IF9hLmlzRm9jdXNlZDtcbiAgICAgICAgLy8gU2hvdyBlZGl0L2RlbGV0ZSBidXR0b25zIGlmIHRoaXMgY29tbWVudCB3YXMgYXV0aG9yZWQgYnkgdGhlIGN1cnJlbnQgdXNlclxuICAgICAgICB2YXIgb25FZGl0O1xuICAgICAgICB2YXIgb25EZWxldGU7XG4gICAgICAgIGlmIChjb21tZW50LmF1dGhvciA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgKHRoaXMucHJvcHMudXNlciAmJiB0aGlzLnByb3BzLnVzZXIuaWQgPT09IGNvbW1lbnQuYXV0aG9yLmlkKSkge1xuICAgICAgICAgICAgb25FZGl0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnVwZGF0ZUNvbW1lbnQpKGNvbW1lbnQubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgICAgICBtb2RlOiAnZWRpdGluZycsXG4gICAgICAgICAgICAgICAgICAgIG5ld1RleHQ6IGNvbW1lbnQudGV4dFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvbkRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2RlbGV0ZV9jb25maXJtJ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5vdGljZSA9ICcnO1xuICAgICAgICBpZiAoIWNvbW1lbnQucmVtb3RlSWQpIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHBhZ2UgdG8gYWRkIHRoaXMgY29tbWVudFxuICAgICAgICAgICAgbm90aWNlID0gKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2ZSB0aGUgcGFnZSB0byBhZGQgdGhpcyBjb21tZW50Jyk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29tbWVudC50ZXh0ICE9PSBjb21tZW50Lm9yaWdpbmFsVGV4dCkge1xuICAgICAgICAgICAgLy8gU2F2ZSB0aGUgcGFnZSB0byBzYXZlIHRoaXMgY29tbWVudFxuICAgICAgICAgICAgbm90aWNlID0gKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2ZSB0aGUgcGFnZSB0byBzYXZlIHRoaXMgY29tbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiBjb21tZW50LCBzdG9yZTogc3RvcmUsIG9uUmVzb2x2ZTogZG9SZXNvbHZlQ29tbWVudCwgb25FZGl0OiBvbkVkaXQsIG9uRGVsZXRlOiBvbkRlbGV0ZSwgZm9jdXNlZDogaXNGb2N1c2VkIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInBcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fdGV4dFwiIH0sIGNvbW1lbnQudGV4dCksXG4gICAgICAgICAgICBub3RpY2UgJiYgKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fbm90aWNlLXBsYWNlaG9sZGVyXCIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX25vdGljZVwiLCByb2xlOiBcInN0YXR1c1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoSWNvbl8xW1wiZGVmYXVsdFwiXSwgeyBuYW1lOiBcImluZm8tY2lyY2xlXCIgfSksXG4gICAgICAgICAgICAgICAgICAgIG5vdGljZSkpKSxcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUmVwbGllcygpKSk7XG4gICAgfTtcbiAgICBDb21tZW50Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBpbm5lcjtcbiAgICAgICAgc3dpdGNoICh0aGlzLnByb3BzLmNvbW1lbnQubW9kZSkge1xuICAgICAgICAgICAgY2FzZSAnY3JlYXRpbmcnOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJDcmVhdGluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZWRpdGluZyc6XG4gICAgICAgICAgICAgICAgaW5uZXIgPSB0aGlzLnJlbmRlckVkaXRpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NhdmluZyc6XG4gICAgICAgICAgICAgICAgaW5uZXIgPSB0aGlzLnJlbmRlclNhdmluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc2F2ZV9lcnJvcic6XG4gICAgICAgICAgICAgICAgaW5uZXIgPSB0aGlzLnJlbmRlclNhdmVFcnJvcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGVsZXRlX2NvbmZpcm0nOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJEZWxldGVDb25maXJtKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZWxldGluZyc6XG4gICAgICAgICAgICAgICAgaW5uZXIgPSB0aGlzLnJlbmRlckRlbGV0aW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdkZWxldGVfZXJyb3InOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJEZWxldGVFcnJvcigpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBpbm5lciA9IHRoaXMucmVuZGVyRGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvbkNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucHJvcHMuc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuc2V0Rm9jdXNlZENvbW1lbnQpKF90aGlzLnByb3BzLmNvbW1lbnQubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGZvcmNlRm9jdXM6IF90aGlzLnByb3BzLmlzRm9jdXNlZCAmJiBfdGhpcy5wcm9wcy5mb3JjZUZvY3VzXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHZhciBvbkRvdWJsZUNsaWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMucHJvcHMuc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuc2V0Rm9jdXNlZENvbW1lbnQpKF90aGlzLnByb3BzLmNvbW1lbnQubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZm9yY2VGb2N1czogdHJ1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgdG9wID0gdGhpcy5wcm9wcy5sYXlvdXQuZ2V0Q29tbWVudFBvc2l0aW9uKHRoaXMucHJvcHMuY29tbWVudC5sb2NhbElkKTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KGZvY3VzX3RyYXBfcmVhY3RfMVtcImRlZmF1bHRcIl0sIHsgZm9jdXNUcmFwT3B0aW9uczoge1xuICAgICAgICAgICAgICAgIHByZXZlbnRTY3JvbGw6IHRydWUsXG4gICAgICAgICAgICAgICAgY2xpY2tPdXRzaWRlRGVhY3RpdmF0ZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgb25EZWFjdGl2YXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnByb3BzLnN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnNldEZvY3VzZWRDb21tZW50KShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGRhdGVQaW5uZWRDb21tZW50OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yY2VGb2N1czogZmFsc2VcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgaW5pdGlhbEZvY3VzOiAnW2RhdGEtZm9jdXMtdGFyZ2V0PVwidHJ1ZVwiXScsXG4gICAgICAgICAgICAgICAgZGVsYXlGb2N1czogZmFsc2VcbiAgICAgICAgICAgIH0sIGFjdGl2ZTogdGhpcy5wcm9wcy5pc0ZvY3VzZWQgJiYgdGhpcy5wcm9wcy5mb3JjZUZvY3VzIH0sXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwibGlcIiwgeyB0YWJJbmRleDogLTEsIFwiZGF0YS1mb2N1cy10YXJnZXRcIjogdGhpcy5wcm9wcy5pc0ZvY3VzZWQgJiZcbiAgICAgICAgICAgICAgICAgICAgIVsnY3JlYXRpbmcnLCAnZWRpdGluZyddLmluY2x1ZGVzKHRoaXMucHJvcHMuY29tbWVudC5tb2RlKSwga2V5OiB0aGlzLnByb3BzLmNvbW1lbnQubG9jYWxJZCwgY2xhc3NOYW1lOiBcImNvbW1lbnQgY29tbWVudC0tbW9kZS1cIi5jb25jYXQodGhpcy5wcm9wcy5jb21tZW50Lm1vZGUsIFwiIFwiKS5jb25jYXQodGhpcy5wcm9wcy5pc0ZvY3VzZWQgPyAnY29tbWVudC0tZm9jdXNlZCcgOiAnJyksIHN0eWxlOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICAgICAgICAgICB0b3A6IFwiXCIuY29uY2F0KHRvcCwgXCJweFwiKSxcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdGhpcy5wcm9wcy5pc1Zpc2libGUgPyAnYmxvY2snIDogJ25vbmUnXG4gICAgICAgICAgICAgICAgfSwgXCJkYXRhLWNvbW1lbnQtaWRcIjogdGhpcy5wcm9wcy5jb21tZW50LmxvY2FsSWQsIG9uQ2xpY2s6IG9uQ2xpY2ssIG9uRG91YmxlQ2xpY2s6IG9uRG91YmxlQ2xpY2sgfSwgaW5uZXIpKSk7XG4gICAgfTtcbiAgICBDb21tZW50Q29tcG9uZW50LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWZpbmQtZG9tLW5vZGVcbiAgICAgICAgdmFyIGVsZW1lbnQgPSByZWFjdF9kb21fMVtcImRlZmF1bHRcIl0uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubGF5b3V0LnNldENvbW1lbnRFbGVtZW50KHRoaXMucHJvcHMuY29tbWVudC5sb2NhbElkLCBlbGVtZW50KTtcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmlzVmlzaWJsZSkge1xuICAgICAgICAgICAgICAgIHRoaXMucHJvcHMubGF5b3V0LnNldENvbW1lbnRIZWlnaHQodGhpcy5wcm9wcy5jb21tZW50LmxvY2FsSWQsIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgQ29tbWVudENvbXBvbmVudC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHRoaXMucHJvcHMubGF5b3V0LnNldENvbW1lbnRFbGVtZW50KHRoaXMucHJvcHMuY29tbWVudC5sb2NhbElkLCBudWxsKTtcbiAgICB9O1xuICAgIENvbW1lbnRDb21wb25lbnQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIHJlYWN0L25vLWZpbmQtZG9tLW5vZGVcbiAgICAgICAgdmFyIGVsZW1lbnQgPSByZWFjdF9kb21fMVtcImRlZmF1bHRcIl0uZmluZERPTU5vZGUodGhpcyk7XG4gICAgICAgIC8vIEtlZXAgaGVpZ2h0IHVwIHRvIGRhdGUgc28gdGhhdCBvdGhlciBjb21tZW50cyB3aWxsIGJlIG1vdmVkIG91dCBvZiB0aGUgd2F5XG4gICAgICAgIGlmICh0aGlzLnByb3BzLmlzVmlzaWJsZSAmJiBlbGVtZW50IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRoaXMucHJvcHMubGF5b3V0LnNldENvbW1lbnRIZWlnaHQodGhpcy5wcm9wcy5jb21tZW50LmxvY2FsSWQsIGVsZW1lbnQub2Zmc2V0SGVpZ2h0KTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIENvbW1lbnRDb21wb25lbnQ7XG59KHJlYWN0XzFbXCJkZWZhdWx0XCJdLkNvbXBvbmVudCkpO1xuZXhwb3J0c1tcImRlZmF1bHRcIl0gPSBDb21tZW50Q29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/components/Comment/index.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/components/CommentHeader/index.tsx":
/*!*****************************************************************************!*\
  !*** ./client/src/components/CommentApp/components/CommentHeader/index.tsx ***!
  \*****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.CommentHeader = void 0;\nvar react_1 = __importStar(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nvar gettext_1 = __webpack_require__(/*! ../../../../utils/gettext */ \"./client/src/utils/gettext.ts\");\nvar Icon_1 = __importDefault(__webpack_require__(/*! ../../../Icon/Icon */ \"./client/src/components/Icon/Icon.tsx\"));\nvar dateOptions = {\n    dateStyle: 'medium',\n    timeStyle: 'short'\n};\nvar dateTimeFormat = new Intl.DateTimeFormat([], dateOptions);\nvar CommentHeader = function (_a) {\n    var commentReply = _a.commentReply, store = _a.store, onResolve = _a.onResolve, onEdit = _a.onEdit, onDelete = _a.onDelete, descriptionId = _a.descriptionId, focused = _a.focused;\n    var author = commentReply.author, date = commentReply.date;\n    var onClickResolve = function (e) {\n        e.preventDefault();\n        if (onResolve) {\n            onResolve(commentReply, store);\n        }\n    };\n    var onClickEdit = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            e.preventDefault();\n            if (onEdit) {\n                onEdit(commentReply, store);\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var onClickDelete = function (e) { return __awaiter(void 0, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            e.preventDefault();\n            if (onDelete) {\n                onDelete(commentReply, store);\n            }\n            return [2 /*return*/];\n        });\n    }); };\n    var _b = __read((0, react_1.useState)(false), 2), menuOpen = _b[0], setMenuOpen = _b[1];\n    (0, react_1.useEffect)(function () {\n        if (menuOpen && !focused) {\n            setMenuOpen(false);\n        }\n    }, [focused]);\n    var menuRef = (0, react_1.useRef)(null);\n    var menuContainerRef = (0, react_1.useRef)(null);\n    var toggleMenu = function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n        setMenuOpen(!menuOpen);\n    };\n    (0, react_1.useEffect)(function () {\n        if (menuOpen) {\n            setTimeout(function () { var _a; return (_a = menuRef.current) === null || _a === void 0 ? void 0 : _a.focus(); }, 1);\n        }\n    }, [menuOpen]);\n    var handleClickOutside = function (e) {\n        if (menuContainerRef.current &&\n            e.target instanceof Node &&\n            !menuContainerRef.current.contains(e.target)) {\n            setMenuOpen(false);\n        }\n    };\n    (0, react_1.useEffect)(function () {\n        document.addEventListener('click', handleClickOutside, true);\n        return function () {\n            document.removeEventListener('click', handleClickOutside, true);\n        };\n    }, []);\n    var dateISO = new Date(date).toISOString();\n    return (react_1[\"default\"].createElement(\"div\", { className: \"comment-header\" },\n        react_1[\"default\"].createElement(\"div\", { className: \"comment-header__actions\" }, (onEdit || onDelete || onResolve) && (react_1[\"default\"].createElement(\"div\", { className: \"comment-header__action comment-header__action--more\", ref: menuContainerRef },\n            react_1[\"default\"].createElement(\"details\", { open: menuOpen, onClick: toggleMenu },\n                react_1[\"default\"].createElement(\"summary\", { \"aria-label\": (0, gettext_1.gettext)('More actions'), \"aria-haspopup\": \"menu\", role: \"button\", onClick: toggleMenu, \"aria-expanded\": menuOpen },\n                    react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"ellipsis-v\" })),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-header__more-actions\", role: \"menu\", ref: menuRef },\n                    onEdit && (react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickEdit }, (0, gettext_1.gettext)('Edit'))),\n                    onDelete && (react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickDelete }, (0, gettext_1.gettext)('Delete'))),\n                    onResolve && (react_1[\"default\"].createElement(\"button\", { type: \"button\", role: \"menuitem\", onClick: onClickResolve }, (0, gettext_1.gettext)('Resolve')))))))),\n        author && author.avatarUrl && (react_1[\"default\"].createElement(\"img\", { className: \"comment-header__avatar\", src: author.avatarUrl, alt: \"\", decoding: \"async\", loading: \"lazy\" })),\n        react_1[\"default\"].createElement(\"span\", { id: descriptionId },\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__author\" }, author ? author.name : ''),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-header__date\" },\n                react_1[\"default\"].createElement(\"time\", { dateTime: dateISO }, dateTimeFormat.format(date))))));\n};\nexports.CommentHeader = CommentHeader;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0NvbW1lbnRIZWFkZXIvaW5kZXgudHN4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FndGFpbC8uL2NsaWVudC9zcmMvY29tcG9uZW50cy9Db21tZW50QXBwL2NvbXBvbmVudHMvQ29tbWVudEhlYWRlci9pbmRleC50c3g/ZDhkYyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2NyZWF0ZUJpbmRpbmcgPSAodGhpcyAmJiB0aGlzLl9fY3JlYXRlQmluZGluZykgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBrMiwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9KTtcbn0pIDogKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBvW2syXSA9IG1ba107XG59KSk7XG52YXIgX19zZXRNb2R1bGVEZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX3NldE1vZHVsZURlZmF1bHQpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgXCJkZWZhdWx0XCIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHYgfSk7XG59KSA6IGZ1bmN0aW9uKG8sIHYpIHtcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XG59KTtcbnZhciBfX2ltcG9ydFN0YXIgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0U3RhcikgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIGlmIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpIHJldHVybiBtb2Q7XG4gICAgdmFyIHJlc3VsdCA9IHt9O1xuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcbiAgICBfX3NldE1vZHVsZURlZmF1bHQocmVzdWx0LCBtb2QpO1xuICAgIHJldHVybiByZXN1bHQ7XG59O1xudmFyIF9fYXdhaXRlciA9ICh0aGlzICYmIHRoaXMuX19hd2FpdGVyKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XG4gICAgZnVuY3Rpb24gYWRvcHQodmFsdWUpIHsgcmV0dXJuIHZhbHVlIGluc3RhbmNlb2YgUCA/IHZhbHVlIDogbmV3IFAoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmVzb2x2ZSh2YWx1ZSk7IH0pOyB9XG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gcmVqZWN0ZWQodmFsdWUpIHsgdHJ5IHsgc3RlcChnZW5lcmF0b3JbXCJ0aHJvd1wiXSh2YWx1ZSkpOyB9IGNhdGNoIChlKSB7IHJlamVjdChlKTsgfSB9XG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcbiAgICB9KTtcbn07XG52YXIgX19nZW5lcmF0b3IgPSAodGhpcyAmJiB0aGlzLl9fZ2VuZXJhdG9yKSB8fCBmdW5jdGlvbiAodGhpc0FyZywgYm9keSkge1xuICAgIHZhciBfID0geyBsYWJlbDogMCwgc2VudDogZnVuY3Rpb24oKSB7IGlmICh0WzBdICYgMSkgdGhyb3cgdFsxXTsgcmV0dXJuIHRbMV07IH0sIHRyeXM6IFtdLCBvcHM6IFtdIH0sIGYsIHksIHQsIGc7XG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XG4gICAgZnVuY3Rpb24gc3RlcChvcCkge1xuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XG4gICAgICAgIHdoaWxlIChfKSB0cnkge1xuICAgICAgICAgICAgaWYgKGYgPSAxLCB5ICYmICh0ID0gb3BbMF0gJiAyID8geVtcInJldHVyblwiXSA6IG9wWzBdID8geVtcInRocm93XCJdIHx8ICgodCA9IHlbXCJyZXR1cm5cIl0pICYmIHQuY2FsbCh5KSwgMCkgOiB5Lm5leHQpICYmICEodCA9IHQuY2FsbCh5LCBvcFsxXSkpLmRvbmUpIHJldHVybiB0O1xuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xuICAgICAgICAgICAgc3dpdGNoIChvcFswXSkge1xuICAgICAgICAgICAgICAgIGNhc2UgMDogY2FzZSAxOiB0ID0gb3A7IGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XG4gICAgICAgICAgICAgICAgY2FzZSA1OiBfLmxhYmVsKys7IHkgPSBvcFsxXTsgb3AgPSBbMF07IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGNhc2UgNzogb3AgPSBfLm9wcy5wb3AoKTsgXy50cnlzLnBvcCgpOyBjb250aW51ZTtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBpZiAoISh0ID0gXy50cnlzLCB0ID0gdC5sZW5ndGggPiAwICYmIHRbdC5sZW5ndGggLSAxXSkgJiYgKG9wWzBdID09PSA2IHx8IG9wWzBdID09PSAyKSkgeyBfID0gMDsgY29udGludWU7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSAzICYmICghdCB8fCAob3BbMV0gPiB0WzBdICYmIG9wWzFdIDwgdFszXSkpKSB7IF8ubGFiZWwgPSBvcFsxXTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ICYmIF8ubGFiZWwgPCB0WzJdKSB7IF8ubGFiZWwgPSB0WzJdOyBfLm9wcy5wdXNoKG9wKTsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHRbMl0pIF8ub3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgb3AgPSBib2R5LmNhbGwodGhpc0FyZywgXyk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cbiAgICAgICAgaWYgKG9wWzBdICYgNSkgdGhyb3cgb3BbMV07IHJldHVybiB7IHZhbHVlOiBvcFswXSA/IG9wWzFdIDogdm9pZCAwLCBkb25lOiB0cnVlIH07XG4gICAgfVxufTtcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gICAgaWYgKCFtKSByZXR1cm4gbztcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcbiAgICB0cnkge1xuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cbiAgICB9XG4gICAgcmV0dXJuIGFyO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkNvbW1lbnRIZWFkZXIgPSB2b2lkIDA7XG52YXIgcmVhY3RfMSA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwicmVhY3RcIikpO1xudmFyIGdldHRleHRfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi8uLi91dGlscy9nZXR0ZXh0XCIpO1xudmFyIEljb25fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi4vLi4vLi4vSWNvbi9JY29uXCIpKTtcbnZhciBkYXRlT3B0aW9ucyA9IHtcbiAgICBkYXRlU3R5bGU6ICdtZWRpdW0nLFxuICAgIHRpbWVTdHlsZTogJ3Nob3J0J1xufTtcbnZhciBkYXRlVGltZUZvcm1hdCA9IG5ldyBJbnRsLkRhdGVUaW1lRm9ybWF0KFtdLCBkYXRlT3B0aW9ucyk7XG52YXIgQ29tbWVudEhlYWRlciA9IGZ1bmN0aW9uIChfYSkge1xuICAgIHZhciBjb21tZW50UmVwbHkgPSBfYS5jb21tZW50UmVwbHksIHN0b3JlID0gX2Euc3RvcmUsIG9uUmVzb2x2ZSA9IF9hLm9uUmVzb2x2ZSwgb25FZGl0ID0gX2Eub25FZGl0LCBvbkRlbGV0ZSA9IF9hLm9uRGVsZXRlLCBkZXNjcmlwdGlvbklkID0gX2EuZGVzY3JpcHRpb25JZCwgZm9jdXNlZCA9IF9hLmZvY3VzZWQ7XG4gICAgdmFyIGF1dGhvciA9IGNvbW1lbnRSZXBseS5hdXRob3IsIGRhdGUgPSBjb21tZW50UmVwbHkuZGF0ZTtcbiAgICB2YXIgb25DbGlja1Jlc29sdmUgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmIChvblJlc29sdmUpIHtcbiAgICAgICAgICAgIG9uUmVzb2x2ZShjb21tZW50UmVwbHksIHN0b3JlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdmFyIG9uQ2xpY2tFZGl0ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChvbkVkaXQpIHtcbiAgICAgICAgICAgICAgICBvbkVkaXQoY29tbWVudFJlcGx5LCBzdG9yZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH0pO1xuICAgIH0pOyB9O1xuICAgIHZhciBvbkNsaWNrRGVsZXRlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcih2b2lkIDAsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGlmIChvbkRlbGV0ZSkge1xuICAgICAgICAgICAgICAgIG9uRGVsZXRlKGNvbW1lbnRSZXBseSwgc3RvcmUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICB9KTtcbiAgICB9KTsgfTtcbiAgICB2YXIgX2IgPSBfX3JlYWQoKDAsIHJlYWN0XzEudXNlU3RhdGUpKGZhbHNlKSwgMiksIG1lbnVPcGVuID0gX2JbMF0sIHNldE1lbnVPcGVuID0gX2JbMV07XG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtZW51T3BlbiAmJiAhZm9jdXNlZCkge1xuICAgICAgICAgICAgc2V0TWVudU9wZW4oZmFsc2UpO1xuICAgICAgICB9XG4gICAgfSwgW2ZvY3VzZWRdKTtcbiAgICB2YXIgbWVudVJlZiA9ICgwLCByZWFjdF8xLnVzZVJlZikobnVsbCk7XG4gICAgdmFyIG1lbnVDb250YWluZXJSZWYgPSAoMCwgcmVhY3RfMS51c2VSZWYpKG51bGwpO1xuICAgIHZhciB0b2dnbGVNZW51ID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICBzZXRNZW51T3BlbighbWVudU9wZW4pO1xuICAgIH07XG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChtZW51T3Blbikge1xuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHZhciBfYTsgcmV0dXJuIChfYSA9IG1lbnVSZWYuY3VycmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZvY3VzKCk7IH0sIDEpO1xuICAgICAgICB9XG4gICAgfSwgW21lbnVPcGVuXSk7XG4gICAgdmFyIGhhbmRsZUNsaWNrT3V0c2lkZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChtZW51Q29udGFpbmVyUmVmLmN1cnJlbnQgJiZcbiAgICAgICAgICAgIGUudGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJlxuICAgICAgICAgICAgIW1lbnVDb250YWluZXJSZWYuY3VycmVudC5jb250YWlucyhlLnRhcmdldCkpIHtcbiAgICAgICAgICAgIHNldE1lbnVPcGVuKGZhbHNlKTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgKDAsIHJlYWN0XzEudXNlRWZmZWN0KShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xpY2tPdXRzaWRlLCB0cnVlKTtcbiAgICAgICAgfTtcbiAgICB9LCBbXSk7XG4gICAgdmFyIGRhdGVJU08gPSBuZXcgRGF0ZShkYXRlKS50b0lTT1N0cmluZygpO1xuICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWhlYWRlclwiIH0sXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1oZWFkZXJfX2FjdGlvbnNcIiB9LCAob25FZGl0IHx8IG9uRGVsZXRlIHx8IG9uUmVzb2x2ZSkgJiYgKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1oZWFkZXJfX2FjdGlvbiBjb21tZW50LWhlYWRlcl9fYWN0aW9uLS1tb3JlXCIsIHJlZjogbWVudUNvbnRhaW5lclJlZiB9LFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRldGFpbHNcIiwgeyBvcGVuOiBtZW51T3Blbiwgb25DbGljazogdG9nZ2xlTWVudSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJzdW1tYXJ5XCIsIHsgXCJhcmlhLWxhYmVsXCI6ICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ01vcmUgYWN0aW9ucycpLCBcImFyaWEtaGFzcG9wdXBcIjogXCJtZW51XCIsIHJvbGU6IFwiYnV0dG9uXCIsIG9uQ2xpY2s6IHRvZ2dsZU1lbnUsIFwiYXJpYS1leHBhbmRlZFwiOiBtZW51T3BlbiB9LFxuICAgICAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KEljb25fMVtcImRlZmF1bHRcIl0sIHsgbmFtZTogXCJlbGxpcHNpcy12XCIgfSkpLFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1oZWFkZXJfX21vcmUtYWN0aW9uc1wiLCByb2xlOiBcIm1lbnVcIiwgcmVmOiBtZW51UmVmIH0sXG4gICAgICAgICAgICAgICAgICAgIG9uRWRpdCAmJiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIHJvbGU6IFwibWVudWl0ZW1cIiwgb25DbGljazogb25DbGlja0VkaXQgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnRWRpdCcpKSksXG4gICAgICAgICAgICAgICAgICAgIG9uRGVsZXRlICYmIChyZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgcm9sZTogXCJtZW51aXRlbVwiLCBvbkNsaWNrOiBvbkNsaWNrRGVsZXRlIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0RlbGV0ZScpKSksXG4gICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZSAmJiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIHJvbGU6IFwibWVudWl0ZW1cIiwgb25DbGljazogb25DbGlja1Jlc29sdmUgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnUmVzb2x2ZScpKSkpKSkpKSxcbiAgICAgICAgYXV0aG9yICYmIGF1dGhvci5hdmF0YXJVcmwgJiYgKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbWdcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1oZWFkZXJfX2F2YXRhclwiLCBzcmM6IGF1dGhvci5hdmF0YXJVcmwsIGFsdDogXCJcIiwgZGVjb2Rpbmc6IFwiYXN5bmNcIiwgbG9hZGluZzogXCJsYXp5XCIgfSkpLFxuICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwic3BhblwiLCB7IGlkOiBkZXNjcmlwdGlvbklkIH0sXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWhlYWRlcl9fYXV0aG9yXCIgfSwgYXV0aG9yID8gYXV0aG9yLm5hbWUgOiAnJyksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LWhlYWRlcl9fZGF0ZVwiIH0sXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRpbWVcIiwgeyBkYXRlVGltZTogZGF0ZUlTTyB9LCBkYXRlVGltZUZvcm1hdC5mb3JtYXQoZGF0ZSkpKSkpKTtcbn07XG5leHBvcnRzLkNvbW1lbnRIZWFkZXIgPSBDb21tZW50SGVhZGVyO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/components/CommentHeader/index.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/components/CommentReply/index.tsx":
/*!****************************************************************************!*\
  !*** ./client/src/components/CommentApp/components/CommentReply/index.tsx ***!
  \****************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.saveCommentReply = void 0;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nvar gettext_1 = __webpack_require__(/*! ../../../../utils/gettext */ \"./client/src/utils/gettext.ts\");\nvar comments_1 = __webpack_require__(/*! ../../actions/comments */ \"./client/src/components/CommentApp/actions/comments.ts\");\nvar CommentHeader_1 = __webpack_require__(/*! ../CommentHeader */ \"./client/src/components/CommentApp/components/CommentHeader/index.tsx\");\nvar TextArea_1 = __importDefault(__webpack_require__(/*! ../TextArea */ \"./client/src/components/CommentApp/components/TextArea/index.tsx\"));\nvar Icon_1 = __importDefault(__webpack_require__(/*! ../../../Icon/Icon */ \"./client/src/components/Icon/Icon.tsx\"));\nfunction saveCommentReply(comment, reply, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                mode: 'saving'\n            }));\n            try {\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'default',\n                    text: reply.newText,\n                    author: reply.author\n                }));\n            }\n            catch (err) {\n                /* eslint-disable-next-line no-console */\n                console.error(err);\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'save_error'\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nexports.saveCommentReply = saveCommentReply;\nfunction deleteCommentReply(comment, reply, store) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                mode: 'deleting'\n            }));\n            try {\n                store.dispatch((0, comments_1.deleteReply)(comment.localId, reply.localId));\n            }\n            catch (err) {\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'delete_error'\n                }));\n            }\n            return [2 /*return*/];\n        });\n    });\n}\nvar CommentReplyComponent = /** @class */ (function (_super) {\n    __extends(CommentReplyComponent, _super);\n    function CommentReplyComponent() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    CommentReplyComponent.prototype.renderEditing = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        var onChangeText = function (value) {\n            store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                newText: value\n            }));\n        };\n        var onSave = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onCancel = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                mode: 'default',\n                newText: reply.text\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"form\", { onSubmit: onSave },\n                react_1[\"default\"].createElement(TextArea_1[\"default\"], { className: \"comment-reply__input\", value: reply.newText, onChange: onChangeText }),\n                react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__actions\" },\n                    react_1[\"default\"].createElement(\"button\", { type: \"submit\", disabled: reply.newText.length === 0, className: \"comment-reply__button comment-reply__button--primary\" }, (0, gettext_1.gettext)('Save')),\n                    react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onCancel }, (0, gettext_1.gettext)('Cancel'))))));\n    };\n    CommentReplyComponent.prototype.renderSaving = function () {\n        var _a = this.props, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, (0, gettext_1.gettext)('Saving...'))));\n    };\n    CommentReplyComponent.prototype.renderSaveError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, saveCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\n                (0, gettext_1.gettext)('Save error'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, (0, gettext_1.gettext)('Retry')))));\n    };\n    CommentReplyComponent.prototype.renderDeleteConfirm = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        var onClickDelete = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) {\n            e.preventDefault();\n            store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                mode: 'default'\n            }));\n        };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__confirm-delete\" },\n                (0, gettext_1.gettext)('Are you sure?'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, (0, gettext_1.gettext)('Cancel')),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button comment-reply__button--primary\", onClick: onClickDelete }, (0, gettext_1.gettext)('Delete')))));\n    };\n    CommentReplyComponent.prototype.renderDeleting = function () {\n        var _a = this.props, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__progress\" }, (0, gettext_1.gettext)('Deleting'))));\n    };\n    CommentReplyComponent.prototype.renderDeleteError = function () {\n        var _this = this;\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        var onClickRetry = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        e.preventDefault();\n                        return [4 /*yield*/, deleteCommentReply(comment, reply, store)];\n                    case 1:\n                        _a.sent();\n                        return [2 /*return*/];\n                }\n            });\n        }); };\n        var onClickCancel = function (e) { return __awaiter(_this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                e.preventDefault();\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'default'\n                }));\n                return [2 /*return*/];\n            });\n        }); };\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            react_1[\"default\"].createElement(\"div\", { className: \"comment-reply__error\" },\n                (0, gettext_1.gettext)('Delete error'),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickCancel }, (0, gettext_1.gettext)('Cancel')),\n                react_1[\"default\"].createElement(\"button\", { type: \"button\", className: \"comment-reply__button\", onClick: onClickRetry }, (0, gettext_1.gettext)('Retry')))));\n    };\n    CommentReplyComponent.prototype.renderDefault = function () {\n        var _a = this.props, comment = _a.comment, reply = _a.reply, store = _a.store, isFocused = _a.isFocused;\n        // Show edit/delete buttons if this reply was authored by the current user\n        var onEdit;\n        var onDelete;\n        if (reply.author === null ||\n            (this.props.user && this.props.user.id === reply.author.id)) {\n            onEdit = function () {\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'editing',\n                    newText: reply.text\n                }));\n            };\n            onDelete = function () {\n                store.dispatch((0, comments_1.updateReply)(comment.localId, reply.localId, {\n                    mode: 'delete_confirm'\n                }));\n            };\n        }\n        var notice = '';\n        if (!reply.remoteId || reply.text !== reply.originalText) {\n            // Save the page to save this reply\n            notice = (0, gettext_1.gettext)('Save the page to save this reply');\n        }\n        return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n            react_1[\"default\"].createElement(CommentHeader_1.CommentHeader, { commentReply: reply, store: store, onEdit: onEdit, onDelete: onDelete, focused: isFocused }),\n            react_1[\"default\"].createElement(\"p\", { className: \"comment-reply__text\" }, reply.text),\n            notice && (react_1[\"default\"].createElement(\"div\", { className: \"comment__notice-placeholder\" },\n                react_1[\"default\"].createElement(\"div\", { className: \"comment__notice\", role: \"status\" },\n                    react_1[\"default\"].createElement(Icon_1[\"default\"], { name: \"info-circle\" }),\n                    notice)))));\n    };\n    CommentReplyComponent.prototype.render = function () {\n        var inner;\n        switch (this.props.reply.mode) {\n            case 'editing':\n                inner = this.renderEditing();\n                break;\n            case 'saving':\n                inner = this.renderSaving();\n                break;\n            case 'save_error':\n                inner = this.renderSaveError();\n                break;\n            case 'delete_confirm':\n                inner = this.renderDeleteConfirm();\n                break;\n            case 'deleting':\n                inner = this.renderDeleting();\n                break;\n            case 'delete_error':\n                inner = this.renderDeleteError();\n                break;\n            default:\n                inner = this.renderDefault();\n                break;\n        }\n        return (react_1[\"default\"].createElement(\"li\", { key: this.props.reply.localId, className: \"comment-reply comment-reply--mode-\".concat(this.props.reply.mode), \"data-reply-id\": this.props.reply.localId }, inner));\n    };\n    return CommentReplyComponent;\n}(react_1[\"default\"].Component));\nexports[\"default\"] = CommentReplyComponent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0NvbW1lbnRSZXBseS9pbmRleC50c3guanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0NvbW1lbnRSZXBseS9pbmRleC50c3g/ZmQxMiJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHxcbiAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcbiAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XG4gICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgIH07XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYiAhPT0gXCJmdW5jdGlvblwiICYmIGIgIT09IG51bGwpXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XG4gICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfVxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XG4gICAgfTtcbn0pKCk7XG52YXIgX19hd2FpdGVyID0gKHRoaXMgJiYgdGhpcy5fX2F3YWl0ZXIpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cbiAgICByZXR1cm4gbmV3IChQIHx8IChQID0gUHJvbWlzZSkpKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cbiAgICAgICAgZnVuY3Rpb24gc3RlcChyZXN1bHQpIHsgcmVzdWx0LmRvbmUgPyByZXNvbHZlKHJlc3VsdC52YWx1ZSkgOiBhZG9wdChyZXN1bHQudmFsdWUpLnRoZW4oZnVsZmlsbGVkLCByZWplY3RlZCk7IH1cbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xuICAgIH0pO1xufTtcbnZhciBfX2dlbmVyYXRvciA9ICh0aGlzICYmIHRoaXMuX19nZW5lcmF0b3IpIHx8IGZ1bmN0aW9uICh0aGlzQXJnLCBib2R5KSB7XG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcbiAgICByZXR1cm4gZyA9IHsgbmV4dDogdmVyYigwKSwgXCJ0aHJvd1wiOiB2ZXJiKDEpLCBcInJldHVyblwiOiB2ZXJiKDIpIH0sIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiAoZ1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KSwgZztcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XG4gICAgICAgIGlmIChmKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XG4gICAgICAgICAgICBpZiAoZiA9IDEsIHkgJiYgKHQgPSBvcFswXSAmIDIgPyB5W1wicmV0dXJuXCJdIDogb3BbMF0gPyB5W1widGhyb3dcIl0gfHwgKCh0ID0geVtcInJldHVyblwiXSkgJiYgdC5jYWxsKHkpLCAwKSA6IHkubmV4dCkgJiYgISh0ID0gdC5jYWxsKHksIG9wWzFdKSkuZG9uZSkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBpZiAoeSA9IDAsIHQpIG9wID0gW29wWzBdICYgMiwgdC52YWx1ZV07XG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAwOiBjYXNlIDE6IHQgPSBvcDsgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSA0OiBfLmxhYmVsKys7IHJldHVybiB7IHZhbHVlOiBvcFsxXSwgZG9uZTogZmFsc2UgfTtcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XG4gICAgICAgICAgICAgICAgY2FzZSA3OiBvcCA9IF8ub3BzLnBvcCgpOyBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDMgJiYgKCF0IHx8IChvcFsxXSA+IHRbMF0gJiYgb3BbMV0gPCB0WzNdKSkpIHsgXy5sYWJlbCA9IG9wWzFdOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAob3BbMF0gPT09IDYgJiYgXy5sYWJlbCA8IHRbMV0pIHsgXy5sYWJlbCA9IHRbMV07IHQgPSBvcDsgYnJlYWs7IH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodFsyXSkgXy5vcHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIF8udHJ5cy5wb3AoKTsgY29udGludWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBvcCA9IGJvZHkuY2FsbCh0aGlzQXJnLCBfKTtcbiAgICAgICAgfSBjYXRjaCAoZSkgeyBvcCA9IFs2LCBlXTsgeSA9IDA7IH0gZmluYWxseSB7IGYgPSB0ID0gMDsgfVxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcbiAgICB9XG59O1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuc2F2ZUNvbW1lbnRSZXBseSA9IHZvaWQgMDtcbnZhciByZWFjdF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCJyZWFjdFwiKSk7XG52YXIgZ2V0dGV4dF8xID0gcmVxdWlyZShcIi4uLy4uLy4uLy4uL3V0aWxzL2dldHRleHRcIik7XG52YXIgY29tbWVudHNfMSA9IHJlcXVpcmUoXCIuLi8uLi9hY3Rpb25zL2NvbW1lbnRzXCIpO1xudmFyIENvbW1lbnRIZWFkZXJfMSA9IHJlcXVpcmUoXCIuLi9Db21tZW50SGVhZGVyXCIpO1xudmFyIFRleHRBcmVhXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uL1RleHRBcmVhXCIpKTtcbnZhciBJY29uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4uLy4uLy4uL0ljb24vSWNvblwiKSk7XG5mdW5jdGlvbiBzYXZlQ29tbWVudFJlcGx5KGNvbW1lbnQsIHJlcGx5LCBzdG9yZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzEudXBkYXRlUmVwbHkpKGNvbW1lbnQubG9jYWxJZCwgcmVwbHkubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdzYXZpbmcnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18xLnVwZGF0ZVJlcGx5KShjb21tZW50LmxvY2FsSWQsIHJlcGx5LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OiByZXBseS5uZXdUZXh0LFxuICAgICAgICAgICAgICAgICAgICBhdXRob3I6IHJlcGx5LmF1dGhvclxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZSAqL1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdzYXZlX2Vycm9yJ1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59XG5leHBvcnRzLnNhdmVDb21tZW50UmVwbHkgPSBzYXZlQ29tbWVudFJlcGx5O1xuZnVuY3Rpb24gZGVsZXRlQ29tbWVudFJlcGx5KGNvbW1lbnQsIHJlcGx5LCBzdG9yZSkge1xuICAgIHJldHVybiBfX2F3YWl0ZXIodGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzEudXBkYXRlUmVwbHkpKGNvbW1lbnQubG9jYWxJZCwgcmVwbHkubG9jYWxJZCwge1xuICAgICAgICAgICAgICAgIG1vZGU6ICdkZWxldGluZydcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzEuZGVsZXRlUmVwbHkpKGNvbW1lbnQubG9jYWxJZCwgcmVwbHkubG9jYWxJZCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18xLnVwZGF0ZVJlcGx5KShjb21tZW50LmxvY2FsSWQsIHJlcGx5LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kZTogJ2RlbGV0ZV9lcnJvcidcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgIH0pO1xuICAgIH0pO1xufVxudmFyIENvbW1lbnRSZXBseUNvbXBvbmVudCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICBfX2V4dGVuZHMoQ29tbWVudFJlcGx5Q29tcG9uZW50LCBfc3VwZXIpO1xuICAgIGZ1bmN0aW9uIENvbW1lbnRSZXBseUNvbXBvbmVudCgpIHtcbiAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzO1xuICAgIH1cbiAgICBDb21tZW50UmVwbHlDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckVkaXRpbmcgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbW1lbnQgPSBfYS5jb21tZW50LCByZXBseSA9IF9hLnJlcGx5LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIHZhciBvbkNoYW5nZVRleHQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18xLnVwZGF0ZVJlcGx5KShjb21tZW50LmxvY2FsSWQsIHJlcGx5LmxvY2FsSWQsIHtcbiAgICAgICAgICAgICAgICBuZXdUZXh0OiB2YWx1ZVxuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgb25TYXZlID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIHNhdmVDb21tZW50UmVwbHkoY29tbWVudCwgcmVwbHksIHN0b3JlKV07XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIF9hLnNlbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbMiAvKnJldHVybiovXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHZhciBvbkNhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgbW9kZTogJ2RlZmF1bHQnLFxuICAgICAgICAgICAgICAgIG5ld1RleHQ6IHJlcGx5LnRleHRcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIChyZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KHJlYWN0XzFbXCJkZWZhdWx0XCJdLkZyYWdtZW50LCBudWxsLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50SGVhZGVyXzEuQ29tbWVudEhlYWRlciwgeyBjb21tZW50UmVwbHk6IHJlcGx5LCBzdG9yZTogc3RvcmUsIGZvY3VzZWQ6IGlzRm9jdXNlZCB9KSxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIsIHsgb25TdWJtaXQ6IG9uU2F2ZSB9LFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoVGV4dEFyZWFfMVtcImRlZmF1bHRcIl0sIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX2lucHV0XCIsIHZhbHVlOiByZXBseS5uZXdUZXh0LCBvbkNoYW5nZTogb25DaGFuZ2VUZXh0IH0pLFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1yZXBseV9fYWN0aW9uc1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcInN1Ym1pdFwiLCBkaXNhYmxlZDogcmVwbHkubmV3VGV4dC5sZW5ndGggPT09IDAsIGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19idXR0b24gY29tbWVudC1yZXBseV9fYnV0dG9uLS1wcmltYXJ5XCIgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2ZScpKSxcbiAgICAgICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19idXR0b25cIiwgb25DbGljazogb25DYW5jZWwgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnQ2FuY2VsJykpKSkpKTtcbiAgICB9O1xuICAgIENvbW1lbnRSZXBseUNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyU2F2aW5nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCByZXBseSA9IF9hLnJlcGx5LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiByZXBseSwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X190ZXh0XCIgfSwgcmVwbHkudGV4dCksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX3Byb2dyZXNzXCIgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2aW5nLi4uJykpKSk7XG4gICAgfTtcbiAgICBDb21tZW50UmVwbHlDb21wb25lbnQucHJvdG90eXBlLnJlbmRlclNhdmVFcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29tbWVudCA9IF9hLmNvbW1lbnQsIHJlcGx5ID0gX2EucmVwbHksIHN0b3JlID0gX2Euc3RvcmUsIGlzRm9jdXNlZCA9IF9hLmlzRm9jdXNlZDtcbiAgICAgICAgdmFyIG9uQ2xpY2tSZXRyeSA9IGZ1bmN0aW9uIChlKSB7IHJldHVybiBfX2F3YWl0ZXIoX3RoaXMsIHZvaWQgMCwgdm9pZCAwLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX19nZW5lcmF0b3IodGhpcywgZnVuY3Rpb24gKF9hKSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChfYS5sYWJlbCkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzQgLyp5aWVsZCovLCBzYXZlQ29tbWVudFJlcGx5KGNvbW1lbnQsIHJlcGx5LCBzdG9yZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRIZWFkZXJfMS5Db21tZW50SGVhZGVyLCB7IGNvbW1lbnRSZXBseTogcmVwbHksIHN0b3JlOiBzdG9yZSwgZm9jdXNlZDogaXNGb2N1c2VkIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInBcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1yZXBseV9fdGV4dFwiIH0sIHJlcGx5LnRleHQpLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19lcnJvclwiIH0sXG4gICAgICAgICAgICAgICAgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnU2F2ZSBlcnJvcicpLFxuICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIiwgeyB0eXBlOiBcImJ1dHRvblwiLCBjbGFzc05hbWU6IFwiY29tbWVudC1yZXBseV9fYnV0dG9uXCIsIG9uQ2xpY2s6IG9uQ2xpY2tSZXRyeSB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdSZXRyeScpKSkpKTtcbiAgICB9O1xuICAgIENvbW1lbnRSZXBseUNvbXBvbmVudC5wcm90b3R5cGUucmVuZGVyRGVsZXRlQ29uZmlybSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgY29tbWVudCA9IF9hLmNvbW1lbnQsIHJlcGx5ID0gX2EucmVwbHksIHN0b3JlID0gX2Euc3RvcmUsIGlzRm9jdXNlZCA9IF9hLmlzRm9jdXNlZDtcbiAgICAgICAgdmFyIG9uQ2xpY2tEZWxldGUgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoX2EubGFiZWwpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOlxuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFs0IC8qeWllbGQqLywgZGVsZXRlQ29tbWVudFJlcGx5KGNvbW1lbnQsIHJlcGx5LCBzdG9yZSldO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICBfYS5zZW50KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pOyB9O1xuICAgICAgICB2YXIgb25DbGlja0NhbmNlbCA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgbW9kZTogJ2RlZmF1bHQnXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiByZXBseSwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X190ZXh0XCIgfSwgcmVwbHkudGV4dCksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX2NvbmZpcm0tZGVsZXRlXCIgfSxcbiAgICAgICAgICAgICAgICAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdBcmUgeW91IHN1cmU/JyksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19idXR0b25cIiwgb25DbGljazogb25DbGlja0NhbmNlbCB9LCAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdDYW5jZWwnKSksXG4gICAgICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImJ1dHRvblwiLCB7IHR5cGU6IFwiYnV0dG9uXCIsIGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19idXR0b24gY29tbWVudC1yZXBseV9fYnV0dG9uLS1wcmltYXJ5XCIsIG9uQ2xpY2s6IG9uQ2xpY2tEZWxldGUgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnRGVsZXRlJykpKSkpO1xuICAgIH07XG4gICAgQ29tbWVudFJlcGx5Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXJEZWxldGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIF9hID0gdGhpcy5wcm9wcywgcmVwbHkgPSBfYS5yZXBseSwgc3RvcmUgPSBfYS5zdG9yZSwgaXNGb2N1c2VkID0gX2EuaXNGb2N1c2VkO1xuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRIZWFkZXJfMS5Db21tZW50SGVhZGVyLCB7IGNvbW1lbnRSZXBseTogcmVwbHksIHN0b3JlOiBzdG9yZSwgZm9jdXNlZDogaXNGb2N1c2VkIH0pLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInBcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudC1yZXBseV9fdGV4dFwiIH0sIHJlcGx5LnRleHQpLFxuICAgICAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImRpdlwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X19wcm9ncmVzc1wiIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0RlbGV0aW5nJykpKSk7XG4gICAgfTtcbiAgICBDb21tZW50UmVwbHlDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckRlbGV0ZUVycm9yID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgX2EgPSB0aGlzLnByb3BzLCBjb21tZW50ID0gX2EuY29tbWVudCwgcmVwbHkgPSBfYS5yZXBseSwgc3RvcmUgPSBfYS5zdG9yZSwgaXNGb2N1c2VkID0gX2EuaXNGb2N1c2VkO1xuICAgICAgICB2YXIgb25DbGlja1JldHJ5ID0gZnVuY3Rpb24gKGUpIHsgcmV0dXJuIF9fYXdhaXRlcihfdGhpcywgdm9pZCAwLCB2b2lkIDAsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfX2dlbmVyYXRvcih0aGlzLCBmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKF9hLmxhYmVsKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBbNCAvKnlpZWxkKi8sIGRlbGV0ZUNvbW1lbnRSZXBseShjb21tZW50LCByZXBseSwgc3RvcmUpXTtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICAgICAgICAgX2Euc2VudCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsyIC8qcmV0dXJuKi9dO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTsgfTtcbiAgICAgICAgdmFyIG9uQ2xpY2tDYW5jZWwgPSBmdW5jdGlvbiAoZSkgeyByZXR1cm4gX19hd2FpdGVyKF90aGlzLCB2b2lkIDAsIHZvaWQgMCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsIGZ1bmN0aW9uIChfYSkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdkZWZhdWx0J1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gWzIgLypyZXR1cm4qL107XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7IH07XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiByZXBseSwgc3RvcmU6IHN0b3JlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X190ZXh0XCIgfSwgcmVwbHkudGV4dCksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX2Vycm9yXCIgfSxcbiAgICAgICAgICAgICAgICAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdEZWxldGUgZXJyb3InKSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX2J1dHRvblwiLCBvbkNsaWNrOiBvbkNsaWNrQ2FuY2VsIH0sICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ0NhbmNlbCcpKSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsIHsgdHlwZTogXCJidXR0b25cIiwgY2xhc3NOYW1lOiBcImNvbW1lbnQtcmVwbHlfX2J1dHRvblwiLCBvbkNsaWNrOiBvbkNsaWNrUmV0cnkgfSwgKDAsIGdldHRleHRfMS5nZXR0ZXh0KSgnUmV0cnknKSkpKSk7XG4gICAgfTtcbiAgICBDb21tZW50UmVwbHlDb21wb25lbnQucHJvdG90eXBlLnJlbmRlckRlZmF1bHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfYSA9IHRoaXMucHJvcHMsIGNvbW1lbnQgPSBfYS5jb21tZW50LCByZXBseSA9IF9hLnJlcGx5LCBzdG9yZSA9IF9hLnN0b3JlLCBpc0ZvY3VzZWQgPSBfYS5pc0ZvY3VzZWQ7XG4gICAgICAgIC8vIFNob3cgZWRpdC9kZWxldGUgYnV0dG9ucyBpZiB0aGlzIHJlcGx5IHdhcyBhdXRob3JlZCBieSB0aGUgY3VycmVudCB1c2VyXG4gICAgICAgIHZhciBvbkVkaXQ7XG4gICAgICAgIHZhciBvbkRlbGV0ZTtcbiAgICAgICAgaWYgKHJlcGx5LmF1dGhvciA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgKHRoaXMucHJvcHMudXNlciAmJiB0aGlzLnByb3BzLnVzZXIuaWQgPT09IHJlcGx5LmF1dGhvci5pZCkpIHtcbiAgICAgICAgICAgIG9uRWRpdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdlZGl0aW5nJyxcbiAgICAgICAgICAgICAgICAgICAgbmV3VGV4dDogcmVwbHkudGV4dFxuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBvbkRlbGV0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBzdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMS51cGRhdGVSZXBseSkoY29tbWVudC5sb2NhbElkLCByZXBseS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIG1vZGU6ICdkZWxldGVfY29uZmlybSdcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHZhciBub3RpY2UgPSAnJztcbiAgICAgICAgaWYgKCFyZXBseS5yZW1vdGVJZCB8fCByZXBseS50ZXh0ICE9PSByZXBseS5vcmlnaW5hbFRleHQpIHtcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHBhZ2UgdG8gc2F2ZSB0aGlzIHJlcGx5XG4gICAgICAgICAgICBub3RpY2UgPSAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdTYXZlIHRoZSBwYWdlIHRvIHNhdmUgdGhpcyByZXBseScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChyZWFjdF8xW1wiZGVmYXVsdFwiXS5GcmFnbWVudCwgbnVsbCxcbiAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoQ29tbWVudEhlYWRlcl8xLkNvbW1lbnRIZWFkZXIsIHsgY29tbWVudFJlcGx5OiByZXBseSwgc3RvcmU6IHN0b3JlLCBvbkVkaXQ6IG9uRWRpdCwgb25EZWxldGU6IG9uRGVsZXRlLCBmb2N1c2VkOiBpc0ZvY3VzZWQgfSksXG4gICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwicFwiLCB7IGNsYXNzTmFtZTogXCJjb21tZW50LXJlcGx5X190ZXh0XCIgfSwgcmVwbHkudGV4dCksXG4gICAgICAgICAgICBub3RpY2UgJiYgKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudF9fbm90aWNlLXBsYWNlaG9sZGVyXCIgfSxcbiAgICAgICAgICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwiZGl2XCIsIHsgY2xhc3NOYW1lOiBcImNvbW1lbnRfX25vdGljZVwiLCByb2xlOiBcInN0YXR1c1wiIH0sXG4gICAgICAgICAgICAgICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoSWNvbl8xW1wiZGVmYXVsdFwiXSwgeyBuYW1lOiBcImluZm8tY2lyY2xlXCIgfSksXG4gICAgICAgICAgICAgICAgICAgIG5vdGljZSkpKSkpO1xuICAgIH07XG4gICAgQ29tbWVudFJlcGx5Q29tcG9uZW50LnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbm5lcjtcbiAgICAgICAgc3dpdGNoICh0aGlzLnByb3BzLnJlcGx5Lm1vZGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ2VkaXRpbmcnOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJFZGl0aW5nKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdzYXZpbmcnOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJTYXZpbmcoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3NhdmVfZXJyb3InOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJTYXZlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ2RlbGV0ZV9jb25maXJtJzpcbiAgICAgICAgICAgICAgICBpbm5lciA9IHRoaXMucmVuZGVyRGVsZXRlQ29uZmlybSgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGVsZXRpbmcnOlxuICAgICAgICAgICAgICAgIGlubmVyID0gdGhpcy5yZW5kZXJEZWxldGluZygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZGVsZXRlX2Vycm9yJzpcbiAgICAgICAgICAgICAgICBpbm5lciA9IHRoaXMucmVuZGVyRGVsZXRlRXJyb3IoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgaW5uZXIgPSB0aGlzLnJlbmRlckRlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJsaVwiLCB7IGtleTogdGhpcy5wcm9wcy5yZXBseS5sb2NhbElkLCBjbGFzc05hbWU6IFwiY29tbWVudC1yZXBseSBjb21tZW50LXJlcGx5LS1tb2RlLVwiLmNvbmNhdCh0aGlzLnByb3BzLnJlcGx5Lm1vZGUpLCBcImRhdGEtcmVwbHktaWRcIjogdGhpcy5wcm9wcy5yZXBseS5sb2NhbElkIH0sIGlubmVyKSk7XG4gICAgfTtcbiAgICByZXR1cm4gQ29tbWVudFJlcGx5Q29tcG9uZW50O1xufShyZWFjdF8xW1wiZGVmYXVsdFwiXS5Db21wb25lbnQpKTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gQ29tbWVudFJlcGx5Q29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/components/CommentReply/index.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/components/Form/index.tsx":
/*!********************************************************************!*\
  !*** ./client/src/components/CommentApp/components/Form/index.tsx ***!
  \********************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.CommentFormSetComponent = exports.CommentFormComponent = exports.CommentReplyFormSetComponent = exports.CommentReplyFormComponent = void 0;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nfunction PrefixedHiddenInput(_a) {\n    var prefix = _a.prefix, value = _a.value, fieldName = _a.fieldName;\n    return (react_1[\"default\"].createElement(\"input\", { type: \"hidden\", name: \"\".concat(prefix, \"-\").concat(fieldName), value: value === null ? '' : value, id: \"id_\".concat(prefix, \"-\").concat(fieldName) }));\n}\nfunction CommentReplyFormComponent(_a) {\n    var reply = _a.reply, formNumber = _a.formNumber, prefix = _a.prefix;\n    var fullPrefix = \"\".concat(prefix, \"-\").concat(formNumber);\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: reply.deleted ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: reply.remoteId, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: reply.text, prefix: fullPrefix })));\n}\nexports.CommentReplyFormComponent = CommentReplyFormComponent;\nfunction CommentReplyFormSetComponent(_a) {\n    var replies = _a.replies, prefix = _a.prefix, remoteReplyCount = _a.remoteReplyCount;\n    var fullPrefix = \"\".concat(prefix, \"-replies\");\n    var commentForms = replies.map(function (reply, formNumber) { return (react_1[\"default\"].createElement(CommentReplyFormComponent, { key: reply.localId, formNumber: formNumber, reply: reply, prefix: fullPrefix })); });\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: replies.length, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteReplyCount, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: fullPrefix }),\n        commentForms));\n}\nexports.CommentReplyFormSetComponent = CommentReplyFormSetComponent;\nfunction CommentFormComponent(_a) {\n    var comment = _a.comment, formNumber = _a.formNumber, prefix = _a.prefix;\n    var fullPrefix = \"\".concat(prefix, \"-\").concat(formNumber);\n    return (react_1[\"default\"].createElement(\"fieldset\", null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"DELETE\", value: comment.deleted ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"resolved\", value: comment.resolved ? 1 : '', prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"id\", value: comment.remoteId, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"contentpath\", value: comment.contentpath, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"text\", value: comment.text, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"position\", value: comment.position, prefix: fullPrefix }),\n        react_1[\"default\"].createElement(CommentReplyFormSetComponent, { replies: Array.from(comment.replies.values()), prefix: fullPrefix, remoteReplyCount: comment.remoteReplyCount })));\n}\nexports.CommentFormComponent = CommentFormComponent;\nfunction CommentFormSetComponent(_a) {\n    var comments = _a.comments, remoteCommentCount = _a.remoteCommentCount;\n    var prefix = 'comments';\n    var commentForms = comments.map(function (comment, formNumber) { return (react_1[\"default\"].createElement(CommentFormComponent, { key: comment.localId, comment: comment, formNumber: formNumber, prefix: prefix })); });\n    return (react_1[\"default\"].createElement(react_1[\"default\"].Fragment, null,\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"TOTAL_FORMS\", value: comments.length, prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"INITIAL_FORMS\", value: remoteCommentCount, prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MIN_NUM_FORMS\", value: \"0\", prefix: prefix }),\n        react_1[\"default\"].createElement(PrefixedHiddenInput, { fieldName: \"MAX_NUM_FORMS\", value: \"\", prefix: prefix }),\n        commentForms));\n}\nexports.CommentFormSetComponent = CommentFormSetComponent;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0Zvcm0vaW5kZXgudHN4LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL0Zvcm0vaW5kZXgudHN4P2ZhY2EiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5Db21tZW50Rm9ybVNldENvbXBvbmVudCA9IGV4cG9ydHMuQ29tbWVudEZvcm1Db21wb25lbnQgPSBleHBvcnRzLkNvbW1lbnRSZXBseUZvcm1TZXRDb21wb25lbnQgPSBleHBvcnRzLkNvbW1lbnRSZXBseUZvcm1Db21wb25lbnQgPSB2b2lkIDA7XG52YXIgcmVhY3RfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO1xuZnVuY3Rpb24gUHJlZml4ZWRIaWRkZW5JbnB1dChfYSkge1xuICAgIHZhciBwcmVmaXggPSBfYS5wcmVmaXgsIHZhbHVlID0gX2EudmFsdWUsIGZpZWxkTmFtZSA9IF9hLmZpZWxkTmFtZTtcbiAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiLCB7IHR5cGU6IFwiaGlkZGVuXCIsIG5hbWU6IFwiXCIuY29uY2F0KHByZWZpeCwgXCItXCIpLmNvbmNhdChmaWVsZE5hbWUpLCB2YWx1ZTogdmFsdWUgPT09IG51bGwgPyAnJyA6IHZhbHVlLCBpZDogXCJpZF9cIi5jb25jYXQocHJlZml4LCBcIi1cIikuY29uY2F0KGZpZWxkTmFtZSkgfSkpO1xufVxuZnVuY3Rpb24gQ29tbWVudFJlcGx5Rm9ybUNvbXBvbmVudChfYSkge1xuICAgIHZhciByZXBseSA9IF9hLnJlcGx5LCBmb3JtTnVtYmVyID0gX2EuZm9ybU51bWJlciwgcHJlZml4ID0gX2EucHJlZml4O1xuICAgIHZhciBmdWxsUHJlZml4ID0gXCJcIi5jb25jYXQocHJlZml4LCBcIi1cIikuY29uY2F0KGZvcm1OdW1iZXIpO1xuICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcImZpZWxkc2V0XCIsIG51bGwsXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiREVMRVRFXCIsIHZhbHVlOiByZXBseS5kZWxldGVkID8gMSA6ICcnLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiaWRcIiwgdmFsdWU6IHJlcGx5LnJlbW90ZUlkLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwidGV4dFwiLCB2YWx1ZTogcmVwbHkudGV4dCwgcHJlZml4OiBmdWxsUHJlZml4IH0pKSk7XG59XG5leHBvcnRzLkNvbW1lbnRSZXBseUZvcm1Db21wb25lbnQgPSBDb21tZW50UmVwbHlGb3JtQ29tcG9uZW50O1xuZnVuY3Rpb24gQ29tbWVudFJlcGx5Rm9ybVNldENvbXBvbmVudChfYSkge1xuICAgIHZhciByZXBsaWVzID0gX2EucmVwbGllcywgcHJlZml4ID0gX2EucHJlZml4LCByZW1vdGVSZXBseUNvdW50ID0gX2EucmVtb3RlUmVwbHlDb3VudDtcbiAgICB2YXIgZnVsbFByZWZpeCA9IFwiXCIuY29uY2F0KHByZWZpeCwgXCItcmVwbGllc1wiKTtcbiAgICB2YXIgY29tbWVudEZvcm1zID0gcmVwbGllcy5tYXAoZnVuY3Rpb24gKHJlcGx5LCBmb3JtTnVtYmVyKSB7IHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50UmVwbHlGb3JtQ29tcG9uZW50LCB7IGtleTogcmVwbHkubG9jYWxJZCwgZm9ybU51bWJlcjogZm9ybU51bWJlciwgcmVwbHk6IHJlcGx5LCBwcmVmaXg6IGZ1bGxQcmVmaXggfSkpOyB9KTtcbiAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiVE9UQUxfRk9STVNcIiwgdmFsdWU6IHJlcGxpZXMubGVuZ3RoLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiSU5JVElBTF9GT1JNU1wiLCB2YWx1ZTogcmVtb3RlUmVwbHlDb3VudCwgcHJlZml4OiBmdWxsUHJlZml4IH0pLFxuICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFByZWZpeGVkSGlkZGVuSW5wdXQsIHsgZmllbGROYW1lOiBcIk1JTl9OVU1fRk9STVNcIiwgdmFsdWU6IFwiMFwiLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiTUFYX05VTV9GT1JNU1wiLCB2YWx1ZTogXCJcIiwgcHJlZml4OiBmdWxsUHJlZml4IH0pLFxuICAgICAgICBjb21tZW50Rm9ybXMpKTtcbn1cbmV4cG9ydHMuQ29tbWVudFJlcGx5Rm9ybVNldENvbXBvbmVudCA9IENvbW1lbnRSZXBseUZvcm1TZXRDb21wb25lbnQ7XG5mdW5jdGlvbiBDb21tZW50Rm9ybUNvbXBvbmVudChfYSkge1xuICAgIHZhciBjb21tZW50ID0gX2EuY29tbWVudCwgZm9ybU51bWJlciA9IF9hLmZvcm1OdW1iZXIsIHByZWZpeCA9IF9hLnByZWZpeDtcbiAgICB2YXIgZnVsbFByZWZpeCA9IFwiXCIuY29uY2F0KHByZWZpeCwgXCItXCIpLmNvbmNhdChmb3JtTnVtYmVyKTtcbiAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiLCBudWxsLFxuICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFByZWZpeGVkSGlkZGVuSW5wdXQsIHsgZmllbGROYW1lOiBcIkRFTEVURVwiLCB2YWx1ZTogY29tbWVudC5kZWxldGVkID8gMSA6ICcnLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwicmVzb2x2ZWRcIiwgdmFsdWU6IGNvbW1lbnQucmVzb2x2ZWQgPyAxIDogJycsIHByZWZpeDogZnVsbFByZWZpeCB9KSxcbiAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChQcmVmaXhlZEhpZGRlbklucHV0LCB7IGZpZWxkTmFtZTogXCJpZFwiLCB2YWx1ZTogY29tbWVudC5yZW1vdGVJZCwgcHJlZml4OiBmdWxsUHJlZml4IH0pLFxuICAgICAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFByZWZpeGVkSGlkZGVuSW5wdXQsIHsgZmllbGROYW1lOiBcImNvbnRlbnRwYXRoXCIsIHZhbHVlOiBjb21tZW50LmNvbnRlbnRwYXRoLCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwidGV4dFwiLCB2YWx1ZTogY29tbWVudC50ZXh0LCBwcmVmaXg6IGZ1bGxQcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwicG9zaXRpb25cIiwgdmFsdWU6IGNvbW1lbnQucG9zaXRpb24sIHByZWZpeDogZnVsbFByZWZpeCB9KSxcbiAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50UmVwbHlGb3JtU2V0Q29tcG9uZW50LCB7IHJlcGxpZXM6IEFycmF5LmZyb20oY29tbWVudC5yZXBsaWVzLnZhbHVlcygpKSwgcHJlZml4OiBmdWxsUHJlZml4LCByZW1vdGVSZXBseUNvdW50OiBjb21tZW50LnJlbW90ZVJlcGx5Q291bnQgfSkpKTtcbn1cbmV4cG9ydHMuQ29tbWVudEZvcm1Db21wb25lbnQgPSBDb21tZW50Rm9ybUNvbXBvbmVudDtcbmZ1bmN0aW9uIENvbW1lbnRGb3JtU2V0Q29tcG9uZW50KF9hKSB7XG4gICAgdmFyIGNvbW1lbnRzID0gX2EuY29tbWVudHMsIHJlbW90ZUNvbW1lbnRDb3VudCA9IF9hLnJlbW90ZUNvbW1lbnRDb3VudDtcbiAgICB2YXIgcHJlZml4ID0gJ2NvbW1lbnRzJztcbiAgICB2YXIgY29tbWVudEZvcm1zID0gY29tbWVudHMubWFwKGZ1bmN0aW9uIChjb21tZW50LCBmb3JtTnVtYmVyKSB7IHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChDb21tZW50Rm9ybUNvbXBvbmVudCwgeyBrZXk6IGNvbW1lbnQubG9jYWxJZCwgY29tbWVudDogY29tbWVudCwgZm9ybU51bWJlcjogZm9ybU51bWJlciwgcHJlZml4OiBwcmVmaXggfSkpOyB9KTtcbiAgICByZXR1cm4gKHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQocmVhY3RfMVtcImRlZmF1bHRcIl0uRnJhZ21lbnQsIG51bGwsXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiVE9UQUxfRk9STVNcIiwgdmFsdWU6IGNvbW1lbnRzLmxlbmd0aCwgcHJlZml4OiBwcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiSU5JVElBTF9GT1JNU1wiLCB2YWx1ZTogcmVtb3RlQ29tbWVudENvdW50LCBwcmVmaXg6IHByZWZpeCB9KSxcbiAgICAgICAgcmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChQcmVmaXhlZEhpZGRlbklucHV0LCB7IGZpZWxkTmFtZTogXCJNSU5fTlVNX0ZPUk1TXCIsIHZhbHVlOiBcIjBcIiwgcHJlZml4OiBwcmVmaXggfSksXG4gICAgICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLmNyZWF0ZUVsZW1lbnQoUHJlZml4ZWRIaWRkZW5JbnB1dCwgeyBmaWVsZE5hbWU6IFwiTUFYX05VTV9GT1JNU1wiLCB2YWx1ZTogXCJcIiwgcHJlZml4OiBwcmVmaXggfSksXG4gICAgICAgIGNvbW1lbnRGb3JtcykpO1xufVxuZXhwb3J0cy5Db21tZW50Rm9ybVNldENvbXBvbmVudCA9IENvbW1lbnRGb3JtU2V0Q29tcG9uZW50O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/components/Form/index.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/components/TextArea/index.tsx":
/*!************************************************************************!*\
  !*** ./client/src/components/CommentApp/components/TextArea/index.tsx ***!
  \************************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nvar TextArea = react_1[\"default\"].forwardRef(function (_a, ref) {\n    var value = _a.value, className = _a.className, placeholder = _a.placeholder, onChange = _a.onChange, focusOnMount = _a.focusOnMount, _b = _a.focusTarget, focusTarget = _b === void 0 ? false : _b, _c = _a.additionalAttributes, additionalAttributes = _c === void 0 ? {} : _c;\n    var onChangeValue = function (e) {\n        if (onChange) {\n            onChange(e.target.value);\n        }\n    };\n    // Resize the textarea whenever the value is changed\n    var textAreaElement = react_1[\"default\"].useRef(null);\n    react_1[\"default\"].useImperativeHandle(ref, function () { return textAreaElement.current; });\n    react_1[\"default\"].useEffect(function () {\n        if (textAreaElement.current) {\n            textAreaElement.current.style.height = '';\n            textAreaElement.current.style.height =\n                textAreaElement.current.scrollHeight + 'px';\n        }\n    }, [value, textAreaElement]);\n    // Focus the textarea when it is mounted\n    react_1[\"default\"].useEffect(function () {\n        if (focusOnMount && textAreaElement.current) {\n            textAreaElement.current.focus();\n        }\n    }, [textAreaElement]);\n    return (react_1[\"default\"].createElement(\"textarea\", __assign({ \"data-focus-target\": focusTarget, rows: 1, style: { resize: 'none', overflowY: 'hidden' }, className: className, placeholder: placeholder, ref: textAreaElement, onChange: onChangeValue, value: value }, additionalAttributes)));\n});\nexports[\"default\"] = TextArea;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL1RleHRBcmVhL2luZGV4LnRzeC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9jb21wb25lbnRzL1RleHRBcmVhL2luZGV4LnRzeD84ZmU3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fYXNzaWduID0gKHRoaXMgJiYgdGhpcy5fX2Fzc2lnbikgfHwgZnVuY3Rpb24gKCkge1xuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbih0KSB7XG4gICAgICAgIGZvciAodmFyIHMsIGkgPSAxLCBuID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IG47IGkrKykge1xuICAgICAgICAgICAgcyA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSlcbiAgICAgICAgICAgICAgICB0W3BdID0gc1twXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdDtcbiAgICB9O1xuICAgIHJldHVybiBfX2Fzc2lnbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG52YXIgcmVhY3RfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3RcIikpO1xudmFyIFRleHRBcmVhID0gcmVhY3RfMVtcImRlZmF1bHRcIl0uZm9yd2FyZFJlZihmdW5jdGlvbiAoX2EsIHJlZikge1xuICAgIHZhciB2YWx1ZSA9IF9hLnZhbHVlLCBjbGFzc05hbWUgPSBfYS5jbGFzc05hbWUsIHBsYWNlaG9sZGVyID0gX2EucGxhY2Vob2xkZXIsIG9uQ2hhbmdlID0gX2Eub25DaGFuZ2UsIGZvY3VzT25Nb3VudCA9IF9hLmZvY3VzT25Nb3VudCwgX2IgPSBfYS5mb2N1c1RhcmdldCwgZm9jdXNUYXJnZXQgPSBfYiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfYiwgX2MgPSBfYS5hZGRpdGlvbmFsQXR0cmlidXRlcywgYWRkaXRpb25hbEF0dHJpYnV0ZXMgPSBfYyA9PT0gdm9pZCAwID8ge30gOiBfYztcbiAgICB2YXIgb25DaGFuZ2VWYWx1ZSA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChvbkNoYW5nZSkge1xuICAgICAgICAgICAgb25DaGFuZ2UoZS50YXJnZXQudmFsdWUpO1xuICAgICAgICB9XG4gICAgfTtcbiAgICAvLyBSZXNpemUgdGhlIHRleHRhcmVhIHdoZW5ldmVyIHRoZSB2YWx1ZSBpcyBjaGFuZ2VkXG4gICAgdmFyIHRleHRBcmVhRWxlbWVudCA9IHJlYWN0XzFbXCJkZWZhdWx0XCJdLnVzZVJlZihudWxsKTtcbiAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS51c2VJbXBlcmF0aXZlSGFuZGxlKHJlZiwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdGV4dEFyZWFFbGVtZW50LmN1cnJlbnQ7IH0pO1xuICAgIHJlYWN0XzFbXCJkZWZhdWx0XCJdLnVzZUVmZmVjdChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICh0ZXh0QXJlYUVsZW1lbnQuY3VycmVudCkge1xuICAgICAgICAgICAgdGV4dEFyZWFFbGVtZW50LmN1cnJlbnQuc3R5bGUuaGVpZ2h0ID0gJyc7XG4gICAgICAgICAgICB0ZXh0QXJlYUVsZW1lbnQuY3VycmVudC5zdHlsZS5oZWlnaHQgPVxuICAgICAgICAgICAgICAgIHRleHRBcmVhRWxlbWVudC5jdXJyZW50LnNjcm9sbEhlaWdodCArICdweCc7XG4gICAgICAgIH1cbiAgICB9LCBbdmFsdWUsIHRleHRBcmVhRWxlbWVudF0pO1xuICAgIC8vIEZvY3VzIHRoZSB0ZXh0YXJlYSB3aGVuIGl0IGlzIG1vdW50ZWRcbiAgICByZWFjdF8xW1wiZGVmYXVsdFwiXS51c2VFZmZlY3QoZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoZm9jdXNPbk1vdW50ICYmIHRleHRBcmVhRWxlbWVudC5jdXJyZW50KSB7XG4gICAgICAgICAgICB0ZXh0QXJlYUVsZW1lbnQuY3VycmVudC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgfSwgW3RleHRBcmVhRWxlbWVudF0pO1xuICAgIHJldHVybiAocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIsIF9fYXNzaWduKHsgXCJkYXRhLWZvY3VzLXRhcmdldFwiOiBmb2N1c1RhcmdldCwgcm93czogMSwgc3R5bGU6IHsgcmVzaXplOiAnbm9uZScsIG92ZXJmbG93WTogJ2hpZGRlbicgfSwgY2xhc3NOYW1lOiBjbGFzc05hbWUsIHBsYWNlaG9sZGVyOiBwbGFjZWhvbGRlciwgcmVmOiB0ZXh0QXJlYUVsZW1lbnQsIG9uQ2hhbmdlOiBvbkNoYW5nZVZhbHVlLCB2YWx1ZTogdmFsdWUgfSwgYWRkaXRpb25hbEF0dHJpYnV0ZXMpKSk7XG59KTtcbmV4cG9ydHNbXCJkZWZhdWx0XCJdID0gVGV4dEFyZWE7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/components/TextArea/index.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/main.tsx":
/*!***************************************************!*\
  !*** ./client/src/components/CommentApp/main.tsx ***!
  \***************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.initCommentApp = exports.CommentApp = void 0;\nvar react_1 = __importDefault(__webpack_require__(/*! react */ \"./node_modules/react/index-exposed.js\"));\nvar react_dom_1 = __importDefault(__webpack_require__(/*! react-dom */ \"./node_modules/react-dom/index-exposed.js\"));\nvar redux_1 = __webpack_require__(/*! redux */ \"./node_modules/redux/es/redux.js\");\nvar layout_1 = __webpack_require__(/*! ./utils/layout */ \"./client/src/components/CommentApp/utils/layout.ts\");\nvar maps_1 = __webpack_require__(/*! ./utils/maps */ \"./client/src/components/CommentApp/utils/maps.ts\");\nvar sequences_1 = __webpack_require__(/*! ./utils/sequences */ \"./client/src/components/CommentApp/utils/sequences.ts\");\nvar state_1 = __webpack_require__(/*! ./state */ \"./client/src/components/CommentApp/state/index.ts\");\nvar comments_1 = __webpack_require__(/*! ./state/comments */ \"./client/src/components/CommentApp/state/comments.ts\");\nvar comments_2 = __webpack_require__(/*! ./actions/comments */ \"./client/src/components/CommentApp/actions/comments.ts\");\nvar settings_1 = __webpack_require__(/*! ./actions/settings */ \"./client/src/components/CommentApp/actions/settings.ts\");\nvar selectors_1 = __webpack_require__(/*! ./selectors */ \"./client/src/components/CommentApp/selectors/index.ts\");\nvar Comment_1 = __importDefault(__webpack_require__(/*! ./components/Comment */ \"./client/src/components/CommentApp/components/Comment/index.tsx\"));\nvar Form_1 = __webpack_require__(/*! ./components/Form */ \"./client/src/components/CommentApp/components/Form/index.tsx\");\nvar settings_2 = __webpack_require__(/*! ./state/settings */ \"./client/src/components/CommentApp/state/settings.ts\");\n/* eslint-enable */\nvar getAuthor = function (authors, id) {\n    var authorData = (0, maps_1.getOrDefault)(authors, String(id), {\n        name: '',\n        avatar_url: ''\n    });\n    return {\n        id: id,\n        name: authorData.name,\n        avatarUrl: authorData.avatar_url\n    };\n};\nfunction renderCommentsUi(store, layout, comments) {\n    var state = store.getState();\n    var _a = state.settings, commentsEnabled = _a.commentsEnabled, user = _a.user, currentTab = _a.currentTab;\n    var _b = state.comments, focusedComment = _b.focusedComment, forceFocus = _b.forceFocus;\n    var commentsToRender = comments;\n    if (!commentsEnabled || !user) {\n        commentsToRender = [];\n    }\n    // Hide all resolved/deleted comments\n    commentsToRender = commentsToRender.filter(function (_a) {\n        var deleted = _a.deleted, resolved = _a.resolved;\n        return !(deleted || resolved);\n    });\n    var commentsRendered = commentsToRender.map(function (comment) { return (react_1[\"default\"].createElement(Comment_1[\"default\"], { key: comment.localId, store: store, layout: layout, user: user, comment: comment, isFocused: comment.localId === focusedComment, forceFocus: forceFocus, isVisible: layout.getCommentVisible(currentTab, comment.localId) })); });\n    return react_1[\"default\"].createElement(\"ol\", { className: \"comments-list\" }, commentsRendered);\n    /* eslint-enable react/no-danger */\n}\nvar CommentApp = /** @class */ (function () {\n    function CommentApp() {\n        this.utils = {\n            selectCommentsForContentPathFactory: selectors_1.selectCommentsForContentPathFactory,\n            selectCommentFactory: selectors_1.selectCommentFactory\n        };\n        this.selectors = {\n            selectComments: selectors_1.selectComments,\n            selectEnabled: selectors_1.selectEnabled,\n            selectFocused: selectors_1.selectFocused,\n            selectIsDirty: selectors_1.selectIsDirty,\n            selectCommentCount: selectors_1.selectCommentCount\n        };\n        this.actions = comments_2.commentActionFunctions;\n        this.store = (0, redux_1.createStore)(state_1.reducer, {\n            settings: settings_2.INITIAL_STATE\n        });\n        this.layout = new layout_1.LayoutController();\n    }\n    CommentApp.prototype.setUser = function (userId, authors) {\n        this.store.dispatch((0, settings_1.updateGlobalSettings)({\n            user: getAuthor(authors, userId)\n        }));\n    };\n    CommentApp.prototype.updateAnnotation = function (annotation, commentId) {\n        this.attachAnnotationLayout(annotation, commentId);\n        this.store.dispatch((0, comments_2.updateComment)(commentId, { annotation: annotation }));\n    };\n    CommentApp.prototype.attachAnnotationLayout = function (annotation, commentId) {\n        // Attach an annotation to an existing comment in the layout\n        // const layout engine know the annotation so it would position the comment correctly\n        this.layout.setCommentAnnotation(commentId, annotation);\n    };\n    CommentApp.prototype.setCurrentTab = function (tab) {\n        this.store.dispatch((0, settings_1.updateGlobalSettings)({ currentTab: tab }));\n    };\n    CommentApp.prototype.makeComment = function (annotation, contentpath, position) {\n        if (position === void 0) { position = ''; }\n        var commentId = (0, sequences_1.getNextCommentId)();\n        this.attachAnnotationLayout(annotation, commentId);\n        // Create the comment\n        this.store.dispatch((0, comments_2.addComment)((0, comments_1.newComment)(contentpath, position, commentId, annotation, this.store.getState().settings.user, Date.now(), {\n            mode: 'creating'\n        })));\n        // Focus and pin the comment\n        this.store.dispatch((0, comments_2.setFocusedComment)(commentId, {\n            updatePinnedComment: true,\n            forceFocus: true\n        }));\n        return commentId;\n    };\n    CommentApp.prototype.setVisible = function (visible) {\n        this.store.dispatch((0, settings_1.updateGlobalSettings)({\n            commentsEnabled: visible\n        }));\n    };\n    CommentApp.prototype.invalidateContentPath = function (contentPath) {\n        // Called when a given content path on the form is no longer valid (eg, a block has been deleted)\n        this.store.dispatch((0, comments_2.invalidateContentPath)(contentPath));\n    };\n    CommentApp.prototype.updateContentPath = function (commentId, newContentPath) {\n        this.store.dispatch((0, comments_2.updateComment)(commentId, { contentpath: newContentPath }));\n    };\n    CommentApp.prototype.renderApp = function (element, outputElement, userId, initialComments, authors) {\n        var e_1, _a, e_2, _b;\n        var _this = this;\n        var pinnedComment = null;\n        this.setUser(userId, authors);\n        // Check if there is \"comment\" query parameter.\n        // If this is set, the user has clicked on a \"View on frontend\" link of an\n        // individual comment. We should focus this comment and scroll to it\n        var urlParams = new URLSearchParams(window.location.search);\n        var initialFocusedCommentId = null;\n        var commentParams = urlParams.get('comment');\n        if (commentParams) {\n            initialFocusedCommentId = parseInt(commentParams, 10);\n        }\n        var render = function () {\n            var state = _this.store.getState();\n            var commentList = Array.from(state.comments.comments.values());\n            react_dom_1[\"default\"].render(react_1[\"default\"].createElement(Form_1.CommentFormSetComponent, { comments: commentList.filter(function (comment) { return comment.mode !== 'creating'; }), remoteCommentCount: state.comments.remoteCommentCount }), outputElement);\n            // Check if the pinned comment has changed\n            if (state.comments.pinnedComment !== pinnedComment) {\n                // Tell layout controller about the pinned comment\n                // so it is moved alongside its annotation\n                _this.layout.setPinnedComment(state.comments.pinnedComment);\n                pinnedComment = state.comments.pinnedComment;\n            }\n            react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList), element, function () {\n                // Render again if layout has changed (eg, a comment was added, deleted or resized)\n                // This will just update the \"top\" style attributes in the comments to get them to move\n                _this.layout.refreshDesiredPositions(state.settings.currentTab);\n                if (_this.layout.refreshLayout()) {\n                    react_dom_1[\"default\"].render(renderCommentsUi(_this.store, _this.layout, commentList), element);\n                }\n            });\n        };\n        try {\n            // Fetch existing comments\n            for (var initialComments_1 = __values(initialComments), initialComments_1_1 = initialComments_1.next(); !initialComments_1_1.done; initialComments_1_1 = initialComments_1.next()) {\n                var comment = initialComments_1_1.value;\n                var commentId = (0, sequences_1.getNextCommentId)();\n                // Create comment\n                this.store.dispatch((0, comments_2.addComment)((0, comments_1.newComment)(comment.contentpath, comment.position, commentId, null, getAuthor(authors, comment.user), Date.parse(comment.created_at), {\n                    remoteId: comment.pk,\n                    text: comment.text,\n                    deleted: comment.deleted,\n                    resolved: comment.resolved\n                })));\n                try {\n                    // Create replies\n                    for (var _c = (e_2 = void 0, __values(comment.replies)), _d = _c.next(); !_d.done; _d = _c.next()) {\n                        var reply = _d.value;\n                        this.store.dispatch((0, comments_2.addReply)(commentId, (0, comments_1.newCommentReply)((0, sequences_1.getNextReplyId)(), getAuthor(authors, reply.user), Date.parse(reply.created_at), {\n                            remoteId: reply.pk,\n                            text: reply.text,\n                            deleted: reply.deleted\n                        })));\n                    }\n                }\n                catch (e_2_1) { e_2 = { error: e_2_1 }; }\n                finally {\n                    try {\n                        if (_d && !_d.done && (_b = _c[\"return\"])) _b.call(_c);\n                    }\n                    finally { if (e_2) throw e_2.error; }\n                }\n                // If this is the initial focused comment. Focus and pin it\n                // TODO: Scroll to this comment\n                if (initialFocusedCommentId && comment.pk === initialFocusedCommentId) {\n                    this.store.dispatch((0, comments_2.setFocusedComment)(commentId, {\n                        updatePinnedComment: true,\n                        forceFocus: true\n                    }));\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (initialComments_1_1 && !initialComments_1_1.done && (_a = initialComments_1[\"return\"])) _a.call(initialComments_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        render();\n        this.store.subscribe(render);\n        // Unfocus when document body is clicked\n        document.body.addEventListener('mousedown', function (e) {\n            if (e.target instanceof HTMLElement) {\n                // ignore if click target is a comment or an annotation\n                if (!e.target.closest('#comments, [data-annotation], [data-comment-add]')) {\n                    // Running store.dispatch directly here seems to prevent the event from being handled anywhere else\n                    setTimeout(function () {\n                        _this.store.dispatch((0, comments_2.setFocusedComment)(null, {\n                            updatePinnedComment: true,\n                            forceFocus: false\n                        }));\n                    }, 200);\n                }\n            }\n        });\n        document.body.addEventListener('commentAnchorVisibilityChange', function () {\n            // If any streamfield blocks or panels have collapsed or expanded\n            // check if we need to rerender\n            _this.layout.refreshDesiredPositions(_this.store.getState().settings.currentTab);\n            if (_this.layout.refreshLayout()) {\n                render();\n            }\n        });\n    };\n    return CommentApp;\n}());\nexports.CommentApp = CommentApp;\nfunction initCommentApp() {\n    return new CommentApp();\n}\nexports.initCommentApp = initCommentApp;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9tYWluLnRzeC5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvbWFpbi50c3g/MDkzNCJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3ZhbHVlcyA9ICh0aGlzICYmIHRoaXMuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufTtcbnZhciBfX2ltcG9ydERlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9faW1wb3J0RGVmYXVsdCkgfHwgZnVuY3Rpb24gKG1vZCkge1xuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLmluaXRDb21tZW50QXBwID0gZXhwb3J0cy5Db21tZW50QXBwID0gdm9pZCAwO1xudmFyIHJlYWN0XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcInJlYWN0XCIpKTtcbnZhciByZWFjdF9kb21fMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwicmVhY3QtZG9tXCIpKTtcbnZhciByZWR1eF8xID0gcmVxdWlyZShcInJlZHV4XCIpO1xudmFyIGxheW91dF8xID0gcmVxdWlyZShcIi4vdXRpbHMvbGF5b3V0XCIpO1xudmFyIG1hcHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzL21hcHNcIik7XG52YXIgc2VxdWVuY2VzXzEgPSByZXF1aXJlKFwiLi91dGlscy9zZXF1ZW5jZXNcIik7XG52YXIgc3RhdGVfMSA9IHJlcXVpcmUoXCIuL3N0YXRlXCIpO1xudmFyIGNvbW1lbnRzXzEgPSByZXF1aXJlKFwiLi9zdGF0ZS9jb21tZW50c1wiKTtcbnZhciBjb21tZW50c18yID0gcmVxdWlyZShcIi4vYWN0aW9ucy9jb21tZW50c1wiKTtcbnZhciBzZXR0aW5nc18xID0gcmVxdWlyZShcIi4vYWN0aW9ucy9zZXR0aW5nc1wiKTtcbnZhciBzZWxlY3RvcnNfMSA9IHJlcXVpcmUoXCIuL3NlbGVjdG9yc1wiKTtcbnZhciBDb21tZW50XzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vY29tcG9uZW50cy9Db21tZW50XCIpKTtcbnZhciBGb3JtXzEgPSByZXF1aXJlKFwiLi9jb21wb25lbnRzL0Zvcm1cIik7XG52YXIgc2V0dGluZ3NfMiA9IHJlcXVpcmUoXCIuL3N0YXRlL3NldHRpbmdzXCIpO1xuLyogZXNsaW50LWVuYWJsZSAqL1xudmFyIGdldEF1dGhvciA9IGZ1bmN0aW9uIChhdXRob3JzLCBpZCkge1xuICAgIHZhciBhdXRob3JEYXRhID0gKDAsIG1hcHNfMS5nZXRPckRlZmF1bHQpKGF1dGhvcnMsIFN0cmluZyhpZCksIHtcbiAgICAgICAgbmFtZTogJycsXG4gICAgICAgIGF2YXRhcl91cmw6ICcnXG4gICAgfSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGlkLFxuICAgICAgICBuYW1lOiBhdXRob3JEYXRhLm5hbWUsXG4gICAgICAgIGF2YXRhclVybDogYXV0aG9yRGF0YS5hdmF0YXJfdXJsXG4gICAgfTtcbn07XG5mdW5jdGlvbiByZW5kZXJDb21tZW50c1VpKHN0b3JlLCBsYXlvdXQsIGNvbW1lbnRzKSB7XG4gICAgdmFyIHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICB2YXIgX2EgPSBzdGF0ZS5zZXR0aW5ncywgY29tbWVudHNFbmFibGVkID0gX2EuY29tbWVudHNFbmFibGVkLCB1c2VyID0gX2EudXNlciwgY3VycmVudFRhYiA9IF9hLmN1cnJlbnRUYWI7XG4gICAgdmFyIF9iID0gc3RhdGUuY29tbWVudHMsIGZvY3VzZWRDb21tZW50ID0gX2IuZm9jdXNlZENvbW1lbnQsIGZvcmNlRm9jdXMgPSBfYi5mb3JjZUZvY3VzO1xuICAgIHZhciBjb21tZW50c1RvUmVuZGVyID0gY29tbWVudHM7XG4gICAgaWYgKCFjb21tZW50c0VuYWJsZWQgfHwgIXVzZXIpIHtcbiAgICAgICAgY29tbWVudHNUb1JlbmRlciA9IFtdO1xuICAgIH1cbiAgICAvLyBIaWRlIGFsbCByZXNvbHZlZC9kZWxldGVkIGNvbW1lbnRzXG4gICAgY29tbWVudHNUb1JlbmRlciA9IGNvbW1lbnRzVG9SZW5kZXIuZmlsdGVyKGZ1bmN0aW9uIChfYSkge1xuICAgICAgICB2YXIgZGVsZXRlZCA9IF9hLmRlbGV0ZWQsIHJlc29sdmVkID0gX2EucmVzb2x2ZWQ7XG4gICAgICAgIHJldHVybiAhKGRlbGV0ZWQgfHwgcmVzb2x2ZWQpO1xuICAgIH0pO1xuICAgIHZhciBjb21tZW50c1JlbmRlcmVkID0gY29tbWVudHNUb1JlbmRlci5tYXAoZnVuY3Rpb24gKGNvbW1lbnQpIHsgcmV0dXJuIChyZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KENvbW1lbnRfMVtcImRlZmF1bHRcIl0sIHsga2V5OiBjb21tZW50LmxvY2FsSWQsIHN0b3JlOiBzdG9yZSwgbGF5b3V0OiBsYXlvdXQsIHVzZXI6IHVzZXIsIGNvbW1lbnQ6IGNvbW1lbnQsIGlzRm9jdXNlZDogY29tbWVudC5sb2NhbElkID09PSBmb2N1c2VkQ29tbWVudCwgZm9yY2VGb2N1czogZm9yY2VGb2N1cywgaXNWaXNpYmxlOiBsYXlvdXQuZ2V0Q29tbWVudFZpc2libGUoY3VycmVudFRhYiwgY29tbWVudC5sb2NhbElkKSB9KSk7IH0pO1xuICAgIHJldHVybiByZWFjdF8xW1wiZGVmYXVsdFwiXS5jcmVhdGVFbGVtZW50KFwib2xcIiwgeyBjbGFzc05hbWU6IFwiY29tbWVudHMtbGlzdFwiIH0sIGNvbW1lbnRzUmVuZGVyZWQpO1xuICAgIC8qIGVzbGludC1lbmFibGUgcmVhY3Qvbm8tZGFuZ2VyICovXG59XG52YXIgQ29tbWVudEFwcCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBDb21tZW50QXBwKCkge1xuICAgICAgICB0aGlzLnV0aWxzID0ge1xuICAgICAgICAgICAgc2VsZWN0Q29tbWVudHNGb3JDb250ZW50UGF0aEZhY3Rvcnk6IHNlbGVjdG9yc18xLnNlbGVjdENvbW1lbnRzRm9yQ29udGVudFBhdGhGYWN0b3J5LFxuICAgICAgICAgICAgc2VsZWN0Q29tbWVudEZhY3Rvcnk6IHNlbGVjdG9yc18xLnNlbGVjdENvbW1lbnRGYWN0b3J5XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuc2VsZWN0b3JzID0ge1xuICAgICAgICAgICAgc2VsZWN0Q29tbWVudHM6IHNlbGVjdG9yc18xLnNlbGVjdENvbW1lbnRzLFxuICAgICAgICAgICAgc2VsZWN0RW5hYmxlZDogc2VsZWN0b3JzXzEuc2VsZWN0RW5hYmxlZCxcbiAgICAgICAgICAgIHNlbGVjdEZvY3VzZWQ6IHNlbGVjdG9yc18xLnNlbGVjdEZvY3VzZWQsXG4gICAgICAgICAgICBzZWxlY3RJc0RpcnR5OiBzZWxlY3RvcnNfMS5zZWxlY3RJc0RpcnR5LFxuICAgICAgICAgICAgc2VsZWN0Q29tbWVudENvdW50OiBzZWxlY3RvcnNfMS5zZWxlY3RDb21tZW50Q291bnRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5hY3Rpb25zID0gY29tbWVudHNfMi5jb21tZW50QWN0aW9uRnVuY3Rpb25zO1xuICAgICAgICB0aGlzLnN0b3JlID0gKDAsIHJlZHV4XzEuY3JlYXRlU3RvcmUpKHN0YXRlXzEucmVkdWNlciwge1xuICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzXzIuSU5JVElBTF9TVEFURVxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5sYXlvdXQgPSBuZXcgbGF5b3V0XzEuTGF5b3V0Q29udHJvbGxlcigpO1xuICAgIH1cbiAgICBDb21tZW50QXBwLnByb3RvdHlwZS5zZXRVc2VyID0gZnVuY3Rpb24gKHVzZXJJZCwgYXV0aG9ycykge1xuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKCgwLCBzZXR0aW5nc18xLnVwZGF0ZUdsb2JhbFNldHRpbmdzKSh7XG4gICAgICAgICAgICB1c2VyOiBnZXRBdXRob3IoYXV0aG9ycywgdXNlcklkKVxuICAgICAgICB9KSk7XG4gICAgfTtcbiAgICBDb21tZW50QXBwLnByb3RvdHlwZS51cGRhdGVBbm5vdGF0aW9uID0gZnVuY3Rpb24gKGFubm90YXRpb24sIGNvbW1lbnRJZCkge1xuICAgICAgICB0aGlzLmF0dGFjaEFubm90YXRpb25MYXlvdXQoYW5ub3RhdGlvbiwgY29tbWVudElkKTtcbiAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi51cGRhdGVDb21tZW50KShjb21tZW50SWQsIHsgYW5ub3RhdGlvbjogYW5ub3RhdGlvbiB9KSk7XG4gICAgfTtcbiAgICBDb21tZW50QXBwLnByb3RvdHlwZS5hdHRhY2hBbm5vdGF0aW9uTGF5b3V0ID0gZnVuY3Rpb24gKGFubm90YXRpb24sIGNvbW1lbnRJZCkge1xuICAgICAgICAvLyBBdHRhY2ggYW4gYW5ub3RhdGlvbiB0byBhbiBleGlzdGluZyBjb21tZW50IGluIHRoZSBsYXlvdXRcbiAgICAgICAgLy8gY29uc3QgbGF5b3V0IGVuZ2luZSBrbm93IHRoZSBhbm5vdGF0aW9uIHNvIGl0IHdvdWxkIHBvc2l0aW9uIHRoZSBjb21tZW50IGNvcnJlY3RseVxuICAgICAgICB0aGlzLmxheW91dC5zZXRDb21tZW50QW5ub3RhdGlvbihjb21tZW50SWQsIGFubm90YXRpb24pO1xuICAgIH07XG4gICAgQ29tbWVudEFwcC5wcm90b3R5cGUuc2V0Q3VycmVudFRhYiA9IGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgoMCwgc2V0dGluZ3NfMS51cGRhdGVHbG9iYWxTZXR0aW5ncykoeyBjdXJyZW50VGFiOiB0YWIgfSkpO1xuICAgIH07XG4gICAgQ29tbWVudEFwcC5wcm90b3R5cGUubWFrZUNvbW1lbnQgPSBmdW5jdGlvbiAoYW5ub3RhdGlvbiwgY29udGVudHBhdGgsIHBvc2l0aW9uKSB7XG4gICAgICAgIGlmIChwb3NpdGlvbiA9PT0gdm9pZCAwKSB7IHBvc2l0aW9uID0gJyc7IH1cbiAgICAgICAgdmFyIGNvbW1lbnRJZCA9ICgwLCBzZXF1ZW5jZXNfMS5nZXROZXh0Q29tbWVudElkKSgpO1xuICAgICAgICB0aGlzLmF0dGFjaEFubm90YXRpb25MYXlvdXQoYW5ub3RhdGlvbiwgY29tbWVudElkKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBjb21tZW50XG4gICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuYWRkQ29tbWVudCkoKDAsIGNvbW1lbnRzXzEubmV3Q29tbWVudCkoY29udGVudHBhdGgsIHBvc2l0aW9uLCBjb21tZW50SWQsIGFubm90YXRpb24sIHRoaXMuc3RvcmUuZ2V0U3RhdGUoKS5zZXR0aW5ncy51c2VyLCBEYXRlLm5vdygpLCB7XG4gICAgICAgICAgICBtb2RlOiAnY3JlYXRpbmcnXG4gICAgICAgIH0pKSk7XG4gICAgICAgIC8vIEZvY3VzIGFuZCBwaW4gdGhlIGNvbW1lbnRcbiAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi5zZXRGb2N1c2VkQ29tbWVudCkoY29tbWVudElkLCB7XG4gICAgICAgICAgICB1cGRhdGVQaW5uZWRDb21tZW50OiB0cnVlLFxuICAgICAgICAgICAgZm9yY2VGb2N1czogdHJ1ZVxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBjb21tZW50SWQ7XG4gICAgfTtcbiAgICBDb21tZW50QXBwLnByb3RvdHlwZS5zZXRWaXNpYmxlID0gZnVuY3Rpb24gKHZpc2libGUpIHtcbiAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgoMCwgc2V0dGluZ3NfMS51cGRhdGVHbG9iYWxTZXR0aW5ncykoe1xuICAgICAgICAgICAgY29tbWVudHNFbmFibGVkOiB2aXNpYmxlXG4gICAgICAgIH0pKTtcbiAgICB9O1xuICAgIENvbW1lbnRBcHAucHJvdG90eXBlLmludmFsaWRhdGVDb250ZW50UGF0aCA9IGZ1bmN0aW9uIChjb250ZW50UGF0aCkge1xuICAgICAgICAvLyBDYWxsZWQgd2hlbiBhIGdpdmVuIGNvbnRlbnQgcGF0aCBvbiB0aGUgZm9ybSBpcyBubyBsb25nZXIgdmFsaWQgKGVnLCBhIGJsb2NrIGhhcyBiZWVuIGRlbGV0ZWQpXG4gICAgICAgIHRoaXMuc3RvcmUuZGlzcGF0Y2goKDAsIGNvbW1lbnRzXzIuaW52YWxpZGF0ZUNvbnRlbnRQYXRoKShjb250ZW50UGF0aCkpO1xuICAgIH07XG4gICAgQ29tbWVudEFwcC5wcm90b3R5cGUudXBkYXRlQ29udGVudFBhdGggPSBmdW5jdGlvbiAoY29tbWVudElkLCBuZXdDb250ZW50UGF0aCkge1xuICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnVwZGF0ZUNvbW1lbnQpKGNvbW1lbnRJZCwgeyBjb250ZW50cGF0aDogbmV3Q29udGVudFBhdGggfSkpO1xuICAgIH07XG4gICAgQ29tbWVudEFwcC5wcm90b3R5cGUucmVuZGVyQXBwID0gZnVuY3Rpb24gKGVsZW1lbnQsIG91dHB1dEVsZW1lbnQsIHVzZXJJZCwgaW5pdGlhbENvbW1lbnRzLCBhdXRob3JzKSB7XG4gICAgICAgIHZhciBlXzEsIF9hLCBlXzIsIF9iO1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICB2YXIgcGlubmVkQ29tbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuc2V0VXNlcih1c2VySWQsIGF1dGhvcnMpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBcImNvbW1lbnRcIiBxdWVyeSBwYXJhbWV0ZXIuXG4gICAgICAgIC8vIElmIHRoaXMgaXMgc2V0LCB0aGUgdXNlciBoYXMgY2xpY2tlZCBvbiBhIFwiVmlldyBvbiBmcm9udGVuZFwiIGxpbmsgb2YgYW5cbiAgICAgICAgLy8gaW5kaXZpZHVhbCBjb21tZW50LiBXZSBzaG91bGQgZm9jdXMgdGhpcyBjb21tZW50IGFuZCBzY3JvbGwgdG8gaXRcbiAgICAgICAgdmFyIHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgIHZhciBpbml0aWFsRm9jdXNlZENvbW1lbnRJZCA9IG51bGw7XG4gICAgICAgIHZhciBjb21tZW50UGFyYW1zID0gdXJsUGFyYW1zLmdldCgnY29tbWVudCcpO1xuICAgICAgICBpZiAoY29tbWVudFBhcmFtcykge1xuICAgICAgICAgICAgaW5pdGlhbEZvY3VzZWRDb21tZW50SWQgPSBwYXJzZUludChjb21tZW50UGFyYW1zLCAxMCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHJlbmRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9IF90aGlzLnN0b3JlLmdldFN0YXRlKCk7XG4gICAgICAgICAgICB2YXIgY29tbWVudExpc3QgPSBBcnJheS5mcm9tKHN0YXRlLmNvbW1lbnRzLmNvbW1lbnRzLnZhbHVlcygpKTtcbiAgICAgICAgICAgIHJlYWN0X2RvbV8xW1wiZGVmYXVsdFwiXS5yZW5kZXIocmVhY3RfMVtcImRlZmF1bHRcIl0uY3JlYXRlRWxlbWVudChGb3JtXzEuQ29tbWVudEZvcm1TZXRDb21wb25lbnQsIHsgY29tbWVudHM6IGNvbW1lbnRMaXN0LmZpbHRlcihmdW5jdGlvbiAoY29tbWVudCkgeyByZXR1cm4gY29tbWVudC5tb2RlICE9PSAnY3JlYXRpbmcnOyB9KSwgcmVtb3RlQ29tbWVudENvdW50OiBzdGF0ZS5jb21tZW50cy5yZW1vdGVDb21tZW50Q291bnQgfSksIG91dHB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIHBpbm5lZCBjb21tZW50IGhhcyBjaGFuZ2VkXG4gICAgICAgICAgICBpZiAoc3RhdGUuY29tbWVudHMucGlubmVkQ29tbWVudCAhPT0gcGlubmVkQ29tbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIFRlbGwgbGF5b3V0IGNvbnRyb2xsZXIgYWJvdXQgdGhlIHBpbm5lZCBjb21tZW50XG4gICAgICAgICAgICAgICAgLy8gc28gaXQgaXMgbW92ZWQgYWxvbmdzaWRlIGl0cyBhbm5vdGF0aW9uXG4gICAgICAgICAgICAgICAgX3RoaXMubGF5b3V0LnNldFBpbm5lZENvbW1lbnQoc3RhdGUuY29tbWVudHMucGlubmVkQ29tbWVudCk7XG4gICAgICAgICAgICAgICAgcGlubmVkQ29tbWVudCA9IHN0YXRlLmNvbW1lbnRzLnBpbm5lZENvbW1lbnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWFjdF9kb21fMVtcImRlZmF1bHRcIl0ucmVuZGVyKHJlbmRlckNvbW1lbnRzVWkoX3RoaXMuc3RvcmUsIF90aGlzLmxheW91dCwgY29tbWVudExpc3QpLCBlbGVtZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy8gUmVuZGVyIGFnYWluIGlmIGxheW91dCBoYXMgY2hhbmdlZCAoZWcsIGEgY29tbWVudCB3YXMgYWRkZWQsIGRlbGV0ZWQgb3IgcmVzaXplZClcbiAgICAgICAgICAgICAgICAvLyBUaGlzIHdpbGwganVzdCB1cGRhdGUgdGhlIFwidG9wXCIgc3R5bGUgYXR0cmlidXRlcyBpbiB0aGUgY29tbWVudHMgdG8gZ2V0IHRoZW0gdG8gbW92ZVxuICAgICAgICAgICAgICAgIF90aGlzLmxheW91dC5yZWZyZXNoRGVzaXJlZFBvc2l0aW9ucyhzdGF0ZS5zZXR0aW5ncy5jdXJyZW50VGFiKTtcbiAgICAgICAgICAgICAgICBpZiAoX3RoaXMubGF5b3V0LnJlZnJlc2hMYXlvdXQoKSkge1xuICAgICAgICAgICAgICAgICAgICByZWFjdF9kb21fMVtcImRlZmF1bHRcIl0ucmVuZGVyKHJlbmRlckNvbW1lbnRzVWkoX3RoaXMuc3RvcmUsIF90aGlzLmxheW91dCwgY29tbWVudExpc3QpLCBlbGVtZW50KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEZldGNoIGV4aXN0aW5nIGNvbW1lbnRzXG4gICAgICAgICAgICBmb3IgKHZhciBpbml0aWFsQ29tbWVudHNfMSA9IF9fdmFsdWVzKGluaXRpYWxDb21tZW50cyksIGluaXRpYWxDb21tZW50c18xXzEgPSBpbml0aWFsQ29tbWVudHNfMS5uZXh0KCk7ICFpbml0aWFsQ29tbWVudHNfMV8xLmRvbmU7IGluaXRpYWxDb21tZW50c18xXzEgPSBpbml0aWFsQ29tbWVudHNfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IGluaXRpYWxDb21tZW50c18xXzEudmFsdWU7XG4gICAgICAgICAgICAgICAgdmFyIGNvbW1lbnRJZCA9ICgwLCBzZXF1ZW5jZXNfMS5nZXROZXh0Q29tbWVudElkKSgpO1xuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBjb21tZW50XG4gICAgICAgICAgICAgICAgdGhpcy5zdG9yZS5kaXNwYXRjaCgoMCwgY29tbWVudHNfMi5hZGRDb21tZW50KSgoMCwgY29tbWVudHNfMS5uZXdDb21tZW50KShjb21tZW50LmNvbnRlbnRwYXRoLCBjb21tZW50LnBvc2l0aW9uLCBjb21tZW50SWQsIG51bGwsIGdldEF1dGhvcihhdXRob3JzLCBjb21tZW50LnVzZXIpLCBEYXRlLnBhcnNlKGNvbW1lbnQuY3JlYXRlZF9hdCksIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3RlSWQ6IGNvbW1lbnQucGssXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6IGNvbW1lbnQudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlZDogY29tbWVudC5kZWxldGVkLFxuICAgICAgICAgICAgICAgICAgICByZXNvbHZlZDogY29tbWVudC5yZXNvbHZlZFxuICAgICAgICAgICAgICAgIH0pKSk7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHJlcGxpZXNcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSAoZV8yID0gdm9pZCAwLCBfX3ZhbHVlcyhjb21tZW50LnJlcGxpZXMpKSwgX2QgPSBfYy5uZXh0KCk7ICFfZC5kb25lOyBfZCA9IF9jLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlcGx5ID0gX2QudmFsdWU7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLmFkZFJlcGx5KShjb21tZW50SWQsICgwLCBjb21tZW50c18xLm5ld0NvbW1lbnRSZXBseSkoKDAsIHNlcXVlbmNlc18xLmdldE5leHRSZXBseUlkKSgpLCBnZXRBdXRob3IoYXV0aG9ycywgcmVwbHkudXNlciksIERhdGUucGFyc2UocmVwbHkuY3JlYXRlZF9hdCksIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdGVJZDogcmVwbHkucGssXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogcmVwbHkudGV4dCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGVkOiByZXBseS5kZWxldGVkXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9XG4gICAgICAgICAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9iID0gX2NbXCJyZXR1cm5cIl0pKSBfYi5jYWxsKF9jKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgaXMgdGhlIGluaXRpYWwgZm9jdXNlZCBjb21tZW50LiBGb2N1cyBhbmQgcGluIGl0XG4gICAgICAgICAgICAgICAgLy8gVE9ETzogU2Nyb2xsIHRvIHRoaXMgY29tbWVudFxuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsRm9jdXNlZENvbW1lbnRJZCAmJiBjb21tZW50LnBrID09PSBpbml0aWFsRm9jdXNlZENvbW1lbnRJZCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnNldEZvY3VzZWRDb21tZW50KShjb21tZW50SWQsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3JjZUZvY3VzOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgZmluYWxseSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGlmIChpbml0aWFsQ29tbWVudHNfMV8xICYmICFpbml0aWFsQ29tbWVudHNfMV8xLmRvbmUgJiYgKF9hID0gaW5pdGlhbENvbW1lbnRzXzFbXCJyZXR1cm5cIl0pKSBfYS5jYWxsKGluaXRpYWxDb21tZW50c18xKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH1cbiAgICAgICAgfVxuICAgICAgICByZW5kZXIoKTtcbiAgICAgICAgdGhpcy5zdG9yZS5zdWJzY3JpYmUocmVuZGVyKTtcbiAgICAgICAgLy8gVW5mb2N1cyB3aGVuIGRvY3VtZW50IGJvZHkgaXMgY2xpY2tlZFxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBpZiAoZS50YXJnZXQgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCkge1xuICAgICAgICAgICAgICAgIC8vIGlnbm9yZSBpZiBjbGljayB0YXJnZXQgaXMgYSBjb21tZW50IG9yIGFuIGFubm90YXRpb25cbiAgICAgICAgICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJyNjb21tZW50cywgW2RhdGEtYW5ub3RhdGlvbl0sIFtkYXRhLWNvbW1lbnQtYWRkXScpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFJ1bm5pbmcgc3RvcmUuZGlzcGF0Y2ggZGlyZWN0bHkgaGVyZSBzZWVtcyB0byBwcmV2ZW50IHRoZSBldmVudCBmcm9tIGJlaW5nIGhhbmRsZWQgYW55d2hlcmUgZWxzZVxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnN0b3JlLmRpc3BhdGNoKCgwLCBjb21tZW50c18yLnNldEZvY3VzZWRDb21tZW50KShudWxsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGlubmVkQ29tbWVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZUZvY3VzOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY29tbWVudEFuY2hvclZpc2liaWxpdHlDaGFuZ2UnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBJZiBhbnkgc3RyZWFtZmllbGQgYmxvY2tzIG9yIHBhbmVscyBoYXZlIGNvbGxhcHNlZCBvciBleHBhbmRlZFxuICAgICAgICAgICAgLy8gY2hlY2sgaWYgd2UgbmVlZCB0byByZXJlbmRlclxuICAgICAgICAgICAgX3RoaXMubGF5b3V0LnJlZnJlc2hEZXNpcmVkUG9zaXRpb25zKF90aGlzLnN0b3JlLmdldFN0YXRlKCkuc2V0dGluZ3MuY3VycmVudFRhYik7XG4gICAgICAgICAgICBpZiAoX3RoaXMubGF5b3V0LnJlZnJlc2hMYXlvdXQoKSkge1xuICAgICAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuICAgIHJldHVybiBDb21tZW50QXBwO1xufSgpKTtcbmV4cG9ydHMuQ29tbWVudEFwcCA9IENvbW1lbnRBcHA7XG5mdW5jdGlvbiBpbml0Q29tbWVudEFwcCgpIHtcbiAgICByZXR1cm4gbmV3IENvbW1lbnRBcHAoKTtcbn1cbmV4cG9ydHMuaW5pdENvbW1lbnRBcHAgPSBpbml0Q29tbWVudEFwcDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/main.tsx\n");

/***/ }),

/***/ "./client/src/components/CommentApp/selectors/index.ts":
/*!*************************************************************!*\
  !*** ./client/src/components/CommentApp/selectors/index.ts ***!
  \*************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nexports.selectCommentCount = exports.selectIsDirty = exports.selectEnabled = exports.selectCommentFactory = exports.selectCommentsForContentPathFactory = exports.selectRemoteCommentCount = exports.selectFocused = exports.selectComments = void 0;\nvar reselect_1 = __webpack_require__(/*! reselect */ \"./node_modules/reselect/es/index.js\");\nvar selectComments = function (state) { return state.comments.comments; };\nexports.selectComments = selectComments;\nvar selectFocused = function (state) { return state.comments.focusedComment; };\nexports.selectFocused = selectFocused;\nvar selectRemoteCommentCount = function (state) {\n    return state.comments.remoteCommentCount;\n};\nexports.selectRemoteCommentCount = selectRemoteCommentCount;\nfunction selectCommentsForContentPathFactory(contentpath) {\n    return (0, reselect_1.createSelector)(exports.selectComments, function (comments) {\n        return __spreadArray([], __read(comments.values()), false).filter(function (comment) {\n            return comment.contentpath === contentpath &&\n                !(comment.deleted || comment.resolved);\n        });\n    });\n}\nexports.selectCommentsForContentPathFactory = selectCommentsForContentPathFactory;\nfunction selectCommentFactory(localId) {\n    return (0, reselect_1.createSelector)(exports.selectComments, function (comments) {\n        var comment = comments.get(localId);\n        if (comment !== undefined && (comment.deleted || comment.resolved)) {\n            return undefined;\n        }\n        return comment;\n    });\n}\nexports.selectCommentFactory = selectCommentFactory;\nvar selectEnabled = function (state) { return state.settings.commentsEnabled; };\nexports.selectEnabled = selectEnabled;\nexports.selectIsDirty = (0, reselect_1.createSelector)(exports.selectComments, exports.selectRemoteCommentCount, function (comments, remoteCommentCount) {\n    if (remoteCommentCount !== comments.size) {\n        return true;\n    }\n    return Array.from(comments.values()).some(function (comment) {\n        if (comment.deleted ||\n            comment.resolved ||\n            comment.replies.size !== comment.remoteReplyCount ||\n            comment.originalText !== comment.text) {\n            return true;\n        }\n        return Array.from(comment.replies.values()).some(function (reply) { return reply.deleted || reply.originalText !== reply.text; });\n    });\n});\nvar selectCommentCount = function (state) {\n    return __spreadArray([], __read(state.comments.comments.values()), false).filter(function (comment) { return !comment.deleted && !comment.resolved; }).length;\n};\nexports.selectCommentCount = selectCommentCount;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zZWxlY3RvcnMvaW5kZXgudHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvc2VsZWN0b3JzL2luZGV4LnRzP2MwMzMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19yZWFkID0gKHRoaXMgJiYgdGhpcy5fX3JlYWQpIHx8IGZ1bmN0aW9uIChvLCBuKSB7XG4gICAgdmFyIG0gPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdO1xuICAgIGlmICghbSkgcmV0dXJuIG87XG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XG4gICAgdHJ5IHtcbiAgICAgICAgd2hpbGUgKChuID09PSB2b2lkIDAgfHwgbi0tID4gMCkgJiYgIShyID0gaS5uZXh0KCkpLmRvbmUpIGFyLnB1c2goci52YWx1ZSk7XG4gICAgfVxuICAgIGNhdGNoIChlcnJvcikgeyBlID0geyBlcnJvcjogZXJyb3IgfTsgfVxuICAgIGZpbmFsbHkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgaWYgKHIgJiYgIXIuZG9uZSAmJiAobSA9IGlbXCJyZXR1cm5cIl0pKSBtLmNhbGwoaSk7XG4gICAgICAgIH1cbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XG4gICAgfVxuICAgIHJldHVybiBhcjtcbn07XG52YXIgX19zcHJlYWRBcnJheSA9ICh0aGlzICYmIHRoaXMuX19zcHJlYWRBcnJheSkgfHwgZnVuY3Rpb24gKHRvLCBmcm9tLCBwYWNrKSB7XG4gICAgaWYgKHBhY2sgfHwgYXJndW1lbnRzLmxlbmd0aCA9PT0gMikgZm9yICh2YXIgaSA9IDAsIGwgPSBmcm9tLmxlbmd0aCwgYXI7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xuICAgICAgICAgICAgaWYgKCFhcikgYXIgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLCAwLCBpKTtcbiAgICAgICAgICAgIGFyW2ldID0gZnJvbVtpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdG8uY29uY2F0KGFyIHx8IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20pKTtcbn07XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5zZWxlY3RDb21tZW50Q291bnQgPSBleHBvcnRzLnNlbGVjdElzRGlydHkgPSBleHBvcnRzLnNlbGVjdEVuYWJsZWQgPSBleHBvcnRzLnNlbGVjdENvbW1lbnRGYWN0b3J5ID0gZXhwb3J0cy5zZWxlY3RDb21tZW50c0ZvckNvbnRlbnRQYXRoRmFjdG9yeSA9IGV4cG9ydHMuc2VsZWN0UmVtb3RlQ29tbWVudENvdW50ID0gZXhwb3J0cy5zZWxlY3RGb2N1c2VkID0gZXhwb3J0cy5zZWxlY3RDb21tZW50cyA9IHZvaWQgMDtcbnZhciByZXNlbGVjdF8xID0gcmVxdWlyZShcInJlc2VsZWN0XCIpO1xudmFyIHNlbGVjdENvbW1lbnRzID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5jb21tZW50cy5jb21tZW50czsgfTtcbmV4cG9ydHMuc2VsZWN0Q29tbWVudHMgPSBzZWxlY3RDb21tZW50cztcbnZhciBzZWxlY3RGb2N1c2VkID0gZnVuY3Rpb24gKHN0YXRlKSB7IHJldHVybiBzdGF0ZS5jb21tZW50cy5mb2N1c2VkQ29tbWVudDsgfTtcbmV4cG9ydHMuc2VsZWN0Rm9jdXNlZCA9IHNlbGVjdEZvY3VzZWQ7XG52YXIgc2VsZWN0UmVtb3RlQ29tbWVudENvdW50ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLmNvbW1lbnRzLnJlbW90ZUNvbW1lbnRDb3VudDtcbn07XG5leHBvcnRzLnNlbGVjdFJlbW90ZUNvbW1lbnRDb3VudCA9IHNlbGVjdFJlbW90ZUNvbW1lbnRDb3VudDtcbmZ1bmN0aW9uIHNlbGVjdENvbW1lbnRzRm9yQ29udGVudFBhdGhGYWN0b3J5KGNvbnRlbnRwYXRoKSB7XG4gICAgcmV0dXJuICgwLCByZXNlbGVjdF8xLmNyZWF0ZVNlbGVjdG9yKShleHBvcnRzLnNlbGVjdENvbW1lbnRzLCBmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChjb21tZW50cy52YWx1ZXMoKSksIGZhbHNlKS5maWx0ZXIoZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgICAgIHJldHVybiBjb21tZW50LmNvbnRlbnRwYXRoID09PSBjb250ZW50cGF0aCAmJlxuICAgICAgICAgICAgICAgICEoY29tbWVudC5kZWxldGVkIHx8IGNvbW1lbnQucmVzb2x2ZWQpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn1cbmV4cG9ydHMuc2VsZWN0Q29tbWVudHNGb3JDb250ZW50UGF0aEZhY3RvcnkgPSBzZWxlY3RDb21tZW50c0ZvckNvbnRlbnRQYXRoRmFjdG9yeTtcbmZ1bmN0aW9uIHNlbGVjdENvbW1lbnRGYWN0b3J5KGxvY2FsSWQpIHtcbiAgICByZXR1cm4gKDAsIHJlc2VsZWN0XzEuY3JlYXRlU2VsZWN0b3IpKGV4cG9ydHMuc2VsZWN0Q29tbWVudHMsIGZ1bmN0aW9uIChjb21tZW50cykge1xuICAgICAgICB2YXIgY29tbWVudCA9IGNvbW1lbnRzLmdldChsb2NhbElkKTtcbiAgICAgICAgaWYgKGNvbW1lbnQgIT09IHVuZGVmaW5lZCAmJiAoY29tbWVudC5kZWxldGVkIHx8IGNvbW1lbnQucmVzb2x2ZWQpKSB7XG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjb21tZW50O1xuICAgIH0pO1xufVxuZXhwb3J0cy5zZWxlY3RDb21tZW50RmFjdG9yeSA9IHNlbGVjdENvbW1lbnRGYWN0b3J5O1xudmFyIHNlbGVjdEVuYWJsZWQgPSBmdW5jdGlvbiAoc3RhdGUpIHsgcmV0dXJuIHN0YXRlLnNldHRpbmdzLmNvbW1lbnRzRW5hYmxlZDsgfTtcbmV4cG9ydHMuc2VsZWN0RW5hYmxlZCA9IHNlbGVjdEVuYWJsZWQ7XG5leHBvcnRzLnNlbGVjdElzRGlydHkgPSAoMCwgcmVzZWxlY3RfMS5jcmVhdGVTZWxlY3RvcikoZXhwb3J0cy5zZWxlY3RDb21tZW50cywgZXhwb3J0cy5zZWxlY3RSZW1vdGVDb21tZW50Q291bnQsIGZ1bmN0aW9uIChjb21tZW50cywgcmVtb3RlQ29tbWVudENvdW50KSB7XG4gICAgaWYgKHJlbW90ZUNvbW1lbnRDb3VudCAhPT0gY29tbWVudHMuc2l6ZSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIEFycmF5LmZyb20oY29tbWVudHMudmFsdWVzKCkpLnNvbWUoZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgaWYgKGNvbW1lbnQuZGVsZXRlZCB8fFxuICAgICAgICAgICAgY29tbWVudC5yZXNvbHZlZCB8fFxuICAgICAgICAgICAgY29tbWVudC5yZXBsaWVzLnNpemUgIT09IGNvbW1lbnQucmVtb3RlUmVwbHlDb3VudCB8fFxuICAgICAgICAgICAgY29tbWVudC5vcmlnaW5hbFRleHQgIT09IGNvbW1lbnQudGV4dCkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIEFycmF5LmZyb20oY29tbWVudC5yZXBsaWVzLnZhbHVlcygpKS5zb21lKGZ1bmN0aW9uIChyZXBseSkgeyByZXR1cm4gcmVwbHkuZGVsZXRlZCB8fCByZXBseS5vcmlnaW5hbFRleHQgIT09IHJlcGx5LnRleHQ7IH0pO1xuICAgIH0pO1xufSk7XG52YXIgc2VsZWN0Q29tbWVudENvdW50ID0gZnVuY3Rpb24gKHN0YXRlKSB7XG4gICAgcmV0dXJuIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChzdGF0ZS5jb21tZW50cy5jb21tZW50cy52YWx1ZXMoKSksIGZhbHNlKS5maWx0ZXIoZnVuY3Rpb24gKGNvbW1lbnQpIHsgcmV0dXJuICFjb21tZW50LmRlbGV0ZWQgJiYgIWNvbW1lbnQucmVzb2x2ZWQ7IH0pLmxlbmd0aDtcbn07XG5leHBvcnRzLnNlbGVjdENvbW1lbnRDb3VudCA9IHNlbGVjdENvbW1lbnRDb3VudDtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/selectors/index.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/state/comments.ts":
/*!************************************************************!*\
  !*** ./client/src/components/CommentApp/state/comments.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nexports.__esModule = true;\nexports.reducer = exports.INITIAL_STATE = exports.newComment = exports.newCommentReply = void 0;\nvar immer_1 = __importStar(__webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.esm.js\"));\nvar actions = __importStar(__webpack_require__(/*! ../actions/comments */ \"./client/src/components/CommentApp/actions/comments.ts\"));\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./client/src/components/CommentApp/state/utils.ts\");\n(0, immer_1.enableES5)();\n(0, immer_1.enableMapSet)();\nfunction newCommentReply(localId, author, date, _a) {\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.deleted, deleted = _e === void 0 ? false : _e;\n    return {\n        localId: localId,\n        remoteId: remoteId,\n        mode: mode,\n        author: author,\n        date: date,\n        text: text,\n        originalText: text,\n        newText: '',\n        deleted: deleted\n    };\n}\nexports.newCommentReply = newCommentReply;\nfunction newComment(contentpath, position, localId, annotation, author, date, _a) {\n    var _b = _a.remoteId, remoteId = _b === void 0 ? null : _b, _c = _a.mode, mode = _c === void 0 ? 'default' : _c, _d = _a.text, text = _d === void 0 ? '' : _d, _e = _a.resolved, resolved = _e === void 0 ? false : _e, _f = _a.deleted, deleted = _f === void 0 ? false : _f, _g = _a.replies, replies = _g === void 0 ? new Map() : _g;\n    return {\n        contentpath: contentpath,\n        position: position,\n        localId: localId,\n        annotation: annotation,\n        remoteId: remoteId,\n        mode: mode,\n        author: author,\n        date: date,\n        text: text,\n        originalText: text,\n        replies: replies,\n        newReply: '',\n        newText: '',\n        deleted: deleted,\n        resolved: resolved,\n        remoteReplyCount: Array.from(replies.values()).reduce(function (n, reply) { return (reply.remoteId !== null ? n + 1 : n); }, 0)\n    };\n}\nexports.newComment = newComment;\nexports.INITIAL_STATE = {\n    comments: new Map(),\n    forceFocus: false,\n    focusedComment: null,\n    pinnedComment: null,\n    remoteCommentCount: 0\n};\nexports.reducer = (0, immer_1[\"default\"])(function (draft, action) {\n    var e_1, _a;\n    /* eslint-disable no-param-reassign */\n    var deleteComment = function (comment) {\n        if (!comment.remoteId) {\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\n            draft.comments[\"delete\"](comment.localId);\n        }\n        else {\n            comment.deleted = true;\n        }\n        // Unset focusedComment if the focused comment is the one being deleted\n        if (draft.focusedComment === comment.localId) {\n            draft.focusedComment = null;\n            draft.forceFocus = false;\n        }\n        if (draft.pinnedComment === comment.localId) {\n            draft.pinnedComment = null;\n        }\n    };\n    var resolveComment = function (comment) {\n        if (!comment.remoteId) {\n            // If the comment doesn't exist in the database, there's no need to keep it around locally\n            draft.comments[\"delete\"](comment.localId);\n        }\n        else {\n            comment.resolved = true;\n        }\n        // Unset focusedComment if the focused comment is the one being resolved\n        if (draft.focusedComment === comment.localId) {\n            draft.focusedComment = null;\n        }\n        if (draft.pinnedComment === comment.localId) {\n            draft.pinnedComment = null;\n        }\n    };\n    switch (action.type) {\n        case actions.ADD_COMMENT: {\n            draft.comments.set(action.comment.localId, action.comment);\n            if (action.comment.remoteId) {\n                draft.remoteCommentCount += 1;\n            }\n            break;\n        }\n        case actions.UPDATE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (comment) {\n                if (action.update.newText && action.update.newText.length === 0) {\n                    break;\n                }\n                (0, utils_1.update)(comment, action.update);\n            }\n            break;\n        }\n        case actions.DELETE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            deleteComment(comment);\n            break;\n        }\n        case actions.RESOLVE_COMMENT: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            resolveComment(comment);\n            break;\n        }\n        case actions.SET_FOCUSED_COMMENT: {\n            if (action.commentId === null || draft.comments.has(action.commentId)) {\n                draft.focusedComment = action.commentId;\n                if (action.updatePinnedComment) {\n                    draft.pinnedComment = action.commentId;\n                }\n                draft.forceFocus = action.forceFocus;\n            }\n            break;\n        }\n        case actions.ADD_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment || action.reply.text.length === 0) {\n                break;\n            }\n            if (action.reply.remoteId) {\n                comment.remoteReplyCount += 1;\n            }\n            comment.replies.set(action.reply.localId, action.reply);\n            break;\n        }\n        case actions.UPDATE_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            var reply = comment.replies.get(action.replyId);\n            if (!reply) {\n                break;\n            }\n            if (action.update.newText && action.update.newText.length === 0) {\n                break;\n            }\n            (0, utils_1.update)(reply, action.update);\n            break;\n        }\n        case actions.DELETE_REPLY: {\n            var comment = draft.comments.get(action.commentId);\n            if (!comment) {\n                break;\n            }\n            var reply = comment.replies.get(action.replyId);\n            if (!reply) {\n                break;\n            }\n            if (!reply.remoteId) {\n                // The reply doesn't exist in the database, so we don't need to store it locally\n                comment.replies[\"delete\"](reply.localId);\n            }\n            else {\n                reply.deleted = true;\n            }\n            break;\n        }\n        case actions.INVALIDATE_CONTENT_PATH: {\n            // Delete any comments that exist in the contentpath\n            var comments = draft.comments;\n            try {\n                for (var _b = __values(comments.values()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var comment = _c.value;\n                    if (comment.contentpath.startsWith(action.contentPath)) {\n                        resolveComment(comment);\n                    }\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            break;\n        }\n        default:\n            break;\n    }\n}, exports.INITIAL_STATE);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS9jb21tZW50cy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FndGFpbC8uL2NsaWVudC9zcmMvY29tcG9uZW50cy9Db21tZW50QXBwL3N0YXRlL2NvbW1lbnRzLnRzPzhlZGEiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19jcmVhdGVCaW5kaW5nID0gKHRoaXMgJiYgdGhpcy5fX2NyZWF0ZUJpbmRpbmcpIHx8IChPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobywgazIsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBmdW5jdGlvbigpIHsgcmV0dXJuIG1ba107IH0gfSk7XG59KSA6IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgb1trMl0gPSBtW2tdO1xufSkpO1xudmFyIF9fc2V0TW9kdWxlRGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19zZXRNb2R1bGVEZWZhdWx0KSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCB2KSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIFwiZGVmYXVsdFwiLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2IH0pO1xufSkgOiBmdW5jdGlvbihvLCB2KSB7XG4gICAgb1tcImRlZmF1bHRcIl0gPSB2O1xufSk7XG52YXIgX19pbXBvcnRTdGFyID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydFN0YXIpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICBpZiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSByZXR1cm4gbW9kO1xuICAgIHZhciByZXN1bHQgPSB7fTtcbiAgICBpZiAobW9kICE9IG51bGwpIGZvciAodmFyIGsgaW4gbW9kKSBpZiAoayAhPT0gXCJkZWZhdWx0XCIgJiYgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG1vZCwgaykpIF9fY3JlYXRlQmluZGluZyhyZXN1bHQsIG1vZCwgayk7XG4gICAgX19zZXRNb2R1bGVEZWZhdWx0KHJlc3VsdCwgbW9kKTtcbiAgICByZXR1cm4gcmVzdWx0O1xufTtcbnZhciBfX3ZhbHVlcyA9ICh0aGlzICYmIHRoaXMuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLnJlZHVjZXIgPSBleHBvcnRzLklOSVRJQUxfU1RBVEUgPSBleHBvcnRzLm5ld0NvbW1lbnQgPSBleHBvcnRzLm5ld0NvbW1lbnRSZXBseSA9IHZvaWQgMDtcbnZhciBpbW1lcl8xID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCJpbW1lclwiKSk7XG52YXIgYWN0aW9ucyA9IF9faW1wb3J0U3RhcihyZXF1aXJlKFwiLi4vYWN0aW9ucy9jb21tZW50c1wiKSk7XG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuL3V0aWxzXCIpO1xuKDAsIGltbWVyXzEuZW5hYmxlRVM1KSgpO1xuKDAsIGltbWVyXzEuZW5hYmxlTWFwU2V0KSgpO1xuZnVuY3Rpb24gbmV3Q29tbWVudFJlcGx5KGxvY2FsSWQsIGF1dGhvciwgZGF0ZSwgX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5yZW1vdGVJZCwgcmVtb3RlSWQgPSBfYiA9PT0gdm9pZCAwID8gbnVsbCA6IF9iLCBfYyA9IF9hLm1vZGUsIG1vZGUgPSBfYyA9PT0gdm9pZCAwID8gJ2RlZmF1bHQnIDogX2MsIF9kID0gX2EudGV4dCwgdGV4dCA9IF9kID09PSB2b2lkIDAgPyAnJyA6IF9kLCBfZSA9IF9hLmRlbGV0ZWQsIGRlbGV0ZWQgPSBfZSA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZTtcbiAgICByZXR1cm4ge1xuICAgICAgICBsb2NhbElkOiBsb2NhbElkLFxuICAgICAgICByZW1vdGVJZDogcmVtb3RlSWQsXG4gICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgIGF1dGhvcjogYXV0aG9yLFxuICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICBvcmlnaW5hbFRleHQ6IHRleHQsXG4gICAgICAgIG5ld1RleHQ6ICcnLFxuICAgICAgICBkZWxldGVkOiBkZWxldGVkXG4gICAgfTtcbn1cbmV4cG9ydHMubmV3Q29tbWVudFJlcGx5ID0gbmV3Q29tbWVudFJlcGx5O1xuZnVuY3Rpb24gbmV3Q29tbWVudChjb250ZW50cGF0aCwgcG9zaXRpb24sIGxvY2FsSWQsIGFubm90YXRpb24sIGF1dGhvciwgZGF0ZSwgX2EpIHtcbiAgICB2YXIgX2IgPSBfYS5yZW1vdGVJZCwgcmVtb3RlSWQgPSBfYiA9PT0gdm9pZCAwID8gbnVsbCA6IF9iLCBfYyA9IF9hLm1vZGUsIG1vZGUgPSBfYyA9PT0gdm9pZCAwID8gJ2RlZmF1bHQnIDogX2MsIF9kID0gX2EudGV4dCwgdGV4dCA9IF9kID09PSB2b2lkIDAgPyAnJyA6IF9kLCBfZSA9IF9hLnJlc29sdmVkLCByZXNvbHZlZCA9IF9lID09PSB2b2lkIDAgPyBmYWxzZSA6IF9lLCBfZiA9IF9hLmRlbGV0ZWQsIGRlbGV0ZWQgPSBfZiA9PT0gdm9pZCAwID8gZmFsc2UgOiBfZiwgX2cgPSBfYS5yZXBsaWVzLCByZXBsaWVzID0gX2cgPT09IHZvaWQgMCA/IG5ldyBNYXAoKSA6IF9nO1xuICAgIHJldHVybiB7XG4gICAgICAgIGNvbnRlbnRwYXRoOiBjb250ZW50cGF0aCxcbiAgICAgICAgcG9zaXRpb246IHBvc2l0aW9uLFxuICAgICAgICBsb2NhbElkOiBsb2NhbElkLFxuICAgICAgICBhbm5vdGF0aW9uOiBhbm5vdGF0aW9uLFxuICAgICAgICByZW1vdGVJZDogcmVtb3RlSWQsXG4gICAgICAgIG1vZGU6IG1vZGUsXG4gICAgICAgIGF1dGhvcjogYXV0aG9yLFxuICAgICAgICBkYXRlOiBkYXRlLFxuICAgICAgICB0ZXh0OiB0ZXh0LFxuICAgICAgICBvcmlnaW5hbFRleHQ6IHRleHQsXG4gICAgICAgIHJlcGxpZXM6IHJlcGxpZXMsXG4gICAgICAgIG5ld1JlcGx5OiAnJyxcbiAgICAgICAgbmV3VGV4dDogJycsXG4gICAgICAgIGRlbGV0ZWQ6IGRlbGV0ZWQsXG4gICAgICAgIHJlc29sdmVkOiByZXNvbHZlZCxcbiAgICAgICAgcmVtb3RlUmVwbHlDb3VudDogQXJyYXkuZnJvbShyZXBsaWVzLnZhbHVlcygpKS5yZWR1Y2UoZnVuY3Rpb24gKG4sIHJlcGx5KSB7IHJldHVybiAocmVwbHkucmVtb3RlSWQgIT09IG51bGwgPyBuICsgMSA6IG4pOyB9LCAwKVxuICAgIH07XG59XG5leHBvcnRzLm5ld0NvbW1lbnQgPSBuZXdDb21tZW50O1xuZXhwb3J0cy5JTklUSUFMX1NUQVRFID0ge1xuICAgIGNvbW1lbnRzOiBuZXcgTWFwKCksXG4gICAgZm9yY2VGb2N1czogZmFsc2UsXG4gICAgZm9jdXNlZENvbW1lbnQ6IG51bGwsXG4gICAgcGlubmVkQ29tbWVudDogbnVsbCxcbiAgICByZW1vdGVDb21tZW50Q291bnQ6IDBcbn07XG5leHBvcnRzLnJlZHVjZXIgPSAoMCwgaW1tZXJfMVtcImRlZmF1bHRcIl0pKGZ1bmN0aW9uIChkcmFmdCwgYWN0aW9uKSB7XG4gICAgdmFyIGVfMSwgX2E7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tcGFyYW0tcmVhc3NpZ24gKi9cbiAgICB2YXIgZGVsZXRlQ29tbWVudCA9IGZ1bmN0aW9uIChjb21tZW50KSB7XG4gICAgICAgIGlmICghY29tbWVudC5yZW1vdGVJZCkge1xuICAgICAgICAgICAgLy8gSWYgdGhlIGNvbW1lbnQgZG9lc24ndCBleGlzdCBpbiB0aGUgZGF0YWJhc2UsIHRoZXJlJ3Mgbm8gbmVlZCB0byBrZWVwIGl0IGFyb3VuZCBsb2NhbGx5XG4gICAgICAgICAgICBkcmFmdC5jb21tZW50c1tcImRlbGV0ZVwiXShjb21tZW50LmxvY2FsSWQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgY29tbWVudC5kZWxldGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBVbnNldCBmb2N1c2VkQ29tbWVudCBpZiB0aGUgZm9jdXNlZCBjb21tZW50IGlzIHRoZSBvbmUgYmVpbmcgZGVsZXRlZFxuICAgICAgICBpZiAoZHJhZnQuZm9jdXNlZENvbW1lbnQgPT09IGNvbW1lbnQubG9jYWxJZCkge1xuICAgICAgICAgICAgZHJhZnQuZm9jdXNlZENvbW1lbnQgPSBudWxsO1xuICAgICAgICAgICAgZHJhZnQuZm9yY2VGb2N1cyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFmdC5waW5uZWRDb21tZW50ID09PSBjb21tZW50LmxvY2FsSWQpIHtcbiAgICAgICAgICAgIGRyYWZ0LnBpbm5lZENvbW1lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICB2YXIgcmVzb2x2ZUNvbW1lbnQgPSBmdW5jdGlvbiAoY29tbWVudCkge1xuICAgICAgICBpZiAoIWNvbW1lbnQucmVtb3RlSWQpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZSBjb21tZW50IGRvZXNuJ3QgZXhpc3QgaW4gdGhlIGRhdGFiYXNlLCB0aGVyZSdzIG5vIG5lZWQgdG8ga2VlcCBpdCBhcm91bmQgbG9jYWxseVxuICAgICAgICAgICAgZHJhZnQuY29tbWVudHNbXCJkZWxldGVcIl0oY29tbWVudC5sb2NhbElkKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGNvbW1lbnQucmVzb2x2ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIC8vIFVuc2V0IGZvY3VzZWRDb21tZW50IGlmIHRoZSBmb2N1c2VkIGNvbW1lbnQgaXMgdGhlIG9uZSBiZWluZyByZXNvbHZlZFxuICAgICAgICBpZiAoZHJhZnQuZm9jdXNlZENvbW1lbnQgPT09IGNvbW1lbnQubG9jYWxJZCkge1xuICAgICAgICAgICAgZHJhZnQuZm9jdXNlZENvbW1lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGlmIChkcmFmdC5waW5uZWRDb21tZW50ID09PSBjb21tZW50LmxvY2FsSWQpIHtcbiAgICAgICAgICAgIGRyYWZ0LnBpbm5lZENvbW1lbnQgPSBudWxsO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBzd2l0Y2ggKGFjdGlvbi50eXBlKSB7XG4gICAgICAgIGNhc2UgYWN0aW9ucy5BRERfQ09NTUVOVDoge1xuICAgICAgICAgICAgZHJhZnQuY29tbWVudHMuc2V0KGFjdGlvbi5jb21tZW50LmxvY2FsSWQsIGFjdGlvbi5jb21tZW50KTtcbiAgICAgICAgICAgIGlmIChhY3Rpb24uY29tbWVudC5yZW1vdGVJZCkge1xuICAgICAgICAgICAgICAgIGRyYWZ0LnJlbW90ZUNvbW1lbnRDb3VudCArPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBhY3Rpb25zLlVQREFURV9DT01NRU5UOiB7XG4gICAgICAgICAgICB2YXIgY29tbWVudCA9IGRyYWZ0LmNvbW1lbnRzLmdldChhY3Rpb24uY29tbWVudElkKTtcbiAgICAgICAgICAgIGlmIChjb21tZW50KSB7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi51cGRhdGUubmV3VGV4dCAmJiBhY3Rpb24udXBkYXRlLm5ld1RleHQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAoMCwgdXRpbHNfMS51cGRhdGUpKGNvbW1lbnQsIGFjdGlvbi51cGRhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBhY3Rpb25zLkRFTEVURV9DT01NRU5UOiB7XG4gICAgICAgICAgICB2YXIgY29tbWVudCA9IGRyYWZ0LmNvbW1lbnRzLmdldChhY3Rpb24uY29tbWVudElkKTtcbiAgICAgICAgICAgIGlmICghY29tbWVudCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZGVsZXRlQ29tbWVudChjb21tZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgYWN0aW9ucy5SRVNPTFZFX0NPTU1FTlQ6IHtcbiAgICAgICAgICAgIHZhciBjb21tZW50ID0gZHJhZnQuY29tbWVudHMuZ2V0KGFjdGlvbi5jb21tZW50SWQpO1xuICAgICAgICAgICAgaWYgKCFjb21tZW50KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXNvbHZlQ29tbWVudChjb21tZW50KTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIGNhc2UgYWN0aW9ucy5TRVRfRk9DVVNFRF9DT01NRU5UOiB7XG4gICAgICAgICAgICBpZiAoYWN0aW9uLmNvbW1lbnRJZCA9PT0gbnVsbCB8fCBkcmFmdC5jb21tZW50cy5oYXMoYWN0aW9uLmNvbW1lbnRJZCkpIHtcbiAgICAgICAgICAgICAgICBkcmFmdC5mb2N1c2VkQ29tbWVudCA9IGFjdGlvbi5jb21tZW50SWQ7XG4gICAgICAgICAgICAgICAgaWYgKGFjdGlvbi51cGRhdGVQaW5uZWRDb21tZW50KSB7XG4gICAgICAgICAgICAgICAgICAgIGRyYWZ0LnBpbm5lZENvbW1lbnQgPSBhY3Rpb24uY29tbWVudElkO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBkcmFmdC5mb3JjZUZvY3VzID0gYWN0aW9uLmZvcmNlRm9jdXM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIGFjdGlvbnMuQUREX1JFUExZOiB7XG4gICAgICAgICAgICB2YXIgY29tbWVudCA9IGRyYWZ0LmNvbW1lbnRzLmdldChhY3Rpb24uY29tbWVudElkKTtcbiAgICAgICAgICAgIGlmICghY29tbWVudCB8fCBhY3Rpb24ucmVwbHkudGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChhY3Rpb24ucmVwbHkucmVtb3RlSWQpIHtcbiAgICAgICAgICAgICAgICBjb21tZW50LnJlbW90ZVJlcGx5Q291bnQgKz0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbW1lbnQucmVwbGllcy5zZXQoYWN0aW9uLnJlcGx5LmxvY2FsSWQsIGFjdGlvbi5yZXBseSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIGFjdGlvbnMuVVBEQVRFX1JFUExZOiB7XG4gICAgICAgICAgICB2YXIgY29tbWVudCA9IGRyYWZ0LmNvbW1lbnRzLmdldChhY3Rpb24uY29tbWVudElkKTtcbiAgICAgICAgICAgIGlmICghY29tbWVudCkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHJlcGx5ID0gY29tbWVudC5yZXBsaWVzLmdldChhY3Rpb24ucmVwbHlJZCk7XG4gICAgICAgICAgICBpZiAoIXJlcGx5KSB7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoYWN0aW9uLnVwZGF0ZS5uZXdUZXh0ICYmIGFjdGlvbi51cGRhdGUubmV3VGV4dC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICgwLCB1dGlsc18xLnVwZGF0ZSkocmVwbHksIGFjdGlvbi51cGRhdGUpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBhY3Rpb25zLkRFTEVURV9SRVBMWToge1xuICAgICAgICAgICAgdmFyIGNvbW1lbnQgPSBkcmFmdC5jb21tZW50cy5nZXQoYWN0aW9uLmNvbW1lbnRJZCk7XG4gICAgICAgICAgICBpZiAoIWNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByZXBseSA9IGNvbW1lbnQucmVwbGllcy5nZXQoYWN0aW9uLnJlcGx5SWQpO1xuICAgICAgICAgICAgaWYgKCFyZXBseSkge1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCFyZXBseS5yZW1vdGVJZCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSByZXBseSBkb2Vzbid0IGV4aXN0IGluIHRoZSBkYXRhYmFzZSwgc28gd2UgZG9uJ3QgbmVlZCB0byBzdG9yZSBpdCBsb2NhbGx5XG4gICAgICAgICAgICAgICAgY29tbWVudC5yZXBsaWVzW1wiZGVsZXRlXCJdKHJlcGx5LmxvY2FsSWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgcmVwbHkuZGVsZXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjYXNlIGFjdGlvbnMuSU5WQUxJREFURV9DT05URU5UX1BBVEg6IHtcbiAgICAgICAgICAgIC8vIERlbGV0ZSBhbnkgY29tbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgY29udGVudHBhdGhcbiAgICAgICAgICAgIHZhciBjb21tZW50cyA9IGRyYWZ0LmNvbW1lbnRzO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzKGNvbW1lbnRzLnZhbHVlcygpKSwgX2MgPSBfYi5uZXh0KCk7ICFfYy5kb25lOyBfYyA9IF9iLm5leHQoKSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IF9jLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY29tbWVudC5jb250ZW50cGF0aC5zdGFydHNXaXRoKGFjdGlvbi5jb250ZW50UGF0aCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmVDb21tZW50KGNvbW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH1cbiAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYltcInJldHVyblwiXSkpIF9hLmNhbGwoX2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufSwgZXhwb3J0cy5JTklUSUFMX1NUQVRFKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/state/comments.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/state/index.ts":
/*!*********************************************************!*\
  !*** ./client/src/components/CommentApp/state/index.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports, __webpack_require__) => {

eval("\nexports.__esModule = true;\nexports.reducer = void 0;\nvar redux_1 = __webpack_require__(/*! redux */ \"./node_modules/redux/es/redux.js\");\nvar comments_1 = __webpack_require__(/*! ./comments */ \"./client/src/components/CommentApp/state/comments.ts\");\nvar settings_1 = __webpack_require__(/*! ./settings */ \"./client/src/components/CommentApp/state/settings.ts\");\nexports.reducer = (0, redux_1.combineReducers)({\n    comments: comments_1.reducer,\n    settings: settings_1.reducer\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS9pbmRleC50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS9pbmRleC50cz80ZmM3Il0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMucmVkdWNlciA9IHZvaWQgMDtcbnZhciByZWR1eF8xID0gcmVxdWlyZShcInJlZHV4XCIpO1xudmFyIGNvbW1lbnRzXzEgPSByZXF1aXJlKFwiLi9jb21tZW50c1wiKTtcbnZhciBzZXR0aW5nc18xID0gcmVxdWlyZShcIi4vc2V0dGluZ3NcIik7XG5leHBvcnRzLnJlZHVjZXIgPSAoMCwgcmVkdXhfMS5jb21iaW5lUmVkdWNlcnMpKHtcbiAgICBjb21tZW50czogY29tbWVudHNfMS5yZWR1Y2VyLFxuICAgIHNldHRpbmdzOiBzZXR0aW5nc18xLnJlZHVjZXJcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/state/index.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/state/settings.ts":
/*!************************************************************!*\
  !*** ./client/src/components/CommentApp/state/settings.ts ***!
  \************************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nexports.__esModule = true;\nexports.reducer = exports.INITIAL_STATE = void 0;\nvar immer_1 = __importDefault(__webpack_require__(/*! immer */ \"./node_modules/immer/dist/immer.esm.js\"));\nvar actions = __importStar(__webpack_require__(/*! ../actions/settings */ \"./client/src/components/CommentApp/actions/settings.ts\"));\nvar utils_1 = __webpack_require__(/*! ./utils */ \"./client/src/components/CommentApp/state/utils.ts\");\n// Reducer with initial state\nexports.INITIAL_STATE = {\n    user: null,\n    commentsEnabled: false,\n    currentTab: null\n};\nexports.reducer = (0, immer_1[\"default\"])(function (draft, action) {\n    switch (action.type) {\n        case actions.UPDATE_GLOBAL_SETTINGS:\n            (0, utils_1.update)(draft, action.update);\n            break;\n        default:\n            break;\n    }\n}, exports.INITIAL_STATE);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS9zZXR0aW5ncy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS9zZXR0aW5ncy50cz8zMTJkIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIF9fY3JlYXRlQmluZGluZyA9ICh0aGlzICYmIHRoaXMuX19jcmVhdGVCaW5kaW5nKSB8fCAoT2JqZWN0LmNyZWF0ZSA/IChmdW5jdGlvbihvLCBtLCBrLCBrMikge1xuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZnVuY3Rpb24oKSB7IHJldHVybiBtW2tdOyB9IH0pO1xufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xuICAgIG9bazJdID0gbVtrXTtcbn0pKTtcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSAodGhpcyAmJiB0aGlzLl9fc2V0TW9kdWxlRGVmYXVsdCkgfHwgKE9iamVjdC5jcmVhdGUgPyAoZnVuY3Rpb24obywgdikge1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcbn0pIDogZnVuY3Rpb24obywgdikge1xuICAgIG9bXCJkZWZhdWx0XCJdID0gdjtcbn0pO1xudmFyIF9faW1wb3J0U3RhciA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnRTdGFyKSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcbiAgICB2YXIgcmVzdWx0ID0ge307XG4gICAgaWYgKG1vZCAhPSBudWxsKSBmb3IgKHZhciBrIGluIG1vZCkgaWYgKGsgIT09IFwiZGVmYXVsdFwiICYmIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSBfX2NyZWF0ZUJpbmRpbmcocmVzdWx0LCBtb2QsIGspO1xuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn07XG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IFwiZGVmYXVsdFwiOiBtb2QgfTtcbn07XG5leHBvcnRzLl9fZXNNb2R1bGUgPSB0cnVlO1xuZXhwb3J0cy5yZWR1Y2VyID0gZXhwb3J0cy5JTklUSUFMX1NUQVRFID0gdm9pZCAwO1xudmFyIGltbWVyXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcImltbWVyXCIpKTtcbnZhciBhY3Rpb25zID0gX19pbXBvcnRTdGFyKHJlcXVpcmUoXCIuLi9hY3Rpb25zL3NldHRpbmdzXCIpKTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4vdXRpbHNcIik7XG4vLyBSZWR1Y2VyIHdpdGggaW5pdGlhbCBzdGF0ZVxuZXhwb3J0cy5JTklUSUFMX1NUQVRFID0ge1xuICAgIHVzZXI6IG51bGwsXG4gICAgY29tbWVudHNFbmFibGVkOiBmYWxzZSxcbiAgICBjdXJyZW50VGFiOiBudWxsXG59O1xuZXhwb3J0cy5yZWR1Y2VyID0gKDAsIGltbWVyXzFbXCJkZWZhdWx0XCJdKShmdW5jdGlvbiAoZHJhZnQsIGFjdGlvbikge1xuICAgIHN3aXRjaCAoYWN0aW9uLnR5cGUpIHtcbiAgICAgICAgY2FzZSBhY3Rpb25zLlVQREFURV9HTE9CQUxfU0VUVElOR1M6XG4gICAgICAgICAgICAoMCwgdXRpbHNfMS51cGRhdGUpKGRyYWZ0LCBhY3Rpb24udXBkYXRlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgfVxufSwgZXhwb3J0cy5JTklUSUFMX1NUQVRFKTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/state/settings.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/state/utils.ts":
/*!*********************************************************!*\
  !*** ./client/src/components/CommentApp/state/utils.ts ***!
  \*********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.update = void 0;\nfunction update(base, updatePartial) {\n    return Object.assign(base, updatePartial);\n}\nexports.update = update;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS91dGlscy50cy5qcyIsIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC9zdGF0ZS91dGlscy50cz8wMjFiIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMudXBkYXRlID0gdm9pZCAwO1xuZnVuY3Rpb24gdXBkYXRlKGJhc2UsIHVwZGF0ZVBhcnRpYWwpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihiYXNlLCB1cGRhdGVQYXJ0aWFsKTtcbn1cbmV4cG9ydHMudXBkYXRlID0gdXBkYXRlO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/state/utils.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/utils/layout.ts":
/*!**********************************************************!*\
  !*** ./client/src/components/CommentApp/utils/layout.ts ***!
  \**********************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nexports.LayoutController = void 0;\nvar maps_1 = __webpack_require__(/*! ./maps */ \"./client/src/components/CommentApp/utils/maps.ts\");\nvar GAP = 20.0; // Gap between comments in pixels\nvar TOP_MARGIN = 100.0; // Spacing from the top to the first comment in pixels\nvar OFFSET = -50; // How many pixels from the annotation position should the comments be placed?\nvar LayoutController = /** @class */ (function () {\n    function LayoutController() {\n        this.commentElements = new Map();\n        this.commentAnnotations = new Map();\n        this.commentTabs = new Map();\n        this.commentDesiredPositions = new Map();\n        this.commentHeights = new Map();\n        this.pinnedComment = null;\n        this.commentCalculatedPositions = new Map();\n        this.isDirty = false;\n    }\n    LayoutController.prototype.setCommentElement = function (commentId, element) {\n        if (element !== null) {\n            this.commentElements.set(commentId, element);\n        }\n        else {\n            this.commentElements[\"delete\"](commentId);\n        }\n        this.isDirty = true;\n    };\n    LayoutController.prototype.setCommentAnnotation = function (commentId, annotation) {\n        this.commentAnnotations.set(commentId, annotation);\n        this.commentTabs.set(commentId, annotation.getTab() || null);\n        this.updateDesiredPosition(commentId);\n        this.isDirty = true;\n    };\n    LayoutController.prototype.setCommentHeight = function (commentId, height) {\n        if (this.commentHeights.get(commentId) !== height) {\n            this.commentHeights.set(commentId, height);\n            this.isDirty = true;\n        }\n    };\n    LayoutController.prototype.setPinnedComment = function (commentId) {\n        this.pinnedComment = commentId;\n        this.isDirty = true;\n    };\n    LayoutController.prototype.updateDesiredPosition = function (commentId) {\n        var annotation = this.commentAnnotations.get(commentId);\n        if (!annotation) {\n            return;\n        }\n        var currentNode = annotation.getAnchorNode(commentId === this.pinnedComment);\n        var currentNodeTop = currentNode.getBoundingClientRect().top;\n        // adjust currentNodeTop for scroll positions of all ancestor elements\n        var parent = currentNode.parentElement;\n        while (parent) {\n            currentNodeTop += parent.scrollTop;\n            parent = parent.parentElement;\n        }\n        this.commentDesiredPositions.set(commentId, currentNodeTop !== 0 ? currentNodeTop + OFFSET : 0);\n    };\n    LayoutController.prototype.refreshDesiredPositions = function (tab) {\n        var _this = this;\n        if (tab === void 0) { tab = null; }\n        /* Finds the current annotation positions of all the comments on the specified tab */\n        var oldDesiredPositions = new Map(this.commentDesiredPositions);\n        this.commentAnnotations.forEach(function (_, commentId) {\n            if (_this.getCommentTabVisible(tab, commentId)) {\n                _this.updateDesiredPosition(commentId);\n            }\n        });\n        // It's not great to be recalculating all positions so regularly, but Wagtail's FE widgets\n        // aren't very constrained so could change layout in any number of ways. If we have a stable FE\n        // widget framework in the future, this could be used to trigger the position refresh more\n        // intelligently, or alternatively once comments is incorporated into the page form, a\n        // MutationObserver could potentially track most types of changes.\n        if (this.commentDesiredPositions !== oldDesiredPositions) {\n            this.isDirty = true;\n        }\n    };\n    LayoutController.prototype.refreshLayout = function () {\n        var _this = this;\n        /* Updates positions of all comments based on their annotation locations, and resolves any overlapping comments */\n        if (!this.isDirty) {\n            return false;\n        }\n        // Build list of blocks (starting with one for each comment)\n        var allBlocks = Array.from(this.commentElements.keys()).map(function (commentId) { return ({\n            tab: (0, maps_1.getOrDefault)(_this.commentTabs, commentId, null),\n            position: (0, maps_1.getOrDefault)(_this.commentDesiredPositions, commentId, 0),\n            height: (0, maps_1.getOrDefault)(_this.commentHeights, commentId, 0),\n            comments: [commentId],\n            containsPinnedComment: _this.pinnedComment !== null && commentId === _this.pinnedComment,\n            pinnedCommentPosition: 0\n        }); });\n        // Group blocks by tabs\n        var blocksByTab = new Map();\n        allBlocks.forEach(function (block) {\n            var blocks = blocksByTab.get(block.tab) || [];\n            blocks.push(block);\n            blocksByTab.set(block.tab, blocks);\n        });\n        // Get location of pinned comment\n        var pinnedCommentPosition = this.pinnedComment\n            ? this.commentDesiredPositions.get(this.pinnedComment)\n            : undefined;\n        var pinnedCommentTab = this.pinnedComment\n            ? this.commentTabs.get(this.pinnedComment)\n            : undefined;\n        // For each tab, resolve positions of all the comments\n        Array.from(blocksByTab.entries()).forEach(function (_a) {\n            var e_1, _b, _c;\n            var _d = __read(_a, 2), tab = _d[0], blocks = _d[1];\n            var pinnedCommentOnThisTab = _this.pinnedComment && pinnedCommentTab === tab;\n            // Sort blocks\n            blocks.sort(function (block, comparisonBlock) { return block.position - comparisonBlock.position; });\n            // Resolve overlapping blocks\n            var currentBlocks = blocks;\n            var overlaps = true;\n            while (overlaps) {\n                overlaps = false;\n                var newBlocks = [];\n                var previousBlock = null;\n                try {\n                    for (var currentBlocks_1 = (e_1 = void 0, __values(currentBlocks)), currentBlocks_1_1 = currentBlocks_1.next(); !currentBlocks_1_1.done; currentBlocks_1_1 = currentBlocks_1.next()) {\n                        var block = currentBlocks_1_1.value;\n                        if (previousBlock) {\n                            if (previousBlock.position + previousBlock.height + GAP >\n                                block.position) {\n                                overlaps = true;\n                                // Merge the blocks\n                                (_c = previousBlock.comments).push.apply(_c, __spreadArray([], __read(block.comments), false));\n                                if (block.containsPinnedComment) {\n                                    previousBlock.containsPinnedComment = true;\n                                    previousBlock.pinnedCommentPosition =\n                                        block.pinnedCommentPosition + previousBlock.height;\n                                }\n                                previousBlock.height += block.height;\n                                // Make sure comments don't disappear off the top of the page\n                                // But only if a comment isn't focused\n                                if (!pinnedCommentOnThisTab &&\n                                    previousBlock.position < TOP_MARGIN + OFFSET) {\n                                    previousBlock.position =\n                                        TOP_MARGIN + previousBlock.height - OFFSET;\n                                }\n                                // If this block contains the focused comment, position it so\n                                // the focused comment is in it's desired position\n                                if (pinnedCommentPosition &&\n                                    previousBlock.containsPinnedComment) {\n                                    previousBlock.position =\n                                        pinnedCommentPosition - previousBlock.pinnedCommentPosition;\n                                }\n                                continue;\n                            }\n                        }\n                        newBlocks.push(block);\n                        previousBlock = block;\n                    }\n                }\n                catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                finally {\n                    try {\n                        if (currentBlocks_1_1 && !currentBlocks_1_1.done && (_b = currentBlocks_1[\"return\"])) _b.call(currentBlocks_1);\n                    }\n                    finally { if (e_1) throw e_1.error; }\n                }\n                currentBlocks = newBlocks;\n            }\n            // Write positions\n            currentBlocks.forEach(function (block) {\n                var currentPosition = block.position;\n                block.comments.forEach(function (commentId) {\n                    _this.commentCalculatedPositions.set(commentId, currentPosition);\n                    var height = _this.commentHeights.get(commentId);\n                    if (height) {\n                        currentPosition += height + GAP;\n                    }\n                });\n            });\n        });\n        this.isDirty = false;\n        return true;\n    };\n    LayoutController.prototype.getCommentTabVisible = function (tab, commentId) {\n        var commentTab = (0, maps_1.getOrDefault)(this.commentTabs, commentId, null);\n        return commentTab === tab;\n    };\n    LayoutController.prototype.getCommentVisible = function (tab, commentId) {\n        return (this.getCommentTabVisible(tab, commentId) &&\n            (0, maps_1.getOrDefault)(this.commentDesiredPositions, commentId, 1) > 0);\n    };\n    LayoutController.prototype.getCommentPosition = function (commentId) {\n        if (this.commentCalculatedPositions.has(commentId)) {\n            return this.commentCalculatedPositions.get(commentId);\n        }\n        return this.commentDesiredPositions.get(commentId);\n    };\n    return LayoutController;\n}());\nexports.LayoutController = LayoutController;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC91dGlscy9sYXlvdXQudHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC91dGlscy9sYXlvdXQudHM/OTI1ZSJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcbnZhciBfX3JlYWQgPSAodGhpcyAmJiB0aGlzLl9fcmVhZCkgfHwgZnVuY3Rpb24gKG8sIG4pIHtcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XG4gICAgaWYgKCFtKSByZXR1cm4gbztcbiAgICB2YXIgaSA9IG0uY2FsbChvKSwgciwgYXIgPSBbXSwgZTtcbiAgICB0cnkge1xuICAgICAgICB3aGlsZSAoKG4gPT09IHZvaWQgMCB8fCBuLS0gPiAwKSAmJiAhKHIgPSBpLm5leHQoKSkuZG9uZSkgYXIucHVzaChyLnZhbHVlKTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XG4gICAgZmluYWxseSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcbiAgICAgICAgfVxuICAgICAgICBmaW5hbGx5IHsgaWYgKGUpIHRocm93IGUuZXJyb3I7IH1cbiAgICB9XG4gICAgcmV0dXJuIGFyO1xufTtcbnZhciBfX3ZhbHVlcyA9ICh0aGlzICYmIHRoaXMuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHtcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xuICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pO1xuICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gXCJudW1iZXJcIikgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTtcbiAgICAgICAgfVxuICAgIH07XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gXCJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLlwiIDogXCJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xufTtcbnZhciBfX3NwcmVhZEFycmF5ID0gKHRoaXMgJiYgdGhpcy5fX3NwcmVhZEFycmF5KSB8fCBmdW5jdGlvbiAodG8sIGZyb20sIHBhY2spIHtcbiAgICBpZiAocGFjayB8fCBhcmd1bWVudHMubGVuZ3RoID09PSAyKSBmb3IgKHZhciBpID0gMCwgbCA9IGZyb20ubGVuZ3RoLCBhcjsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoYXIgfHwgIShpIGluIGZyb20pKSB7XG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xuICAgICAgICAgICAgYXJbaV0gPSBmcm9tW2ldO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0by5jb25jYXQoYXIgfHwgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSkpO1xufTtcbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5leHBvcnRzLkxheW91dENvbnRyb2xsZXIgPSB2b2lkIDA7XG52YXIgbWFwc18xID0gcmVxdWlyZShcIi4vbWFwc1wiKTtcbnZhciBHQVAgPSAyMC4wOyAvLyBHYXAgYmV0d2VlbiBjb21tZW50cyBpbiBwaXhlbHNcbnZhciBUT1BfTUFSR0lOID0gMTAwLjA7IC8vIFNwYWNpbmcgZnJvbSB0aGUgdG9wIHRvIHRoZSBmaXJzdCBjb21tZW50IGluIHBpeGVsc1xudmFyIE9GRlNFVCA9IC01MDsgLy8gSG93IG1hbnkgcGl4ZWxzIGZyb20gdGhlIGFubm90YXRpb24gcG9zaXRpb24gc2hvdWxkIHRoZSBjb21tZW50cyBiZSBwbGFjZWQ/XG52YXIgTGF5b3V0Q29udHJvbGxlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBMYXlvdXRDb250cm9sbGVyKCkge1xuICAgICAgICB0aGlzLmNvbW1lbnRFbGVtZW50cyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5jb21tZW50QW5ub3RhdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29tbWVudFRhYnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29tbWVudERlc2lyZWRQb3NpdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuY29tbWVudEhlaWdodHMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMucGlubmVkQ29tbWVudCA9IG51bGw7XG4gICAgICAgIHRoaXMuY29tbWVudENhbGN1bGF0ZWRQb3NpdGlvbnMgPSBuZXcgTWFwKCk7XG4gICAgICAgIHRoaXMuaXNEaXJ0eSA9IGZhbHNlO1xuICAgIH1cbiAgICBMYXlvdXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXRDb21tZW50RWxlbWVudCA9IGZ1bmN0aW9uIChjb21tZW50SWQsIGVsZW1lbnQpIHtcbiAgICAgICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWVudEVsZW1lbnRzLnNldChjb21tZW50SWQsIGVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5jb21tZW50RWxlbWVudHNbXCJkZWxldGVcIl0oY29tbWVudElkKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzRGlydHkgPSB0cnVlO1xuICAgIH07XG4gICAgTGF5b3V0Q29udHJvbGxlci5wcm90b3R5cGUuc2V0Q29tbWVudEFubm90YXRpb24gPSBmdW5jdGlvbiAoY29tbWVudElkLCBhbm5vdGF0aW9uKSB7XG4gICAgICAgIHRoaXMuY29tbWVudEFubm90YXRpb25zLnNldChjb21tZW50SWQsIGFubm90YXRpb24pO1xuICAgICAgICB0aGlzLmNvbW1lbnRUYWJzLnNldChjb21tZW50SWQsIGFubm90YXRpb24uZ2V0VGFiKCkgfHwgbnVsbCk7XG4gICAgICAgIHRoaXMudXBkYXRlRGVzaXJlZFBvc2l0aW9uKGNvbW1lbnRJZCk7XG4gICAgICAgIHRoaXMuaXNEaXJ0eSA9IHRydWU7XG4gICAgfTtcbiAgICBMYXlvdXRDb250cm9sbGVyLnByb3RvdHlwZS5zZXRDb21tZW50SGVpZ2h0ID0gZnVuY3Rpb24gKGNvbW1lbnRJZCwgaGVpZ2h0KSB7XG4gICAgICAgIGlmICh0aGlzLmNvbW1lbnRIZWlnaHRzLmdldChjb21tZW50SWQpICE9PSBoZWlnaHQpIHtcbiAgICAgICAgICAgIHRoaXMuY29tbWVudEhlaWdodHMuc2V0KGNvbW1lbnRJZCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIHRoaXMuaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExheW91dENvbnRyb2xsZXIucHJvdG90eXBlLnNldFBpbm5lZENvbW1lbnQgPSBmdW5jdGlvbiAoY29tbWVudElkKSB7XG4gICAgICAgIHRoaXMucGlubmVkQ29tbWVudCA9IGNvbW1lbnRJZDtcbiAgICAgICAgdGhpcy5pc0RpcnR5ID0gdHJ1ZTtcbiAgICB9O1xuICAgIExheW91dENvbnRyb2xsZXIucHJvdG90eXBlLnVwZGF0ZURlc2lyZWRQb3NpdGlvbiA9IGZ1bmN0aW9uIChjb21tZW50SWQpIHtcbiAgICAgICAgdmFyIGFubm90YXRpb24gPSB0aGlzLmNvbW1lbnRBbm5vdGF0aW9ucy5nZXQoY29tbWVudElkKTtcbiAgICAgICAgaWYgKCFhbm5vdGF0aW9uKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGN1cnJlbnROb2RlID0gYW5ub3RhdGlvbi5nZXRBbmNob3JOb2RlKGNvbW1lbnRJZCA9PT0gdGhpcy5waW5uZWRDb21tZW50KTtcbiAgICAgICAgdmFyIGN1cnJlbnROb2RlVG9wID0gY3VycmVudE5vZGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICAgICAgICAvLyBhZGp1c3QgY3VycmVudE5vZGVUb3AgZm9yIHNjcm9sbCBwb3NpdGlvbnMgb2YgYWxsIGFuY2VzdG9yIGVsZW1lbnRzXG4gICAgICAgIHZhciBwYXJlbnQgPSBjdXJyZW50Tm9kZS5wYXJlbnRFbGVtZW50O1xuICAgICAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICAgICAgICBjdXJyZW50Tm9kZVRvcCArPSBwYXJlbnQuc2Nyb2xsVG9wO1xuICAgICAgICAgICAgcGFyZW50ID0gcGFyZW50LnBhcmVudEVsZW1lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jb21tZW50RGVzaXJlZFBvc2l0aW9ucy5zZXQoY29tbWVudElkLCBjdXJyZW50Tm9kZVRvcCAhPT0gMCA/IGN1cnJlbnROb2RlVG9wICsgT0ZGU0VUIDogMCk7XG4gICAgfTtcbiAgICBMYXlvdXRDb250cm9sbGVyLnByb3RvdHlwZS5yZWZyZXNoRGVzaXJlZFBvc2l0aW9ucyA9IGZ1bmN0aW9uICh0YWIpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgaWYgKHRhYiA9PT0gdm9pZCAwKSB7IHRhYiA9IG51bGw7IH1cbiAgICAgICAgLyogRmluZHMgdGhlIGN1cnJlbnQgYW5ub3RhdGlvbiBwb3NpdGlvbnMgb2YgYWxsIHRoZSBjb21tZW50cyBvbiB0aGUgc3BlY2lmaWVkIHRhYiAqL1xuICAgICAgICB2YXIgb2xkRGVzaXJlZFBvc2l0aW9ucyA9IG5ldyBNYXAodGhpcy5jb21tZW50RGVzaXJlZFBvc2l0aW9ucyk7XG4gICAgICAgIHRoaXMuY29tbWVudEFubm90YXRpb25zLmZvckVhY2goZnVuY3Rpb24gKF8sIGNvbW1lbnRJZCkge1xuICAgICAgICAgICAgaWYgKF90aGlzLmdldENvbW1lbnRUYWJWaXNpYmxlKHRhYiwgY29tbWVudElkKSkge1xuICAgICAgICAgICAgICAgIF90aGlzLnVwZGF0ZURlc2lyZWRQb3NpdGlvbihjb21tZW50SWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgICAgLy8gSXQncyBub3QgZ3JlYXQgdG8gYmUgcmVjYWxjdWxhdGluZyBhbGwgcG9zaXRpb25zIHNvIHJlZ3VsYXJseSwgYnV0IFdhZ3RhaWwncyBGRSB3aWRnZXRzXG4gICAgICAgIC8vIGFyZW4ndCB2ZXJ5IGNvbnN0cmFpbmVkIHNvIGNvdWxkIGNoYW5nZSBsYXlvdXQgaW4gYW55IG51bWJlciBvZiB3YXlzLiBJZiB3ZSBoYXZlIGEgc3RhYmxlIEZFXG4gICAgICAgIC8vIHdpZGdldCBmcmFtZXdvcmsgaW4gdGhlIGZ1dHVyZSwgdGhpcyBjb3VsZCBiZSB1c2VkIHRvIHRyaWdnZXIgdGhlIHBvc2l0aW9uIHJlZnJlc2ggbW9yZVxuICAgICAgICAvLyBpbnRlbGxpZ2VudGx5LCBvciBhbHRlcm5hdGl2ZWx5IG9uY2UgY29tbWVudHMgaXMgaW5jb3Jwb3JhdGVkIGludG8gdGhlIHBhZ2UgZm9ybSwgYVxuICAgICAgICAvLyBNdXRhdGlvbk9ic2VydmVyIGNvdWxkIHBvdGVudGlhbGx5IHRyYWNrIG1vc3QgdHlwZXMgb2YgY2hhbmdlcy5cbiAgICAgICAgaWYgKHRoaXMuY29tbWVudERlc2lyZWRQb3NpdGlvbnMgIT09IG9sZERlc2lyZWRQb3NpdGlvbnMpIHtcbiAgICAgICAgICAgIHRoaXMuaXNEaXJ0eSA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9O1xuICAgIExheW91dENvbnRyb2xsZXIucHJvdG90eXBlLnJlZnJlc2hMYXlvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIC8qIFVwZGF0ZXMgcG9zaXRpb25zIG9mIGFsbCBjb21tZW50cyBiYXNlZCBvbiB0aGVpciBhbm5vdGF0aW9uIGxvY2F0aW9ucywgYW5kIHJlc29sdmVzIGFueSBvdmVybGFwcGluZyBjb21tZW50cyAqL1xuICAgICAgICBpZiAoIXRoaXMuaXNEaXJ0eSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIC8vIEJ1aWxkIGxpc3Qgb2YgYmxvY2tzIChzdGFydGluZyB3aXRoIG9uZSBmb3IgZWFjaCBjb21tZW50KVxuICAgICAgICB2YXIgYWxsQmxvY2tzID0gQXJyYXkuZnJvbSh0aGlzLmNvbW1lbnRFbGVtZW50cy5rZXlzKCkpLm1hcChmdW5jdGlvbiAoY29tbWVudElkKSB7IHJldHVybiAoe1xuICAgICAgICAgICAgdGFiOiAoMCwgbWFwc18xLmdldE9yRGVmYXVsdCkoX3RoaXMuY29tbWVudFRhYnMsIGNvbW1lbnRJZCwgbnVsbCksXG4gICAgICAgICAgICBwb3NpdGlvbjogKDAsIG1hcHNfMS5nZXRPckRlZmF1bHQpKF90aGlzLmNvbW1lbnREZXNpcmVkUG9zaXRpb25zLCBjb21tZW50SWQsIDApLFxuICAgICAgICAgICAgaGVpZ2h0OiAoMCwgbWFwc18xLmdldE9yRGVmYXVsdCkoX3RoaXMuY29tbWVudEhlaWdodHMsIGNvbW1lbnRJZCwgMCksXG4gICAgICAgICAgICBjb21tZW50czogW2NvbW1lbnRJZF0sXG4gICAgICAgICAgICBjb250YWluc1Bpbm5lZENvbW1lbnQ6IF90aGlzLnBpbm5lZENvbW1lbnQgIT09IG51bGwgJiYgY29tbWVudElkID09PSBfdGhpcy5waW5uZWRDb21tZW50LFxuICAgICAgICAgICAgcGlubmVkQ29tbWVudFBvc2l0aW9uOiAwXG4gICAgICAgIH0pOyB9KTtcbiAgICAgICAgLy8gR3JvdXAgYmxvY2tzIGJ5IHRhYnNcbiAgICAgICAgdmFyIGJsb2Nrc0J5VGFiID0gbmV3IE1hcCgpO1xuICAgICAgICBhbGxCbG9ja3MuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgIHZhciBibG9ja3MgPSBibG9ja3NCeVRhYi5nZXQoYmxvY2sudGFiKSB8fCBbXTtcbiAgICAgICAgICAgIGJsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgIGJsb2Nrc0J5VGFiLnNldChibG9jay50YWIsIGJsb2Nrcyk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBHZXQgbG9jYXRpb24gb2YgcGlubmVkIGNvbW1lbnRcbiAgICAgICAgdmFyIHBpbm5lZENvbW1lbnRQb3NpdGlvbiA9IHRoaXMucGlubmVkQ29tbWVudFxuICAgICAgICAgICAgPyB0aGlzLmNvbW1lbnREZXNpcmVkUG9zaXRpb25zLmdldCh0aGlzLnBpbm5lZENvbW1lbnQpXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHBpbm5lZENvbW1lbnRUYWIgPSB0aGlzLnBpbm5lZENvbW1lbnRcbiAgICAgICAgICAgID8gdGhpcy5jb21tZW50VGFicy5nZXQodGhpcy5waW5uZWRDb21tZW50KVxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XG4gICAgICAgIC8vIEZvciBlYWNoIHRhYiwgcmVzb2x2ZSBwb3NpdGlvbnMgb2YgYWxsIHRoZSBjb21tZW50c1xuICAgICAgICBBcnJheS5mcm9tKGJsb2Nrc0J5VGFiLmVudHJpZXMoKSkuZm9yRWFjaChmdW5jdGlvbiAoX2EpIHtcbiAgICAgICAgICAgIHZhciBlXzEsIF9iLCBfYztcbiAgICAgICAgICAgIHZhciBfZCA9IF9fcmVhZChfYSwgMiksIHRhYiA9IF9kWzBdLCBibG9ja3MgPSBfZFsxXTtcbiAgICAgICAgICAgIHZhciBwaW5uZWRDb21tZW50T25UaGlzVGFiID0gX3RoaXMucGlubmVkQ29tbWVudCAmJiBwaW5uZWRDb21tZW50VGFiID09PSB0YWI7XG4gICAgICAgICAgICAvLyBTb3J0IGJsb2Nrc1xuICAgICAgICAgICAgYmxvY2tzLnNvcnQoZnVuY3Rpb24gKGJsb2NrLCBjb21wYXJpc29uQmxvY2spIHsgcmV0dXJuIGJsb2NrLnBvc2l0aW9uIC0gY29tcGFyaXNvbkJsb2NrLnBvc2l0aW9uOyB9KTtcbiAgICAgICAgICAgIC8vIFJlc29sdmUgb3ZlcmxhcHBpbmcgYmxvY2tzXG4gICAgICAgICAgICB2YXIgY3VycmVudEJsb2NrcyA9IGJsb2NrcztcbiAgICAgICAgICAgIHZhciBvdmVybGFwcyA9IHRydWU7XG4gICAgICAgICAgICB3aGlsZSAob3ZlcmxhcHMpIHtcbiAgICAgICAgICAgICAgICBvdmVybGFwcyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIHZhciBuZXdCbG9ja3MgPSBbXTtcbiAgICAgICAgICAgICAgICB2YXIgcHJldmlvdXNCbG9jayA9IG51bGw7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgY3VycmVudEJsb2Nrc18xID0gKGVfMSA9IHZvaWQgMCwgX192YWx1ZXMoY3VycmVudEJsb2NrcykpLCBjdXJyZW50QmxvY2tzXzFfMSA9IGN1cnJlbnRCbG9ja3NfMS5uZXh0KCk7ICFjdXJyZW50QmxvY2tzXzFfMS5kb25lOyBjdXJyZW50QmxvY2tzXzFfMSA9IGN1cnJlbnRCbG9ja3NfMS5uZXh0KCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBibG9jayA9IGN1cnJlbnRCbG9ja3NfMV8xLnZhbHVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQmxvY2spIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocHJldmlvdXNCbG9jay5wb3NpdGlvbiArIHByZXZpb3VzQmxvY2suaGVpZ2h0ICsgR0FQID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxvY2sucG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmxhcHMgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGUgYmxvY2tzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYyA9IHByZXZpb3VzQmxvY2suY29tbWVudHMpLnB1c2guYXBwbHkoX2MsIF9fc3ByZWFkQXJyYXkoW10sIF9fcmVhZChibG9jay5jb21tZW50cyksIGZhbHNlKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibG9jay5jb250YWluc1Bpbm5lZENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQmxvY2suY29udGFpbnNQaW5uZWRDb21tZW50ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQmxvY2sucGlubmVkQ29tbWVudFBvc2l0aW9uID1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibG9jay5waW5uZWRDb21tZW50UG9zaXRpb24gKyBwcmV2aW91c0Jsb2NrLmhlaWdodDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0Jsb2NrLmhlaWdodCArPSBibG9jay5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBjb21tZW50cyBkb24ndCBkaXNhcHBlYXIgb2ZmIHRoZSB0b3Agb2YgdGhlIHBhZ2VcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnV0IG9ubHkgaWYgYSBjb21tZW50IGlzbid0IGZvY3VzZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwaW5uZWRDb21tZW50T25UaGlzVGFiICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcmV2aW91c0Jsb2NrLnBvc2l0aW9uIDwgVE9QX01BUkdJTiArIE9GRlNFVCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNCbG9jay5wb3NpdGlvbiA9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgVE9QX01BUkdJTiArIHByZXZpb3VzQmxvY2suaGVpZ2h0IC0gT0ZGU0VUO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgYmxvY2sgY29udGFpbnMgdGhlIGZvY3VzZWQgY29tbWVudCwgcG9zaXRpb24gaXQgc29cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGZvY3VzZWQgY29tbWVudCBpcyBpbiBpdCdzIGRlc2lyZWQgcG9zaXRpb25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpbm5lZENvbW1lbnRQb3NpdGlvbiAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNCbG9jay5jb250YWluc1Bpbm5lZENvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQmxvY2sucG9zaXRpb24gPVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBpbm5lZENvbW1lbnRQb3NpdGlvbiAtIHByZXZpb3VzQmxvY2sucGlubmVkQ29tbWVudFBvc2l0aW9uO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0Jsb2Nrcy5wdXNoKGJsb2NrKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZpb3VzQmxvY2sgPSBibG9jaztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfVxuICAgICAgICAgICAgICAgIGZpbmFsbHkge1xuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRCbG9ja3NfMV8xICYmICFjdXJyZW50QmxvY2tzXzFfMS5kb25lICYmIChfYiA9IGN1cnJlbnRCbG9ja3NfMVtcInJldHVyblwiXSkpIF9iLmNhbGwoY3VycmVudEJsb2Nrc18xKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN1cnJlbnRCbG9ja3MgPSBuZXdCbG9ja3M7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBXcml0ZSBwb3NpdGlvbnNcbiAgICAgICAgICAgIGN1cnJlbnRCbG9ja3MuZm9yRWFjaChmdW5jdGlvbiAoYmxvY2spIHtcbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFBvc2l0aW9uID0gYmxvY2sucG9zaXRpb247XG4gICAgICAgICAgICAgICAgYmxvY2suY29tbWVudHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzLmNvbW1lbnRDYWxjdWxhdGVkUG9zaXRpb25zLnNldChjb21tZW50SWQsIGN1cnJlbnRQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHQgPSBfdGhpcy5jb21tZW50SGVpZ2h0cy5nZXQoY29tbWVudElkKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGhlaWdodCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uICs9IGhlaWdodCArIEdBUDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmlzRGlydHkgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfTtcbiAgICBMYXlvdXRDb250cm9sbGVyLnByb3RvdHlwZS5nZXRDb21tZW50VGFiVmlzaWJsZSA9IGZ1bmN0aW9uICh0YWIsIGNvbW1lbnRJZCkge1xuICAgICAgICB2YXIgY29tbWVudFRhYiA9ICgwLCBtYXBzXzEuZ2V0T3JEZWZhdWx0KSh0aGlzLmNvbW1lbnRUYWJzLCBjb21tZW50SWQsIG51bGwpO1xuICAgICAgICByZXR1cm4gY29tbWVudFRhYiA9PT0gdGFiO1xuICAgIH07XG4gICAgTGF5b3V0Q29udHJvbGxlci5wcm90b3R5cGUuZ2V0Q29tbWVudFZpc2libGUgPSBmdW5jdGlvbiAodGFiLCBjb21tZW50SWQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmdldENvbW1lbnRUYWJWaXNpYmxlKHRhYiwgY29tbWVudElkKSAmJlxuICAgICAgICAgICAgKDAsIG1hcHNfMS5nZXRPckRlZmF1bHQpKHRoaXMuY29tbWVudERlc2lyZWRQb3NpdGlvbnMsIGNvbW1lbnRJZCwgMSkgPiAwKTtcbiAgICB9O1xuICAgIExheW91dENvbnRyb2xsZXIucHJvdG90eXBlLmdldENvbW1lbnRQb3NpdGlvbiA9IGZ1bmN0aW9uIChjb21tZW50SWQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29tbWVudENhbGN1bGF0ZWRQb3NpdGlvbnMuaGFzKGNvbW1lbnRJZCkpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbW1lbnRDYWxjdWxhdGVkUG9zaXRpb25zLmdldChjb21tZW50SWQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLmNvbW1lbnREZXNpcmVkUG9zaXRpb25zLmdldChjb21tZW50SWQpO1xuICAgIH07XG4gICAgcmV0dXJuIExheW91dENvbnRyb2xsZXI7XG59KCkpO1xuZXhwb3J0cy5MYXlvdXRDb250cm9sbGVyID0gTGF5b3V0Q29udHJvbGxlcjtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/utils/layout.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/utils/maps.ts":
/*!********************************************************!*\
  !*** ./client/src/components/CommentApp/utils/maps.ts ***!
  \********************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.getOrDefault = void 0;\nfunction getOrDefault(map, key, defaultValue) {\n    var value = map.get(key);\n    if (typeof value === 'undefined') {\n        return defaultValue;\n    }\n    return value;\n}\nexports.getOrDefault = getOrDefault;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC91dGlscy9tYXBzLnRzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93YWd0YWlsLy4vY2xpZW50L3NyYy9jb21wb25lbnRzL0NvbW1lbnRBcHAvdXRpbHMvbWFwcy50cz82NDUxIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZ2V0T3JEZWZhdWx0ID0gdm9pZCAwO1xuZnVuY3Rpb24gZ2V0T3JEZWZhdWx0KG1hcCwga2V5LCBkZWZhdWx0VmFsdWUpIHtcbiAgICB2YXIgdmFsdWUgPSBtYXAuZ2V0KGtleSk7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xufVxuZXhwb3J0cy5nZXRPckRlZmF1bHQgPSBnZXRPckRlZmF1bHQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/utils/maps.ts\n");

/***/ }),

/***/ "./client/src/components/CommentApp/utils/sequences.ts":
/*!*************************************************************!*\
  !*** ./client/src/components/CommentApp/utils/sequences.ts ***!
  \*************************************************************/
/***/ ((__unused_webpack_module, exports) => {

eval("\nexports.__esModule = true;\nexports.getNextReplyId = exports.getNextCommentId = void 0;\nvar nextCommentId = 1;\nvar nextReplyId = 1;\nfunction getNextCommentId() {\n    nextCommentId += 1;\n    return nextCommentId;\n}\nexports.getNextCommentId = getNextCommentId;\nfunction getNextReplyId() {\n    nextReplyId += 1;\n    return nextReplyId;\n}\nexports.getNextReplyId = getNextReplyId;\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2NvbXBvbmVudHMvQ29tbWVudEFwcC91dGlscy9zZXF1ZW5jZXMudHMuanMiLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2FndGFpbC8uL2NsaWVudC9zcmMvY29tcG9uZW50cy9Db21tZW50QXBwL3V0aWxzL3NlcXVlbmNlcy50cz9lNDUyIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbmV4cG9ydHMuZ2V0TmV4dFJlcGx5SWQgPSBleHBvcnRzLmdldE5leHRDb21tZW50SWQgPSB2b2lkIDA7XG52YXIgbmV4dENvbW1lbnRJZCA9IDE7XG52YXIgbmV4dFJlcGx5SWQgPSAxO1xuZnVuY3Rpb24gZ2V0TmV4dENvbW1lbnRJZCgpIHtcbiAgICBuZXh0Q29tbWVudElkICs9IDE7XG4gICAgcmV0dXJuIG5leHRDb21tZW50SWQ7XG59XG5leHBvcnRzLmdldE5leHRDb21tZW50SWQgPSBnZXROZXh0Q29tbWVudElkO1xuZnVuY3Rpb24gZ2V0TmV4dFJlcGx5SWQoKSB7XG4gICAgbmV4dFJlcGx5SWQgKz0gMTtcbiAgICByZXR1cm4gbmV4dFJlcGx5SWQ7XG59XG5leHBvcnRzLmdldE5leHRSZXBseUlkID0gZ2V0TmV4dFJlcGx5SWQ7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./client/src/components/CommentApp/utils/sequences.ts\n");

/***/ }),

/***/ "./client/src/entrypoints/admin/comments.js":
/*!**************************************************!*\
  !*** ./client/src/entrypoints/admin/comments.js ***!
  \**************************************************/
/***/ (function(__unused_webpack_module, exports, __webpack_require__) {

eval("\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nexports.__esModule = true;\nvar gettext_1 = __webpack_require__(/*! ../../utils/gettext */ \"./client/src/utils/gettext.ts\");\nvar main_1 = __webpack_require__(/*! ../../components/CommentApp/main */ \"./client/src/components/CommentApp/main.tsx\");\nvar KEYCODE_M = 77;\n/**\n * Entry point loaded when the comments system is in use.\n */\nwindow.comments = (function () {\n    var commentApp = (0, main_1.initCommentApp)();\n    /**\n     * Returns true if the provided keyboard event is using the 'add/focus comment' keyboard\n     * shortcut\n     */\n    function isCommentShortcut(e) {\n        return (e.ctrlKey || e.metaKey) && e.altKey && e.keyCode === KEYCODE_M;\n    }\n    function getContentPath(fieldNode) {\n        // Return the total contentpath for an element as a string, in the form field.streamfield_uid.block...\n        if (fieldNode.closest('[data-contentpath-disabled]')) {\n            return '';\n        }\n        var element = fieldNode.closest('[data-contentpath]');\n        var contentpaths = [];\n        while (element !== null) {\n            contentpaths.push(element.dataset.contentpath);\n            element = element.parentElement.closest('[data-contentpath]');\n        }\n        contentpaths.reverse();\n        return contentpaths.join('.');\n    }\n    /**\n     * Controls the positioning of a field level comment, and the display of the button\n     * used to focus and pin the attached comment\n     * `getAnchorNode` is called by the comments app to determine which node to\n     * float the comment alongside\n     */\n    var BasicFieldLevelAnnotation = /** @class */ (function () {\n        /**\n         * Create a field-level annotation\n         * @param {Element} fieldNode - an element to provide the comment position\n         * @param {Element} node - the button to focus/pin the comment\n         */\n        function BasicFieldLevelAnnotation(fieldNode, node) {\n            this.node = node;\n            this.fieldNode = fieldNode;\n            this.unsubscribe = null;\n        }\n        /**\n         * Subscribes the annotation to update when the state of a particular comment changes,\n         * and to focus that comment when clicked\n         * @param {number} localId - the localId of the comment to subscribe to\n         */\n        BasicFieldLevelAnnotation.prototype.subscribeToUpdates = function (localId) {\n            var _this = this;\n            var _a = commentApp.selectors, selectFocused = _a.selectFocused, selectEnabled = _a.selectEnabled;\n            var selectComment = commentApp.utils.selectCommentFactory(localId);\n            var store = commentApp.store;\n            var initialState = store.getState();\n            var focused = selectFocused(initialState) === localId;\n            var shown = selectEnabled(initialState);\n            if (focused) {\n                this.onFocus();\n            }\n            if (shown) {\n                this.show();\n            }\n            this.unsubscribe = store.subscribe(function () {\n                var state = store.getState();\n                var comment = selectComment(state);\n                if (!comment) {\n                    _this.onDelete();\n                }\n                var nowFocused = selectFocused(state) === localId;\n                if (nowFocused !== focused) {\n                    if (focused) {\n                        _this.onUnfocus();\n                    }\n                    else {\n                        _this.onFocus();\n                    }\n                    focused = nowFocused;\n                }\n                if (shown !== selectEnabled(state)) {\n                    if (shown) {\n                        _this.hide();\n                    }\n                    else {\n                        _this.show();\n                    }\n                    shown = selectEnabled(state);\n                }\n            });\n            this.setOnClickHandler(localId);\n        };\n        BasicFieldLevelAnnotation.prototype.onDelete = function () {\n            this.node.remove();\n            if (this.unsubscribe) {\n                this.unsubscribe();\n            }\n        };\n        BasicFieldLevelAnnotation.prototype.onFocus = function () {\n            this.node.classList.add('w-field__comment-button--focused');\n            this.node.ariaLabel = (0, gettext_1.gettext)('Unfocus comment');\n        };\n        BasicFieldLevelAnnotation.prototype.onUnfocus = function () {\n            this.node.classList.remove('w-field__comment-button--focused');\n            this.node.ariaLabel = (0, gettext_1.gettext)('Focus comment');\n            // TODO: ensure comment is focused accessibly when this is clicked,\n            // and that screenreader users can return to the annotation point when desired\n        };\n        BasicFieldLevelAnnotation.prototype.show = function () {\n            this.node.classList.remove('u-hidden');\n        };\n        BasicFieldLevelAnnotation.prototype.hide = function () {\n            this.node.classList.add('u-hidden');\n        };\n        BasicFieldLevelAnnotation.prototype.setOnClickHandler = function (localId) {\n            this.node.addEventListener('click', function () {\n                commentApp.store.dispatch(commentApp.actions.setFocusedComment(localId, {\n                    updatePinnedComment: true,\n                    forceFocus: true\n                }));\n            });\n        };\n        BasicFieldLevelAnnotation.prototype.getTab = function () {\n            var _a;\n            return (_a = this.fieldNode.closest('[role=\"tabpanel\"]')) === null || _a === void 0 ? void 0 : _a.getAttribute('id');\n        };\n        BasicFieldLevelAnnotation.prototype.getAnchorNode = function () {\n            return this.fieldNode;\n        };\n        return BasicFieldLevelAnnotation;\n    }());\n    var MissingElementError = /** @class */ (function (_super) {\n        __extends(MissingElementError, _super);\n        function MissingElementError(element) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            var _this = _super.apply(this, __spreadArray([], __read(params), false)) || this;\n            _this.name = 'MissingElementError';\n            _this.element = element;\n            return _this;\n        }\n        return MissingElementError;\n    }(Error));\n    var FieldLevelCommentWidget = /** @class */ (function () {\n        function FieldLevelCommentWidget(_a) {\n            var fieldNode = _a.fieldNode, commentAdditionNode = _a.commentAdditionNode, annotationTemplateNode = _a.annotationTemplateNode;\n            this.fieldNode = fieldNode;\n            this.contentpath = getContentPath(fieldNode);\n            if (!commentAdditionNode) {\n                throw new MissingElementError(commentAdditionNode);\n            }\n            this.commentAdditionNode = commentAdditionNode;\n            if (!annotationTemplateNode) {\n                throw new MissingElementError(annotationTemplateNode);\n            }\n            this.annotationTemplateNode = annotationTemplateNode;\n            this.updateVisibility(false);\n        }\n        FieldLevelCommentWidget.prototype.register = function () {\n            var _this = this;\n            if (!this.contentpath) {\n                // The widget has no valid contentpath, skip subscriptions\n                return undefined;\n            }\n            var selectEnabled = commentApp.selectors.selectEnabled;\n            var initialState = commentApp.store.getState();\n            var currentlyEnabled = selectEnabled(initialState);\n            var selectCommentsForContentPath = commentApp.utils.selectCommentsForContentPathFactory(this.contentpath);\n            var currentComments = selectCommentsForContentPath(initialState);\n            this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\n            var unsubscribeWidget = commentApp.store.subscribe(function () {\n                var state = commentApp.store.getState();\n                var newComments = selectCommentsForContentPath(state);\n                var newEnabled = selectEnabled(state);\n                var commentsChanged = currentComments !== newComments;\n                var enabledChanged = currentlyEnabled !== newEnabled;\n                if (commentsChanged) {\n                    // Add annotations for any new comments\n                    currentComments = newComments;\n                    currentComments\n                        .filter(function (comment) { return comment.annotation === null; })\n                        .forEach(function (comment) {\n                        var annotation = _this.getAnnotationForComment(comment);\n                        commentApp.updateAnnotation(annotation, comment.localId);\n                        annotation.subscribeToUpdates(comment.localId);\n                    });\n                }\n                if (enabledChanged || commentsChanged) {\n                    // If comments have been enabled or disabled, or the comments have changed\n                    // check whether to show the widget (if comments are enabled and there are no existing comments)\n                    currentlyEnabled = newEnabled;\n                    _this.updateVisibility(currentComments.length === 0 && currentlyEnabled);\n                }\n            });\n            initialState.comments.comments.forEach(function (comment) {\n                // Add annotations for any comments already in the store\n                if (comment.contentpath === _this.contentpath) {\n                    var annotation = _this.getAnnotationForComment(comment);\n                    commentApp.updateAnnotation(annotation, comment.localId);\n                    annotation.subscribeToUpdates(comment.localId);\n                }\n            });\n            var addComment = function () {\n                var annotation = _this.getAnnotationForComment();\n                var localId = commentApp.makeComment(annotation, _this.contentpath);\n                annotation.subscribeToUpdates(localId);\n            };\n            this.commentAdditionNode.addEventListener('click', function () {\n                // Make the widget button clickable to add a comment\n                addComment();\n            });\n            this.fieldNode.addEventListener('keyup', function (e) {\n                if (currentlyEnabled && isCommentShortcut(e)) {\n                    if (currentComments.length === 0) {\n                        addComment();\n                    }\n                    else {\n                        commentApp.store.dispatch(commentApp.actions.setFocusedComment(currentComments[0].localId, {\n                            updatePinnedComment: true,\n                            forceFocus: true\n                        }));\n                    }\n                }\n            });\n            return unsubscribeWidget; // TODO: listen for widget deletion and use this\n        };\n        FieldLevelCommentWidget.prototype.updateVisibility = function (newShown) {\n            if (newShown === this.shown) {\n                return;\n            }\n            this.shown = newShown;\n            if (!this.shown) {\n                this.commentAdditionNode.classList.add('u-hidden');\n            }\n            else {\n                this.commentAdditionNode.classList.remove('u-hidden');\n            }\n        };\n        FieldLevelCommentWidget.prototype.getAnnotationForComment = function () {\n            var annotationNode = this.annotationTemplateNode.cloneNode(true);\n            annotationNode.id = '';\n            annotationNode.setAttribute('aria-label', this.commentAdditionNode.getAttribute('aria-label'));\n            annotationNode.setAttribute('aria-describedby', this.commentAdditionNode.getAttribute('aria-describedby'));\n            annotationNode.classList.remove('u-hidden');\n            this.commentAdditionNode.insertAdjacentElement('beforebegin', annotationNode);\n            return new BasicFieldLevelAnnotation(this.fieldNode, annotationNode, commentApp);\n        };\n        return FieldLevelCommentWidget;\n    }());\n    function onNextEnable(fn) {\n        // Run a function once, when comments are enabled\n        var selectEnabled = commentApp.selectors.selectEnabled;\n        var getEnabled = function () { return selectEnabled(commentApp.store.getState()); };\n        var enabled = getEnabled();\n        if (enabled) {\n            // If we're starting off enabled, run the function immediately\n            fn();\n            return;\n        }\n        var unsubscribe = commentApp.store.subscribe(function () {\n            // Otherwise, subscribe to updates and run the function when comments change to enabled\n            var newEnabled = getEnabled();\n            if (newEnabled && !enabled) {\n                enabled = newEnabled;\n                unsubscribe();\n                fn();\n            }\n        });\n    }\n    function initAddCommentButton(buttonElement) {\n        var initWidget = function () {\n            var widget = new FieldLevelCommentWidget({\n                fieldNode: buttonElement.closest('[data-contentpath]'),\n                commentAdditionNode: buttonElement,\n                annotationTemplateNode: document.querySelector('#comment-icon')\n            });\n            widget.register();\n        };\n        // Our template node may not exist yet - let's hold off until comments are loaded and enabled\n        onNextEnable(initWidget);\n    }\n    function initCommentsInterface(formElement) {\n        var commentsElement = document.getElementById('comments');\n        var commentsOutputElement = document.getElementById('comments-output');\n        var dataElement = document.getElementById('comments-data');\n        if (!commentsElement || !commentsOutputElement || !dataElement) {\n            throw new Error('Comments app failed to initialise. Missing HTML element');\n        }\n        var data = JSON.parse(dataElement.textContent);\n        commentApp.renderApp(commentsElement, commentsOutputElement, data.user, data.comments, new Map(Object.entries(data.authors)));\n        formElement\n            .querySelectorAll('[data-component=\"add-comment-button\"]')\n            .forEach(initAddCommentButton);\n        // Attach the commenting app to the tab navigation, if it exists\n        var tabNavElement = formElement.querySelector('[data-tabs] [role=\"tablist\"]');\n        if (tabNavElement) {\n            commentApp.setCurrentTab(tabNavElement\n                .querySelector('[role=\"tab\"][aria-selected=\"true\"]')\n                .getAttribute('href')\n                .replace('#', ''));\n            tabNavElement.addEventListener('switch', function (e) {\n                commentApp.setCurrentTab(e.detail.tab);\n            });\n        }\n        // Show/hide comments when the side panel is opened/closed\n        var commentsSidePanel = document.querySelector('[data-side-panel=\"comments\"]');\n        var commentNotifications = formElement.querySelector('[data-comment-notifications]');\n        var tabContentElement = formElement.querySelector('.tab-content');\n        var updateCommentVisibility = function (visible) {\n            // Show/hide comments\n            commentApp.setVisible(visible);\n            // Add/Remove tab-nav--comments-enabled class. This changes the size of streamfields\n            if (visible) {\n                tabContentElement.classList.add('tab-content--comments-enabled');\n                if (commentNotifications) {\n                    commentNotifications.hidden = false;\n                }\n            }\n            else {\n                tabContentElement.classList.remove('tab-content--comments-enabled');\n                if (commentNotifications) {\n                    commentNotifications.hidden = true;\n                }\n            }\n        };\n        if (commentsSidePanel) {\n            commentsSidePanel.addEventListener('show', function () {\n                updateCommentVisibility(true);\n            });\n            commentsSidePanel.addEventListener('hide', function () {\n                updateCommentVisibility(false);\n            });\n        }\n        // Keep number of comments up to date with comment app\n        var commentToggle = document.querySelector('[data-side-panel-toggle=\"comments\"]');\n        var commentCounter = document.createElement('div');\n        commentCounter.className =\n            '-w-mr-3 w-py-0.5 w-px-[0.325rem] w-translate-y-[-8px] w-translate-x-[-4px] w-text-[0.5625rem] w-font-bold w-bg-secondary-100 w-text-white w-border w-border-white w-rounded-[1rem]';\n        commentToggle.className =\n            'w-h-slim-header w-bg-transparent w-box-border w-py-3 w-px-3 w-flex w-justify-center w-items-center w-outline-offset-inside w-text-grey-400 w-transition hover:w-transform hover:w-scale-110 hover:w-text-primary focus:w-text-primary expanded:w-text-primary';\n        commentToggle.appendChild(commentCounter);\n        var updateCommentCount = function () {\n            var commentCount = commentApp.selectors.selectCommentCount(commentApp.store.getState());\n            // If comment counter element doesn't exist don't try to update innerText\n            if (!commentCounter) {\n                return;\n            }\n            if (commentCount > 0) {\n                commentCounter.innerText = commentCount.toString();\n            }\n            else {\n                // Note: Hide the circle when its content is empty\n                commentCounter.hidden = true;\n            }\n        };\n        commentApp.store.subscribe(updateCommentCount);\n        updateCommentCount();\n    }\n    return {\n        commentApp: commentApp,\n        getContentPath: getContentPath,\n        isCommentShortcut: isCommentShortcut,\n        initAddCommentButton: initAddCommentButton,\n        initCommentsInterface: initCommentsInterface\n    };\n})();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9jbGllbnQvc3JjL2VudHJ5cG9pbnRzL2FkbWluL2NvbW1lbnRzLmpzLmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL3dhZ3RhaWwvLi9jbGllbnQvc3JjL2VudHJ5cG9pbnRzL2FkbWluL2NvbW1lbnRzLmpzP2U3YjQiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XG4gICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8XG4gICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYiwgcCkpIGRbcF0gPSBiW3BdOyB9O1xuICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcbiAgICB9O1xuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xuICAgICAgICBpZiAodHlwZW9mIGIgIT09IFwiZnVuY3Rpb25cIiAmJiBiICE9PSBudWxsKVxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNsYXNzIGV4dGVuZHMgdmFsdWUgXCIgKyBTdHJpbmcoYikgKyBcIiBpcyBub3QgYSBjb25zdHJ1Y3RvciBvciBudWxsXCIpO1xuICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xuICAgIH07XG59KSgpO1xudmFyIF9fcmVhZCA9ICh0aGlzICYmIHRoaXMuX19yZWFkKSB8fCBmdW5jdGlvbiAobywgbikge1xuICAgIHZhciBtID0gdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9bU3ltYm9sLml0ZXJhdG9yXTtcbiAgICBpZiAoIW0pIHJldHVybiBvO1xuICAgIHZhciBpID0gbS5jYWxsKG8pLCByLCBhciA9IFtdLCBlO1xuICAgIHRyeSB7XG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyb3IpIHsgZSA9IHsgZXJyb3I6IGVycm9yIH07IH1cbiAgICBmaW5hbGx5IHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmIChyICYmICFyLmRvbmUgJiYgKG0gPSBpW1wicmV0dXJuXCJdKSkgbS5jYWxsKGkpO1xuICAgICAgICB9XG4gICAgICAgIGZpbmFsbHkgeyBpZiAoZSkgdGhyb3cgZS5lcnJvcjsgfVxuICAgIH1cbiAgICByZXR1cm4gYXI7XG59O1xudmFyIF9fc3ByZWFkQXJyYXkgPSAodGhpcyAmJiB0aGlzLl9fc3ByZWFkQXJyYXkpIHx8IGZ1bmN0aW9uICh0bywgZnJvbSwgcGFjaykge1xuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGlmIChhciB8fCAhKGkgaW4gZnJvbSkpIHtcbiAgICAgICAgICAgIGlmICghYXIpIGFyID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbSwgMCwgaSk7XG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XG59O1xuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcbnZhciBnZXR0ZXh0XzEgPSByZXF1aXJlKFwiLi4vLi4vdXRpbHMvZ2V0dGV4dFwiKTtcbnZhciBtYWluXzEgPSByZXF1aXJlKFwiLi4vLi4vY29tcG9uZW50cy9Db21tZW50QXBwL21haW5cIik7XG52YXIgS0VZQ09ERV9NID0gNzc7XG4vKipcbiAqIEVudHJ5IHBvaW50IGxvYWRlZCB3aGVuIHRoZSBjb21tZW50cyBzeXN0ZW0gaXMgaW4gdXNlLlxuICovXG53aW5kb3cuY29tbWVudHMgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21tZW50QXBwID0gKDAsIG1haW5fMS5pbml0Q29tbWVudEFwcCkoKTtcbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIGtleWJvYXJkIGV2ZW50IGlzIHVzaW5nIHRoZSAnYWRkL2ZvY3VzIGNvbW1lbnQnIGtleWJvYXJkXG4gICAgICogc2hvcnRjdXRcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBpc0NvbW1lbnRTaG9ydGN1dChlKSB7XG4gICAgICAgIHJldHVybiAoZS5jdHJsS2V5IHx8IGUubWV0YUtleSkgJiYgZS5hbHRLZXkgJiYgZS5rZXlDb2RlID09PSBLRVlDT0RFX007XG4gICAgfVxuICAgIGZ1bmN0aW9uIGdldENvbnRlbnRQYXRoKGZpZWxkTm9kZSkge1xuICAgICAgICAvLyBSZXR1cm4gdGhlIHRvdGFsIGNvbnRlbnRwYXRoIGZvciBhbiBlbGVtZW50IGFzIGEgc3RyaW5nLCBpbiB0aGUgZm9ybSBmaWVsZC5zdHJlYW1maWVsZF91aWQuYmxvY2suLi5cbiAgICAgICAgaWYgKGZpZWxkTm9kZS5jbG9zZXN0KCdbZGF0YS1jb250ZW50cGF0aC1kaXNhYmxlZF0nKSkge1xuICAgICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50ID0gZmllbGROb2RlLmNsb3Nlc3QoJ1tkYXRhLWNvbnRlbnRwYXRoXScpO1xuICAgICAgICB2YXIgY29udGVudHBhdGhzID0gW107XG4gICAgICAgIHdoaWxlIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICAgICAgICBjb250ZW50cGF0aHMucHVzaChlbGVtZW50LmRhdGFzZXQuY29udGVudHBhdGgpO1xuICAgICAgICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50RWxlbWVudC5jbG9zZXN0KCdbZGF0YS1jb250ZW50cGF0aF0nKTtcbiAgICAgICAgfVxuICAgICAgICBjb250ZW50cGF0aHMucmV2ZXJzZSgpO1xuICAgICAgICByZXR1cm4gY29udGVudHBhdGhzLmpvaW4oJy4nKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ29udHJvbHMgdGhlIHBvc2l0aW9uaW5nIG9mIGEgZmllbGQgbGV2ZWwgY29tbWVudCwgYW5kIHRoZSBkaXNwbGF5IG9mIHRoZSBidXR0b25cbiAgICAgKiB1c2VkIHRvIGZvY3VzIGFuZCBwaW4gdGhlIGF0dGFjaGVkIGNvbW1lbnRcbiAgICAgKiBgZ2V0QW5jaG9yTm9kZWAgaXMgY2FsbGVkIGJ5IHRoZSBjb21tZW50cyBhcHAgdG8gZGV0ZXJtaW5lIHdoaWNoIG5vZGUgdG9cbiAgICAgKiBmbG9hdCB0aGUgY29tbWVudCBhbG9uZ3NpZGVcbiAgICAgKi9cbiAgICB2YXIgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENyZWF0ZSBhIGZpZWxkLWxldmVsIGFubm90YXRpb25cbiAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBmaWVsZE5vZGUgLSBhbiBlbGVtZW50IHRvIHByb3ZpZGUgdGhlIGNvbW1lbnQgcG9zaXRpb25cbiAgICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBub2RlIC0gdGhlIGJ1dHRvbiB0byBmb2N1cy9waW4gdGhlIGNvbW1lbnRcbiAgICAgICAgICovXG4gICAgICAgIGZ1bmN0aW9uIEJhc2ljRmllbGRMZXZlbEFubm90YXRpb24oZmllbGROb2RlLCBub2RlKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUgPSBub2RlO1xuICAgICAgICAgICAgdGhpcy5maWVsZE5vZGUgPSBmaWVsZE5vZGU7XG4gICAgICAgICAgICB0aGlzLnVuc3Vic2NyaWJlID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAgICAgICAgICogU3Vic2NyaWJlcyB0aGUgYW5ub3RhdGlvbiB0byB1cGRhdGUgd2hlbiB0aGUgc3RhdGUgb2YgYSBwYXJ0aWN1bGFyIGNvbW1lbnQgY2hhbmdlcyxcbiAgICAgICAgICogYW5kIHRvIGZvY3VzIHRoYXQgY29tbWVudCB3aGVuIGNsaWNrZWRcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGxvY2FsSWQgLSB0aGUgbG9jYWxJZCBvZiB0aGUgY29tbWVudCB0byBzdWJzY3JpYmUgdG9cbiAgICAgICAgICovXG4gICAgICAgIEJhc2ljRmllbGRMZXZlbEFubm90YXRpb24ucHJvdG90eXBlLnN1YnNjcmliZVRvVXBkYXRlcyA9IGZ1bmN0aW9uIChsb2NhbElkKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuICAgICAgICAgICAgdmFyIF9hID0gY29tbWVudEFwcC5zZWxlY3RvcnMsIHNlbGVjdEZvY3VzZWQgPSBfYS5zZWxlY3RGb2N1c2VkLCBzZWxlY3RFbmFibGVkID0gX2Euc2VsZWN0RW5hYmxlZDtcbiAgICAgICAgICAgIHZhciBzZWxlY3RDb21tZW50ID0gY29tbWVudEFwcC51dGlscy5zZWxlY3RDb21tZW50RmFjdG9yeShsb2NhbElkKTtcbiAgICAgICAgICAgIHZhciBzdG9yZSA9IGNvbW1lbnRBcHAuc3RvcmU7XG4gICAgICAgICAgICB2YXIgaW5pdGlhbFN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHZhciBmb2N1c2VkID0gc2VsZWN0Rm9jdXNlZChpbml0aWFsU3RhdGUpID09PSBsb2NhbElkO1xuICAgICAgICAgICAgdmFyIHNob3duID0gc2VsZWN0RW5hYmxlZChpbml0aWFsU3RhdGUpO1xuICAgICAgICAgICAgaWYgKGZvY3VzZWQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uRm9jdXMoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChzaG93bikge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy51bnN1YnNjcmliZSA9IHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlID0gc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgY29tbWVudCA9IHNlbGVjdENvbW1lbnQoc3RhdGUpO1xuICAgICAgICAgICAgICAgIGlmICghY29tbWVudCkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpcy5vbkRlbGV0ZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgbm93Rm9jdXNlZCA9IHNlbGVjdEZvY3VzZWQoc3RhdGUpID09PSBsb2NhbElkO1xuICAgICAgICAgICAgICAgIGlmIChub3dGb2N1c2VkICE9PSBmb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2N1c2VkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5vblVuZm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLm9uRm9jdXMoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmb2N1c2VkID0gbm93Rm9jdXNlZDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHNob3duICE9PSBzZWxlY3RFbmFibGVkKHN0YXRlKSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoc2hvd24pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzaG93biA9IHNlbGVjdEVuYWJsZWQoc3RhdGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5zZXRPbkNsaWNrSGFuZGxlcihsb2NhbElkKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbi5wcm90b3R5cGUub25EZWxldGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUucmVtb3ZlKCk7XG4gICAgICAgICAgICBpZiAodGhpcy51bnN1YnNjcmliZSkge1xuICAgICAgICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbi5wcm90b3R5cGUub25Gb2N1cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QuYWRkKCd3LWZpZWxkX19jb21tZW50LWJ1dHRvbi0tZm9jdXNlZCcpO1xuICAgICAgICAgICAgdGhpcy5ub2RlLmFyaWFMYWJlbCA9ICgwLCBnZXR0ZXh0XzEuZ2V0dGV4dCkoJ1VuZm9jdXMgY29tbWVudCcpO1xuICAgICAgICB9O1xuICAgICAgICBCYXNpY0ZpZWxkTGV2ZWxBbm5vdGF0aW9uLnByb3RvdHlwZS5vblVuZm9jdXMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aGlzLm5vZGUuY2xhc3NMaXN0LnJlbW92ZSgndy1maWVsZF9fY29tbWVudC1idXR0b24tLWZvY3VzZWQnKTtcbiAgICAgICAgICAgIHRoaXMubm9kZS5hcmlhTGFiZWwgPSAoMCwgZ2V0dGV4dF8xLmdldHRleHQpKCdGb2N1cyBjb21tZW50Jyk7XG4gICAgICAgICAgICAvLyBUT0RPOiBlbnN1cmUgY29tbWVudCBpcyBmb2N1c2VkIGFjY2Vzc2libHkgd2hlbiB0aGlzIGlzIGNsaWNrZWQsXG4gICAgICAgICAgICAvLyBhbmQgdGhhdCBzY3JlZW5yZWFkZXIgdXNlcnMgY2FuIHJldHVybiB0byB0aGUgYW5ub3RhdGlvbiBwb2ludCB3aGVuIGRlc2lyZWRcbiAgICAgICAgfTtcbiAgICAgICAgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbi5wcm90b3R5cGUuc2hvdyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS5jbGFzc0xpc3QucmVtb3ZlKCd1LWhpZGRlbicpO1xuICAgICAgICB9O1xuICAgICAgICBCYXNpY0ZpZWxkTGV2ZWxBbm5vdGF0aW9uLnByb3RvdHlwZS5oaWRlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhpcy5ub2RlLmNsYXNzTGlzdC5hZGQoJ3UtaGlkZGVuJyk7XG4gICAgICAgIH07XG4gICAgICAgIEJhc2ljRmllbGRMZXZlbEFubm90YXRpb24ucHJvdG90eXBlLnNldE9uQ2xpY2tIYW5kbGVyID0gZnVuY3Rpb24gKGxvY2FsSWQpIHtcbiAgICAgICAgICAgIHRoaXMubm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBjb21tZW50QXBwLnN0b3JlLmRpc3BhdGNoKGNvbW1lbnRBcHAuYWN0aW9ucy5zZXRGb2N1c2VkQ29tbWVudChsb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgIHVwZGF0ZVBpbm5lZENvbW1lbnQ6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGZvcmNlRm9jdXM6IHRydWVcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbi5wcm90b3R5cGUuZ2V0VGFiID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF9hO1xuICAgICAgICAgICAgcmV0dXJuIChfYSA9IHRoaXMuZmllbGROb2RlLmNsb3Nlc3QoJ1tyb2xlPVwidGFicGFuZWxcIl0nKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEF0dHJpYnV0ZSgnaWQnKTtcbiAgICAgICAgfTtcbiAgICAgICAgQmFzaWNGaWVsZExldmVsQW5ub3RhdGlvbi5wcm90b3R5cGUuZ2V0QW5jaG9yTm9kZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZpZWxkTm9kZTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEJhc2ljRmllbGRMZXZlbEFubm90YXRpb247XG4gICAgfSgpKTtcbiAgICB2YXIgTWlzc2luZ0VsZW1lbnRFcnJvciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcbiAgICAgICAgX19leHRlbmRzKE1pc3NpbmdFbGVtZW50RXJyb3IsIF9zdXBlcik7XG4gICAgICAgIGZ1bmN0aW9uIE1pc3NpbmdFbGVtZW50RXJyb3IoZWxlbWVudCkge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFtdO1xuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICAgICAgICBwYXJhbXNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuYXBwbHkodGhpcywgX19zcHJlYWRBcnJheShbXSwgX19yZWFkKHBhcmFtcyksIGZhbHNlKSkgfHwgdGhpcztcbiAgICAgICAgICAgIF90aGlzLm5hbWUgPSAnTWlzc2luZ0VsZW1lbnRFcnJvcic7XG4gICAgICAgICAgICBfdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICAgICAgICAgIHJldHVybiBfdGhpcztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gTWlzc2luZ0VsZW1lbnRFcnJvcjtcbiAgICB9KEVycm9yKSk7XG4gICAgdmFyIEZpZWxkTGV2ZWxDb21tZW50V2lkZ2V0ID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgICAgICBmdW5jdGlvbiBGaWVsZExldmVsQ29tbWVudFdpZGdldChfYSkge1xuICAgICAgICAgICAgdmFyIGZpZWxkTm9kZSA9IF9hLmZpZWxkTm9kZSwgY29tbWVudEFkZGl0aW9uTm9kZSA9IF9hLmNvbW1lbnRBZGRpdGlvbk5vZGUsIGFubm90YXRpb25UZW1wbGF0ZU5vZGUgPSBfYS5hbm5vdGF0aW9uVGVtcGxhdGVOb2RlO1xuICAgICAgICAgICAgdGhpcy5maWVsZE5vZGUgPSBmaWVsZE5vZGU7XG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRwYXRoID0gZ2V0Q29udGVudFBhdGgoZmllbGROb2RlKTtcbiAgICAgICAgICAgIGlmICghY29tbWVudEFkZGl0aW9uTm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRWxlbWVudEVycm9yKGNvbW1lbnRBZGRpdGlvbk5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5jb21tZW50QWRkaXRpb25Ob2RlID0gY29tbWVudEFkZGl0aW9uTm9kZTtcbiAgICAgICAgICAgIGlmICghYW5ub3RhdGlvblRlbXBsYXRlTm9kZSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBNaXNzaW5nRWxlbWVudEVycm9yKGFubm90YXRpb25UZW1wbGF0ZU5vZGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5hbm5vdGF0aW9uVGVtcGxhdGVOb2RlID0gYW5ub3RhdGlvblRlbXBsYXRlTm9kZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgICAgRmllbGRMZXZlbENvbW1lbnRXaWRnZXQucHJvdG90eXBlLnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZW50cGF0aCkge1xuICAgICAgICAgICAgICAgIC8vIFRoZSB3aWRnZXQgaGFzIG5vIHZhbGlkIGNvbnRlbnRwYXRoLCBza2lwIHN1YnNjcmlwdGlvbnNcbiAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIHNlbGVjdEVuYWJsZWQgPSBjb21tZW50QXBwLnNlbGVjdG9ycy5zZWxlY3RFbmFibGVkO1xuICAgICAgICAgICAgdmFyIGluaXRpYWxTdGF0ZSA9IGNvbW1lbnRBcHAuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgIHZhciBjdXJyZW50bHlFbmFibGVkID0gc2VsZWN0RW5hYmxlZChpbml0aWFsU3RhdGUpO1xuICAgICAgICAgICAgdmFyIHNlbGVjdENvbW1lbnRzRm9yQ29udGVudFBhdGggPSBjb21tZW50QXBwLnV0aWxzLnNlbGVjdENvbW1lbnRzRm9yQ29udGVudFBhdGhGYWN0b3J5KHRoaXMuY29udGVudHBhdGgpO1xuICAgICAgICAgICAgdmFyIGN1cnJlbnRDb21tZW50cyA9IHNlbGVjdENvbW1lbnRzRm9yQ29udGVudFBhdGgoaW5pdGlhbFN0YXRlKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVmlzaWJpbGl0eShjdXJyZW50Q29tbWVudHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRseUVuYWJsZWQpO1xuICAgICAgICAgICAgdmFyIHVuc3Vic2NyaWJlV2lkZ2V0ID0gY29tbWVudEFwcC5zdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBzdGF0ZSA9IGNvbW1lbnRBcHAuc3RvcmUuZ2V0U3RhdGUoKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3Q29tbWVudHMgPSBzZWxlY3RDb21tZW50c0ZvckNvbnRlbnRQYXRoKHN0YXRlKTtcbiAgICAgICAgICAgICAgICB2YXIgbmV3RW5hYmxlZCA9IHNlbGVjdEVuYWJsZWQoc3RhdGUpO1xuICAgICAgICAgICAgICAgIHZhciBjb21tZW50c0NoYW5nZWQgPSBjdXJyZW50Q29tbWVudHMgIT09IG5ld0NvbW1lbnRzO1xuICAgICAgICAgICAgICAgIHZhciBlbmFibGVkQ2hhbmdlZCA9IGN1cnJlbnRseUVuYWJsZWQgIT09IG5ld0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1lbnRzQ2hhbmdlZCkge1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgYW5ub3RhdGlvbnMgZm9yIGFueSBuZXcgY29tbWVudHNcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudENvbW1lbnRzID0gbmV3Q29tbWVudHM7XG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRDb21tZW50c1xuICAgICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcihmdW5jdGlvbiAoY29tbWVudCkgeyByZXR1cm4gY29tbWVudC5hbm5vdGF0aW9uID09PSBudWxsOyB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgLmZvckVhY2goZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uID0gX3RoaXMuZ2V0QW5ub3RhdGlvbkZvckNvbW1lbnQoY29tbWVudCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tZW50QXBwLnVwZGF0ZUFubm90YXRpb24oYW5ub3RhdGlvbiwgY29tbWVudC5sb2NhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFubm90YXRpb24uc3Vic2NyaWJlVG9VcGRhdGVzKGNvbW1lbnQubG9jYWxJZCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoZW5hYmxlZENoYW5nZWQgfHwgY29tbWVudHNDaGFuZ2VkKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGNvbW1lbnRzIGhhdmUgYmVlbiBlbmFibGVkIG9yIGRpc2FibGVkLCBvciB0aGUgY29tbWVudHMgaGF2ZSBjaGFuZ2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIHdoZXRoZXIgdG8gc2hvdyB0aGUgd2lkZ2V0IChpZiBjb21tZW50cyBhcmUgZW5hYmxlZCBhbmQgdGhlcmUgYXJlIG5vIGV4aXN0aW5nIGNvbW1lbnRzKVxuICAgICAgICAgICAgICAgICAgICBjdXJyZW50bHlFbmFibGVkID0gbmV3RW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgX3RoaXMudXBkYXRlVmlzaWJpbGl0eShjdXJyZW50Q29tbWVudHMubGVuZ3RoID09PSAwICYmIGN1cnJlbnRseUVuYWJsZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW5pdGlhbFN0YXRlLmNvbW1lbnRzLmNvbW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKGNvbW1lbnQpIHtcbiAgICAgICAgICAgICAgICAvLyBBZGQgYW5ub3RhdGlvbnMgZm9yIGFueSBjb21tZW50cyBhbHJlYWR5IGluIHRoZSBzdG9yZVxuICAgICAgICAgICAgICAgIGlmIChjb21tZW50LmNvbnRlbnRwYXRoID09PSBfdGhpcy5jb250ZW50cGF0aCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgYW5ub3RhdGlvbiA9IF90aGlzLmdldEFubm90YXRpb25Gb3JDb21tZW50KGNvbW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICBjb21tZW50QXBwLnVwZGF0ZUFubm90YXRpb24oYW5ub3RhdGlvbiwgY29tbWVudC5sb2NhbElkKTtcbiAgICAgICAgICAgICAgICAgICAgYW5ub3RhdGlvbi5zdWJzY3JpYmVUb1VwZGF0ZXMoY29tbWVudC5sb2NhbElkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHZhciBhZGRDb21tZW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBhbm5vdGF0aW9uID0gX3RoaXMuZ2V0QW5ub3RhdGlvbkZvckNvbW1lbnQoKTtcbiAgICAgICAgICAgICAgICB2YXIgbG9jYWxJZCA9IGNvbW1lbnRBcHAubWFrZUNvbW1lbnQoYW5ub3RhdGlvbiwgX3RoaXMuY29udGVudHBhdGgpO1xuICAgICAgICAgICAgICAgIGFubm90YXRpb24uc3Vic2NyaWJlVG9VcGRhdGVzKGxvY2FsSWQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuY29tbWVudEFkZGl0aW9uTm9kZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHRoZSB3aWRnZXQgYnV0dG9uIGNsaWNrYWJsZSB0byBhZGQgYSBjb21tZW50XG4gICAgICAgICAgICAgICAgYWRkQ29tbWVudCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLmZpZWxkTm9kZS5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRseUVuYWJsZWQgJiYgaXNDb21tZW50U2hvcnRjdXQoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRDb21tZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGFkZENvbW1lbnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1lbnRBcHAuc3RvcmUuZGlzcGF0Y2goY29tbWVudEFwcC5hY3Rpb25zLnNldEZvY3VzZWRDb21tZW50KGN1cnJlbnRDb21tZW50c1swXS5sb2NhbElkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBkYXRlUGlubmVkQ29tbWVudDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3JjZUZvY3VzOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHJldHVybiB1bnN1YnNjcmliZVdpZGdldDsgLy8gVE9ETzogbGlzdGVuIGZvciB3aWRnZXQgZGVsZXRpb24gYW5kIHVzZSB0aGlzXG4gICAgICAgIH07XG4gICAgICAgIEZpZWxkTGV2ZWxDb21tZW50V2lkZ2V0LnByb3RvdHlwZS51cGRhdGVWaXNpYmlsaXR5ID0gZnVuY3Rpb24gKG5ld1Nob3duKSB7XG4gICAgICAgICAgICBpZiAobmV3U2hvd24gPT09IHRoaXMuc2hvd24pIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnNob3duID0gbmV3U2hvd247XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2hvd24pIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNvbW1lbnRBZGRpdGlvbk5vZGUuY2xhc3NMaXN0LmFkZCgndS1oaWRkZW4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuY29tbWVudEFkZGl0aW9uTm9kZS5jbGFzc0xpc3QucmVtb3ZlKCd1LWhpZGRlbicpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBGaWVsZExldmVsQ29tbWVudFdpZGdldC5wcm90b3R5cGUuZ2V0QW5ub3RhdGlvbkZvckNvbW1lbnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYW5ub3RhdGlvbk5vZGUgPSB0aGlzLmFubm90YXRpb25UZW1wbGF0ZU5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuaWQgPSAnJztcbiAgICAgICAgICAgIGFubm90YXRpb25Ob2RlLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRoaXMuY29tbWVudEFkZGl0aW9uTm9kZS5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSk7XG4gICAgICAgICAgICBhbm5vdGF0aW9uTm9kZS5zZXRBdHRyaWJ1dGUoJ2FyaWEtZGVzY3JpYmVkYnknLCB0aGlzLmNvbW1lbnRBZGRpdGlvbk5vZGUuZ2V0QXR0cmlidXRlKCdhcmlhLWRlc2NyaWJlZGJ5JykpO1xuICAgICAgICAgICAgYW5ub3RhdGlvbk5vZGUuY2xhc3NMaXN0LnJlbW92ZSgndS1oaWRkZW4nKTtcbiAgICAgICAgICAgIHRoaXMuY29tbWVudEFkZGl0aW9uTm9kZS5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2JlZm9yZWJlZ2luJywgYW5ub3RhdGlvbk5vZGUpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBCYXNpY0ZpZWxkTGV2ZWxBbm5vdGF0aW9uKHRoaXMuZmllbGROb2RlLCBhbm5vdGF0aW9uTm9kZSwgY29tbWVudEFwcCk7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBGaWVsZExldmVsQ29tbWVudFdpZGdldDtcbiAgICB9KCkpO1xuICAgIGZ1bmN0aW9uIG9uTmV4dEVuYWJsZShmbikge1xuICAgICAgICAvLyBSdW4gYSBmdW5jdGlvbiBvbmNlLCB3aGVuIGNvbW1lbnRzIGFyZSBlbmFibGVkXG4gICAgICAgIHZhciBzZWxlY3RFbmFibGVkID0gY29tbWVudEFwcC5zZWxlY3RvcnMuc2VsZWN0RW5hYmxlZDtcbiAgICAgICAgdmFyIGdldEVuYWJsZWQgPSBmdW5jdGlvbiAoKSB7IHJldHVybiBzZWxlY3RFbmFibGVkKGNvbW1lbnRBcHAuc3RvcmUuZ2V0U3RhdGUoKSk7IH07XG4gICAgICAgIHZhciBlbmFibGVkID0gZ2V0RW5hYmxlZCgpO1xuICAgICAgICBpZiAoZW5hYmxlZCkge1xuICAgICAgICAgICAgLy8gSWYgd2UncmUgc3RhcnRpbmcgb2ZmIGVuYWJsZWQsIHJ1biB0aGUgZnVuY3Rpb24gaW1tZWRpYXRlbHlcbiAgICAgICAgICAgIGZuKCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVuc3Vic2NyaWJlID0gY29tbWVudEFwcC5zdG9yZS5zdWJzY3JpYmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCBzdWJzY3JpYmUgdG8gdXBkYXRlcyBhbmQgcnVuIHRoZSBmdW5jdGlvbiB3aGVuIGNvbW1lbnRzIGNoYW5nZSB0byBlbmFibGVkXG4gICAgICAgICAgICB2YXIgbmV3RW5hYmxlZCA9IGdldEVuYWJsZWQoKTtcbiAgICAgICAgICAgIGlmIChuZXdFbmFibGVkICYmICFlbmFibGVkKSB7XG4gICAgICAgICAgICAgICAgZW5hYmxlZCA9IG5ld0VuYWJsZWQ7XG4gICAgICAgICAgICAgICAgdW5zdWJzY3JpYmUoKTtcbiAgICAgICAgICAgICAgICBmbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdEFkZENvbW1lbnRCdXR0b24oYnV0dG9uRWxlbWVudCkge1xuICAgICAgICB2YXIgaW5pdFdpZGdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB3aWRnZXQgPSBuZXcgRmllbGRMZXZlbENvbW1lbnRXaWRnZXQoe1xuICAgICAgICAgICAgICAgIGZpZWxkTm9kZTogYnV0dG9uRWxlbWVudC5jbG9zZXN0KCdbZGF0YS1jb250ZW50cGF0aF0nKSxcbiAgICAgICAgICAgICAgICBjb21tZW50QWRkaXRpb25Ob2RlOiBidXR0b25FbGVtZW50LFxuICAgICAgICAgICAgICAgIGFubm90YXRpb25UZW1wbGF0ZU5vZGU6IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb21tZW50LWljb24nKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB3aWRnZXQucmVnaXN0ZXIoKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gT3VyIHRlbXBsYXRlIG5vZGUgbWF5IG5vdCBleGlzdCB5ZXQgLSBsZXQncyBob2xkIG9mZiB1bnRpbCBjb21tZW50cyBhcmUgbG9hZGVkIGFuZCBlbmFibGVkXG4gICAgICAgIG9uTmV4dEVuYWJsZShpbml0V2lkZ2V0KTtcbiAgICB9XG4gICAgZnVuY3Rpb24gaW5pdENvbW1lbnRzSW50ZXJmYWNlKGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHZhciBjb21tZW50c0VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29tbWVudHMnKTtcbiAgICAgICAgdmFyIGNvbW1lbnRzT3V0cHV0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb21tZW50cy1vdXRwdXQnKTtcbiAgICAgICAgdmFyIGRhdGFFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbW1lbnRzLWRhdGEnKTtcbiAgICAgICAgaWYgKCFjb21tZW50c0VsZW1lbnQgfHwgIWNvbW1lbnRzT3V0cHV0RWxlbWVudCB8fCAhZGF0YUVsZW1lbnQpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ29tbWVudHMgYXBwIGZhaWxlZCB0byBpbml0aWFsaXNlLiBNaXNzaW5nIEhUTUwgZWxlbWVudCcpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkYXRhID0gSlNPTi5wYXJzZShkYXRhRWxlbWVudC50ZXh0Q29udGVudCk7XG4gICAgICAgIGNvbW1lbnRBcHAucmVuZGVyQXBwKGNvbW1lbnRzRWxlbWVudCwgY29tbWVudHNPdXRwdXRFbGVtZW50LCBkYXRhLnVzZXIsIGRhdGEuY29tbWVudHMsIG5ldyBNYXAoT2JqZWN0LmVudHJpZXMoZGF0YS5hdXRob3JzKSkpO1xuICAgICAgICBmb3JtRWxlbWVudFxuICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWNvbXBvbmVudD1cImFkZC1jb21tZW50LWJ1dHRvblwiXScpXG4gICAgICAgICAgICAuZm9yRWFjaChpbml0QWRkQ29tbWVudEJ1dHRvbik7XG4gICAgICAgIC8vIEF0dGFjaCB0aGUgY29tbWVudGluZyBhcHAgdG8gdGhlIHRhYiBuYXZpZ2F0aW9uLCBpZiBpdCBleGlzdHNcbiAgICAgICAgdmFyIHRhYk5hdkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS10YWJzXSBbcm9sZT1cInRhYmxpc3RcIl0nKTtcbiAgICAgICAgaWYgKHRhYk5hdkVsZW1lbnQpIHtcbiAgICAgICAgICAgIGNvbW1lbnRBcHAuc2V0Q3VycmVudFRhYih0YWJOYXZFbGVtZW50XG4gICAgICAgICAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoJ1tyb2xlPVwidGFiXCJdW2FyaWEtc2VsZWN0ZWQ9XCJ0cnVlXCJdJylcbiAgICAgICAgICAgICAgICAuZ2V0QXR0cmlidXRlKCdocmVmJylcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgnIycsICcnKSk7XG4gICAgICAgICAgICB0YWJOYXZFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N3aXRjaCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgY29tbWVudEFwcC5zZXRDdXJyZW50VGFiKGUuZGV0YWlsLnRhYik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBTaG93L2hpZGUgY29tbWVudHMgd2hlbiB0aGUgc2lkZSBwYW5lbCBpcyBvcGVuZWQvY2xvc2VkXG4gICAgICAgIHZhciBjb21tZW50c1NpZGVQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNpZGUtcGFuZWw9XCJjb21tZW50c1wiXScpO1xuICAgICAgICB2YXIgY29tbWVudE5vdGlmaWNhdGlvbnMgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1jb21tZW50LW5vdGlmaWNhdGlvbnNdJyk7XG4gICAgICAgIHZhciB0YWJDb250ZW50RWxlbWVudCA9IGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy50YWItY29udGVudCcpO1xuICAgICAgICB2YXIgdXBkYXRlQ29tbWVudFZpc2liaWxpdHkgPSBmdW5jdGlvbiAodmlzaWJsZSkge1xuICAgICAgICAgICAgLy8gU2hvdy9oaWRlIGNvbW1lbnRzXG4gICAgICAgICAgICBjb21tZW50QXBwLnNldFZpc2libGUodmlzaWJsZSk7XG4gICAgICAgICAgICAvLyBBZGQvUmVtb3ZlIHRhYi1uYXYtLWNvbW1lbnRzLWVuYWJsZWQgY2xhc3MuIFRoaXMgY2hhbmdlcyB0aGUgc2l6ZSBvZiBzdHJlYW1maWVsZHNcbiAgICAgICAgICAgIGlmICh2aXNpYmxlKSB7XG4gICAgICAgICAgICAgICAgdGFiQ29udGVudEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgndGFiLWNvbnRlbnQtLWNvbW1lbnRzLWVuYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudE5vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWVudE5vdGlmaWNhdGlvbnMuaGlkZGVuID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGFiQ29udGVudEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgndGFiLWNvbnRlbnQtLWNvbW1lbnRzLWVuYWJsZWQnKTtcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudE5vdGlmaWNhdGlvbnMpIHtcbiAgICAgICAgICAgICAgICAgICAgY29tbWVudE5vdGlmaWNhdGlvbnMuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmIChjb21tZW50c1NpZGVQYW5lbCkge1xuICAgICAgICAgICAgY29tbWVudHNTaWRlUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcignc2hvdycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21tZW50VmlzaWJpbGl0eSh0cnVlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29tbWVudHNTaWRlUGFuZWwuYWRkRXZlbnRMaXN0ZW5lcignaGlkZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICB1cGRhdGVDb21tZW50VmlzaWJpbGl0eShmYWxzZSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBLZWVwIG51bWJlciBvZiBjb21tZW50cyB1cCB0byBkYXRlIHdpdGggY29tbWVudCBhcHBcbiAgICAgICAgdmFyIGNvbW1lbnRUb2dnbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaWRlLXBhbmVsLXRvZ2dsZT1cImNvbW1lbnRzXCJdJyk7XG4gICAgICAgIHZhciBjb21tZW50Q291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb21tZW50Q291bnRlci5jbGFzc05hbWUgPVxuICAgICAgICAgICAgJy13LW1yLTMgdy1weS0wLjUgdy1weC1bMC4zMjVyZW1dIHctdHJhbnNsYXRlLXktWy04cHhdIHctdHJhbnNsYXRlLXgtWy00cHhdIHctdGV4dC1bMC41NjI1cmVtXSB3LWZvbnQtYm9sZCB3LWJnLXNlY29uZGFyeS0xMDAgdy10ZXh0LXdoaXRlIHctYm9yZGVyIHctYm9yZGVyLXdoaXRlIHctcm91bmRlZC1bMXJlbV0nO1xuICAgICAgICBjb21tZW50VG9nZ2xlLmNsYXNzTmFtZSA9XG4gICAgICAgICAgICAndy1oLXNsaW0taGVhZGVyIHctYmctdHJhbnNwYXJlbnQgdy1ib3gtYm9yZGVyIHctcHktMyB3LXB4LTMgdy1mbGV4IHctanVzdGlmeS1jZW50ZXIgdy1pdGVtcy1jZW50ZXIgdy1vdXRsaW5lLW9mZnNldC1pbnNpZGUgdy10ZXh0LWdyZXktNDAwIHctdHJhbnNpdGlvbiBob3Zlcjp3LXRyYW5zZm9ybSBob3Zlcjp3LXNjYWxlLTExMCBob3Zlcjp3LXRleHQtcHJpbWFyeSBmb2N1czp3LXRleHQtcHJpbWFyeSBleHBhbmRlZDp3LXRleHQtcHJpbWFyeSc7XG4gICAgICAgIGNvbW1lbnRUb2dnbGUuYXBwZW5kQ2hpbGQoY29tbWVudENvdW50ZXIpO1xuICAgICAgICB2YXIgdXBkYXRlQ29tbWVudENvdW50ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNvbW1lbnRDb3VudCA9IGNvbW1lbnRBcHAuc2VsZWN0b3JzLnNlbGVjdENvbW1lbnRDb3VudChjb21tZW50QXBwLnN0b3JlLmdldFN0YXRlKCkpO1xuICAgICAgICAgICAgLy8gSWYgY29tbWVudCBjb3VudGVyIGVsZW1lbnQgZG9lc24ndCBleGlzdCBkb24ndCB0cnkgdG8gdXBkYXRlIGlubmVyVGV4dFxuICAgICAgICAgICAgaWYgKCFjb21tZW50Q291bnRlcikge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChjb21tZW50Q291bnQgPiAwKSB7XG4gICAgICAgICAgICAgICAgY29tbWVudENvdW50ZXIuaW5uZXJUZXh0ID0gY29tbWVudENvdW50LnRvU3RyaW5nKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBIaWRlIHRoZSBjaXJjbGUgd2hlbiBpdHMgY29udGVudCBpcyBlbXB0eVxuICAgICAgICAgICAgICAgIGNvbW1lbnRDb3VudGVyLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGNvbW1lbnRBcHAuc3RvcmUuc3Vic2NyaWJlKHVwZGF0ZUNvbW1lbnRDb3VudCk7XG4gICAgICAgIHVwZGF0ZUNvbW1lbnRDb3VudCgpO1xuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICBjb21tZW50QXBwOiBjb21tZW50QXBwLFxuICAgICAgICBnZXRDb250ZW50UGF0aDogZ2V0Q29udGVudFBhdGgsXG4gICAgICAgIGlzQ29tbWVudFNob3J0Y3V0OiBpc0NvbW1lbnRTaG9ydGN1dCxcbiAgICAgICAgaW5pdEFkZENvbW1lbnRCdXR0b246IGluaXRBZGRDb21tZW50QnV0dG9uLFxuICAgICAgICBpbml0Q29tbWVudHNJbnRlcmZhY2U6IGluaXRDb21tZW50c0ludGVyZmFjZVxuICAgIH07XG59KSgpO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./client/src/entrypoints/admin/comments.js\n");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = __webpack_modules__;
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/chunk loaded */
/******/ 	(() => {
/******/ 		var deferred = [];
/******/ 		__webpack_require__.O = (result, chunkIds, fn, priority) => {
/******/ 			if(chunkIds) {
/******/ 				priority = priority || 0;
/******/ 				for(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];
/******/ 				deferred[i] = [chunkIds, fn, priority];
/******/ 				return;
/******/ 			}
/******/ 			var notFulfilled = Infinity;
/******/ 			for (var i = 0; i < deferred.length; i++) {
/******/ 				var [chunkIds, fn, priority] = deferred[i];
/******/ 				var fulfilled = true;
/******/ 				for (var j = 0; j < chunkIds.length; j++) {
/******/ 					if ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {
/******/ 						chunkIds.splice(j--, 1);
/******/ 					} else {
/******/ 						fulfilled = false;
/******/ 						if(priority < notFulfilled) notFulfilled = priority;
/******/ 					}
/******/ 				}
/******/ 				if(fulfilled) {
/******/ 					deferred.splice(i--, 1)
/******/ 					var r = fn();
/******/ 					if (r !== undefined) result = r;
/******/ 				}
/******/ 			}
/******/ 			return result;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/jsonp chunk loading */
/******/ 	(() => {
/******/ 		// no baseURI
/******/ 		
/******/ 		// object to store loaded and loading chunks
/******/ 		// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 		// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded
/******/ 		var installedChunks = {
/******/ 			"comments": 0
/******/ 		};
/******/ 		
/******/ 		// no chunk on demand loading
/******/ 		
/******/ 		// no prefetching
/******/ 		
/******/ 		// no preloaded
/******/ 		
/******/ 		// no HMR
/******/ 		
/******/ 		// no HMR manifest
/******/ 		
/******/ 		__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);
/******/ 		
/******/ 		// install a JSONP callback for chunk loading
/******/ 		var webpackJsonpCallback = (parentChunkLoadingFunction, data) => {
/******/ 			var [chunkIds, moreModules, runtime] = data;
/******/ 			// add "moreModules" to the modules object,
/******/ 			// then flag all "chunkIds" as loaded and fire callback
/******/ 			var moduleId, chunkId, i = 0;
/******/ 			if(chunkIds.some((id) => (installedChunks[id] !== 0))) {
/******/ 				for(moduleId in moreModules) {
/******/ 					if(__webpack_require__.o(moreModules, moduleId)) {
/******/ 						__webpack_require__.m[moduleId] = moreModules[moduleId];
/******/ 					}
/******/ 				}
/******/ 				if(runtime) var result = runtime(__webpack_require__);
/******/ 			}
/******/ 			if(parentChunkLoadingFunction) parentChunkLoadingFunction(data);
/******/ 			for(;i < chunkIds.length; i++) {
/******/ 				chunkId = chunkIds[i];
/******/ 				if(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 					installedChunks[chunkId][0]();
/******/ 				}
/******/ 				installedChunks[chunkId] = 0;
/******/ 			}
/******/ 			return __webpack_require__.O(result);
/******/ 		}
/******/ 		
/******/ 		var chunkLoadingGlobal = globalThis["webpackChunkwagtail"] = globalThis["webpackChunkwagtail"] || [];
/******/ 		chunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));
/******/ 		chunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module depends on other loaded chunks and execution need to be delayed
/******/ 	var __webpack_exports__ = __webpack_require__.O(undefined, ["wagtail/admin/static/wagtailadmin/js/vendor"], () => (__webpack_require__("./client/src/entrypoints/admin/comments.js")))
/******/ 	__webpack_exports__ = __webpack_require__.O(__webpack_exports__);
/******/ 	
/******/ })()
;